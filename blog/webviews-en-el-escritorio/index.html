<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="es">
<head>
<meta charset="utf-8">
<meta name="description" content="Veremos cómo aplicar WebViews en aplicaciones de escritorio">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Cache-Control" content="max-age=43200">
<meta http-equiv="ETag" content="b'adb158dbc724060983dd702f3f7e291089e1bd11'">
<title>WebViews en el escritorio | MagMax Blog</title>
<link href="/assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="/assets/css/code.css" rel="stylesheet" type="text/css">
<link href="/assets/css/colorbox.css" rel="stylesheet" type="text/css">
<link href="/assets/css/theme.css" rel="stylesheet" type="text/css">
<link href="/assets/css/custom.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="http://feeds.feedburner.com/magmax">
<link rel="canonical" href="http://magmax.org/blog/webviews-en-el-escritorio/">
<link rel="icon" href="/favicon.ico" sizes="16x16">
<link rel="icon" href="/favicon_330.png" sizes="330x330">
<link rel="icon" href="/favicon.png" sizes="128x128">
<meta name="description" itemprop="description" content="Veremos cómo aplicar WebViews en aplicaciones de escritorio">
<meta name="author" content="Miguel Ángel García">
<link rel="prev" href="/blog/micro-web-framework-en-python/" title="Micro-framework web en Python" type="text/html">
<link rel="next" href="/blog/code-retreat-global-day/" title="Code Retreat Global Day 2013: Retrospectiva" type="text/html">
<meta property="og:site_name" content="MagMax Blog">
<meta property="og:title" content="WebViews en el escritorio">
<meta property="og:url" content="http://magmax.org/blog/webviews-en-el-escritorio/">
<meta property="og:description" content="Veremos cómo aplicar WebViews en aplicaciones de escritorio">
<meta property="og:type" content="article">
<meta property="article:author" content="Miguel Ángel García">
<meta property="article:published_time" content="2013-12-07T00:00:00+00:00">
<meta property="article:updated" content="2013-12-07T00:00:00">
<meta property="article:tag" content="gtk">
<meta property="article:tag" content="python">
<meta property="article:tag" content="webviews">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@magmax_en">
<meta name="twitter:creator" content="@magmax">
<meta name="twitter:title" content="MagMax Blog">
<meta name="twitter:description" content="Veremos cómo aplicar WebViews en aplicaciones de escritorio">
<meta name="twitter:url" content="http://magmax.org//blog/webviews-en-el-escritorio/">
<meta name="twitter:image" content="http://magmax.org/favicon.png">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Ir al contenido principal</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation"><div class="container">
<!-- This keeps the margins nice -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://magmax.org/">

        <span id="blog-title">MagMax Blog</span>
      </a>
    </div>
<!-- /.navbar-header -->
    <div class="collapse navbar-collapse navbar-ex1-collapse">
      <ul class="nav navbar-nav">
<li>
<a href="/">Inicio</a>
                </li>
<li>
<a href="/archive.html">Archivo</a>
                </li>
<li>
<a href="/categories">Categorías</a>
                </li>
<li>
<a href="/projects">Proyectos</a>
                </li>
<li>
<a href="/news">Posts Externos</a>

        
      </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>
<form class="navbar-form navbar-left" role="search" action="http://google.com/search" method="get">
<div class="form-group">
<input type="hidden" name="sitesearch" value="magmax.org"><input type="text" name="q" class="form-control" placeholder="Search / Buscar">
</div>
</form>
</li>

        <li style="margin-left:0">
          <a href="http://feeds.feedburner.com/magmax">
            <img src="/assets/images/rss.png" style="width:22px;height:22px"></a>
        </li>

        
      </ul>
</div>
<!-- /.navbar-collapse -->
  </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
  <div class="body-content">
    <div class="row">
      <div class="page-content col-md-9">
        
        <article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="/blog/webviews-en-el-escritorio/" class="u-url">WebViews en el escritorio</a></h1>
            <div class="metadata text-muted">
              <i class="glyphicon glyphicon-calendar"></i>
              <p class="dateline">
                <time class="published dt-published" datetime="2013-12-07T00:00:00+00:00" title="2013-12-07">2013-12-07</time>
                // <time class="updated dt-updated" datetime="2013-12-07T00:00:00" title="2013-12-07">2013-12-07</time></p>
              <p class="commentline">            <a href="/blog/webviews-en-el-escritorio/#disqus_thread" data-disqus-identifier="cache/posts/webviews-en-el-escritorio.html">Comments</a>

</p>
              <address class="vcard author"><a class="url fn" href="http://magmax.org">Miguel Ángel García</a></address>
            </div>
            <br></header><div class="e-content entry-content" itemprop="articleBody text">
            <div>
<p>La programación en móviles ha conseguido poner de moda las <a href="http://developer.android.com/reference/android/webkit/WebView.html" title="WebViews en Android">WebViews</a>. Esta técnica consiste en abrir un navegador y cargar la aplicación como si fuera una página web, embebida dentro del resto de la aplicación.</p>
<p>La primera vez que vi esta técnica, sin embargo, no fue en móvil, sino el cliente de <a href="http://store.steampowered.com/" title="Steam, la plataforma de videojuegos de Valve">Steam</a>, que se ejecutaba bajo Windows (ahora ya también está disponible para GNU/Linux). Desde entonces me picó la curiosidad sobre cómo se haría... y aquí lo tenemos.</p>
<p>Para los ejemplos usaré Python y GTK, aprovechando el post sobre <a href="/blog/micro-web-framework-en-python">micro-framework web</a> anterior.</p>
<!-- TEASER_END -->

<h2 id="la-idea">La idea</h2>
<p>El diseño es sencillo: Necesitamos al menos dos hilos, uno para gestionar el servidor web y otro para la interfaz. Dado que la interfaz debe estar en el hilo principal por necesidades de <a href="http://www.gtk.org/">GTK</a>, es lógico pensar que lo fácil es lanzar el servidor web en segundo plano. Por eso aquí está el código principal, que es lo más importante de todo:</p>
<pre class="code literal-block"><span class="k">def</span> <span class="nf">finish</span><span class="p">(</span><span class="n">ignorable</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="n">gtk</span><span class="o">.</span><span class="n">main_quit</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">signal</span><span class="o">.</span><span class="n">signal</span><span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">SIGINT</span><span class="p">,</span> <span class="n">finish</span><span class="p">)</span>
    <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">threads_init</span><span class="p">()</span>

    <span class="n">web</span> <span class="o">=</span> <span class="n">WebServer</span><span class="p">()</span>
    <span class="n">web</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

    <span class="n">uri</span> <span class="o">=</span> <span class="s">'http://localhost:{}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">web</span><span class="o">.</span><span class="n">port</span><span class="p">)</span>
    <span class="k">print</span> <span class="s">'serving at'</span><span class="p">,</span> <span class="n">web</span><span class="o">.</span><span class="n">port</span>
    <span class="k">print</span> <span class="s">'connecting to '</span><span class="p">,</span> <span class="n">uri</span>
    <span class="n">run_gui</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>

    <span class="n">gtk</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre>


<p>Como vemos, lo primero es inicializar gtk y permitir que un <code>CTRL+C</code> finalice la aplicación. Inmediatamente después, se arranca el servidor web que, como dije, se ejecutará en segundo plano. Ahora iremos con él. A continuación lanzamos la GUI indicándole el puerto donde está escuchando el servidor web.</p>
<p>A partir de este punto tendremos dos aplicaciones: El servidor web y la GUI, comunicándose por HTTP.</p>
<h3 id="el-servidor-web">El servidor web</h3>
<p>El servidor web está basado en el <a href="/blog/micro-web-framework-en-python">micro-framework web</a> que ya comenté:</p>
<pre class="code literal-block"><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">httplib</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">from</span> <span class="nn">StringIO</span> <span class="kn">import</span> <span class="n">StringIO</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urlparse</span><span class="p">,</span> <span class="n">parse_qs</span>
<span class="kn">import</span> <span class="nn">thread</span>

<span class="kn">from</span> <span class="nn">BaseHTTPServer</span> <span class="kn">import</span> <span class="n">HTTPServer</span><span class="p">,</span> <span class="n">BaseHTTPRequestHandler</span>


<span class="k">class</span> <span class="nc">Handler</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span> <span class="o">=</span> <span class="n">request</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_output</span> <span class="o">=</span> <span class="n">StringIO</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_output</span><span class="o">.</span><span class="n">write</span>

    <span class="k">def</span> <span class="nf">finish</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">length</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_output</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_output</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">send_response</span><span class="p">(</span><span class="n">httplib</span><span class="o">.</span><span class="n">OK</span><span class="p">)</span>
        <span class="n">encoding</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">getfilesystemencoding</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">send_header</span><span class="p">(</span><span class="s">"Content-type"</span><span class="p">,</span> <span class="s">"text/html; charset=</span><span class="si">%s</span><span class="s">"</span> <span class="o">%</span> <span class="n">encoding</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">send_header</span><span class="p">(</span><span class="s">"Content-Length"</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">length</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">end_headers</span><span class="p">()</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">copyfileobj</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_output</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">wfile</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_output</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">pass</span>


<span class="k">class</span> <span class="nc">MainHandler</span><span class="p">(</span><span class="n">Handler</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
            <span class="s">'&lt;html&gt;'</span>
            <span class="s">'  &lt;body&gt;'</span>
            <span class="s">'    &lt;form action="/greet" method="GET"&gt;'</span>
            <span class="s">'      &lt;input name="name" placeholder="Your name"/&gt;'</span>
            <span class="s">'      &lt;input type="submit" value="Greet"/&gt;'</span>
            <span class="s">'    &lt;/form&gt;'</span>
            <span class="s">'  &lt;/body&gt;'</span>
            <span class="s">'&lt;/html&gt;'</span>
        <span class="p">)</span>


<span class="k">class</span> <span class="nc">GreetingsHandler</span><span class="p">(</span><span class="n">Handler</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">'&lt;h1&gt;Cheers, {name[0]}!&lt;/h1&gt;&lt;br/&gt;&lt;br/&gt;&lt;a href="/"&gt;Go back&lt;/a&gt;'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>


<span class="k">class</span> <span class="nc">HTTPRequestHandler</span><span class="p">(</span><span class="n">BaseHTTPRequestHandler</span><span class="p">):</span>
    <span class="n">HANDLERS</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">'/greet'</span><span class="p">),</span> <span class="n">GreetingsHandler</span><span class="p">),</span>
        <span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">'/'</span><span class="p">),</span> <span class="n">MainHandler</span><span class="p">),</span>
        <span class="p">]</span>

    <span class="k">def</span> <span class="nf">do_GET</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">urlparse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">regex</span><span class="p">,</span> <span class="n">clazz</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">HANDLERS</span><span class="p">:</span>
            <span class="n">m</span> <span class="o">=</span> <span class="n">regex</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">url</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">m</span><span class="p">:</span>
                <span class="n">params</span> <span class="o">=</span> <span class="n">parse_qs</span><span class="p">(</span><span class="n">url</span><span class="o">.</span><span class="n">query</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>

                <span class="n">handler</span> <span class="o">=</span> <span class="n">clazz</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                <span class="n">handler</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">handler</span><span class="o">.</span><span class="n">finish</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_error</span><span class="p">(</span><span class="n">httplib</span><span class="o">.</span><span class="n">NOT_FOUND</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">WebServer</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">address</span> <span class="o">=</span> <span class="p">(</span><span class="s">''</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_httpd</span> <span class="o">=</span> <span class="n">HTTPServer</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="n">HTTPRequestHandler</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">port</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_httpd</span><span class="o">.</span><span class="n">server_address</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">thread</span><span class="o">.</span><span class="n">start_new_thread</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__background_run</span><span class="p">,</span> <span class="p">())</span>

    <span class="k">def</span> <span class="nf">__background_run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_httpd</span><span class="o">.</span><span class="n">serve_forever</span><span class="p">()</span>
</pre>


<p>Los que hayáis leído el artículo sobre <a href="/blog/micro-web-framework-en-python">micro-framework web</a> veréis aquí algunas diferencias:</p>
<ul>
<li>El método <code>get</code> recibe como parámetros los parámetros indicados en la url. Así, la url <strong>"/greet?name=MagMax"</strong> recibirá como argumentos <strong>"name = 'MagMax'"</strong>.</li>
<li>El objeto <code>WebServer</code> tiene un método <code>run</code> que ejecuta el servidor en <em>background</em>. Eso es algo que necesito para que el GUI esté en primer plano.</li>
</ul>
<p>No creo que resulte difícil entender el código.</p>
<p>El HTML que se muestra es muy cutre... Perdonad, pero no quería ensuciar el código con más HTML y he pretendido que se parezca lo máximo posible al del artículo <a href="/blog/micro-web-framework-en-python">micro-framework web</a>.</p>
<h3 id="la-gui">La GUI</h3>
<p>Ahora vamos con la interfaz gráfica. Uno de los problemas aquí es ver qué motor se va a usar. Podemos elegir <a href="http://es.wikipedia.org/wiki/Gecko_(motor_de_renderizado)" title="Motor de renderizado Gecko, de Mozilla">Gecko</a> o bien <a href="http://es.wikipedia.org/wiki/WebKit" title="Motor de renderizado WebKit">WebKit</a>. La mejor opción es soportar ambos:</p>
<pre class="code literal-block"><span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">webkit</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">webkit</span> <span class="o">=</span> <span class="bp">False</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">gtkmozembed</span> <span class="kn">as</span> <span class="nn">gecko</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">gecko</span> <span class="o">=</span> <span class="bp">False</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">webkit</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">gecko</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">'Failed to load both webkit and gecko modules'</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">WebKitDriver</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">create_browser</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">webkit</span><span class="o">.</span><span class="n">WebView</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">open_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">browser</span><span class="p">,</span> <span class="n">uri</span><span class="p">):</span>
        <span class="n">browser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">GeckoDriver</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">create_browser</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">gecko</span><span class="o">.</span><span class="n">MozEmbed</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">open_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">browser</span><span class="p">,</span> <span class="n">uri</span><span class="p">):</span>
        <span class="n">browser</span><span class="o">.</span><span class="n">load_url</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">run_gui</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="n">window</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">Window</span><span class="p">()</span>
    <span class="n">driver</span> <span class="o">=</span> <span class="n">WebKitDriver</span><span class="p">()</span> <span class="k">if</span> <span class="n">webkit</span> <span class="k">else</span> <span class="n">GeckoDriver</span><span class="p">()</span>
    <span class="n">browser</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">create_browser</span><span class="p">()</span>

    <span class="n">box</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">VBox</span><span class="p">(</span><span class="n">homogeneous</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">spacing</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">window</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">box</span><span class="p">)</span>

    <span class="n">box</span><span class="o">.</span><span class="n">pack_start</span><span class="p">(</span><span class="n">browser</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="n">window</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'destroy'</span><span class="p">,</span> <span class="n">finish</span><span class="p">)</span>
    <span class="n">window</span><span class="o">.</span><span class="n">set_default_size</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">600</span><span class="p">)</span>
    <span class="n">window</span><span class="o">.</span><span class="n">show_all</span><span class="p">()</span>

    <span class="n">driver</span><span class="o">.</span><span class="n">open_uri</span><span class="p">(</span><span class="n">browser</span><span class="p">,</span> <span class="n">uri</span><span class="p">)</span>
</pre>


<p>Lo primero es tratar de cargar uno de los dos motores. Aquí se usa un patrón típico en python que consiste en crear una variable nula con el nombre del módulo cuando éste no existe. Si no se pudo cargar ninguno, se lanza un error.</p>
<p>Tenemos dos clases con la misma interfaz, aunque no he creado la interfaz explícitamente, sino que he hecho uso del <strong>"duck typing"</strong>. Éstas permiten crear el objeto GTK con el <em>browser</em> y abrir una URL. Así que lo primero que se hace es crear el "driver", que oculta la implementación usada. Y así basta con crear un objeto básico y meterle el <em>browser</em>.</p>
<p>Para terminar preparamos la finalización y lo mostramos. Y, finalmente, mostramos la página con nuestra aplicación.</p>
<h2 id="todo-el-codigo">Todo el código</h2>
<p>Ale, aquí tenéis el código todo junto. Yo lo dividiría en, al menos, 2 archivos, pero lo he puesto junto para que os sea más sencillo probarlo si queréis. De todas maneras he puesto comentarios donde yo dividiría, separando también los <code>imports</code>.</p>
<p>Necesitaréis el paquete debian <a href="http://packages.debian.org/es/squeeze/python-webkit" title="Versión actual de python-webkit en Debian stable">python-webkit</a>, por ejemplo, así como <a href="http://packages.debian.org/es/squeeze/python-gtk2" title="Versión actual de python-gtk2 en Debian stable">python-gtk2</a>:</p>
<pre class="code literal-block"><span class="c">#!/usr/bin/env python</span>

<span class="c"># file webserver.py</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">httplib</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">from</span> <span class="nn">StringIO</span> <span class="kn">import</span> <span class="n">StringIO</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urlparse</span><span class="p">,</span> <span class="n">parse_qs</span>
<span class="kn">import</span> <span class="nn">thread</span>

<span class="kn">from</span> <span class="nn">BaseHTTPServer</span> <span class="kn">import</span> <span class="n">HTTPServer</span><span class="p">,</span> <span class="n">BaseHTTPRequestHandler</span>


<span class="k">class</span> <span class="nc">Handler</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span> <span class="o">=</span> <span class="n">request</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_output</span> <span class="o">=</span> <span class="n">StringIO</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_output</span><span class="o">.</span><span class="n">write</span>

    <span class="k">def</span> <span class="nf">finish</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">length</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_output</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_output</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">send_response</span><span class="p">(</span><span class="n">httplib</span><span class="o">.</span><span class="n">OK</span><span class="p">)</span>
        <span class="n">encoding</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">getfilesystemencoding</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">send_header</span><span class="p">(</span><span class="s">"Content-type"</span><span class="p">,</span> <span class="s">"text/html; charset=</span><span class="si">%s</span><span class="s">"</span> <span class="o">%</span> <span class="n">encoding</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">send_header</span><span class="p">(</span><span class="s">"Content-Length"</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">length</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">end_headers</span><span class="p">()</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">copyfileobj</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_output</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">wfile</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_output</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">pass</span>


<span class="k">class</span> <span class="nc">MainHandler</span><span class="p">(</span><span class="n">Handler</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
            <span class="s">'&lt;html&gt;'</span>
            <span class="s">'  &lt;body&gt;'</span>
            <span class="s">'    &lt;form action="/greet" method="GET"&gt;'</span>
            <span class="s">'      &lt;input name="name" placeholder="Your name"/&gt;'</span>
            <span class="s">'      &lt;input type="submit" value="Greet"/&gt;'</span>
            <span class="s">'    &lt;/form&gt;'</span>
            <span class="s">'  &lt;/body&gt;'</span>
            <span class="s">'&lt;/html&gt;'</span>
        <span class="p">)</span>


<span class="k">class</span> <span class="nc">GreetingsHandler</span><span class="p">(</span><span class="n">Handler</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">'&lt;h1&gt;Cheers, {name[0]}!&lt;/h1&gt;&lt;br/&gt;&lt;br/&gt;&lt;a href="/"&gt;Go back&lt;/a&gt;'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>


<span class="k">class</span> <span class="nc">HTTPRequestHandler</span><span class="p">(</span><span class="n">BaseHTTPRequestHandler</span><span class="p">):</span>
    <span class="n">HANDLERS</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">'/greet'</span><span class="p">),</span> <span class="n">GreetingsHandler</span><span class="p">),</span>
        <span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">'/'</span><span class="p">),</span> <span class="n">MainHandler</span><span class="p">),</span>
        <span class="p">]</span>

    <span class="k">def</span> <span class="nf">do_GET</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">urlparse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">regex</span><span class="p">,</span> <span class="n">clazz</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">HANDLERS</span><span class="p">:</span>
            <span class="n">m</span> <span class="o">=</span> <span class="n">regex</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">url</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">m</span><span class="p">:</span>
                <span class="n">params</span> <span class="o">=</span> <span class="n">parse_qs</span><span class="p">(</span><span class="n">url</span><span class="o">.</span><span class="n">query</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>

                <span class="n">handler</span> <span class="o">=</span> <span class="n">clazz</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                <span class="n">handler</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">handler</span><span class="o">.</span><span class="n">finish</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_error</span><span class="p">(</span><span class="n">httplib</span><span class="o">.</span><span class="n">NOT_FOUND</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">WebServer</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">address</span> <span class="o">=</span> <span class="p">(</span><span class="s">''</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_httpd</span> <span class="o">=</span> <span class="n">HTTPServer</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="n">HTTPRequestHandler</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">port</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_httpd</span><span class="o">.</span><span class="n">server_address</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">thread</span><span class="o">.</span><span class="n">start_new_thread</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__background_run</span><span class="p">,</span> <span class="p">())</span>

    <span class="k">def</span> <span class="nf">__background_run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_httpd</span><span class="o">.</span><span class="n">serve_forever</span><span class="p">()</span>


<span class="c"># File gui.py</span>
<span class="kn">import</span> <span class="nn">signal</span>
<span class="kn">import</span> <span class="nn">gtk</span>
<span class="kn">from</span> <span class="nn">webserver</span> <span class="kn">import</span> <span class="n">WebServer</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">webkit</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">webkit</span> <span class="o">=</span> <span class="bp">False</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">gtkmozembed</span> <span class="kn">as</span> <span class="nn">gecko</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">gecko</span> <span class="o">=</span> <span class="bp">False</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">webkit</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">gecko</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">'Failed to load both webkit and gecko modules'</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">WebKitDriver</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">create_browser</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">webkit</span><span class="o">.</span><span class="n">WebView</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">open_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">browser</span><span class="p">,</span> <span class="n">uri</span><span class="p">):</span>
        <span class="n">browser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">GeckoDriver</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">create_browser</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">gecko</span><span class="o">.</span><span class="n">MozEmbed</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">open_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">browser</span><span class="p">,</span> <span class="n">uri</span><span class="p">):</span>
        <span class="n">browser</span><span class="o">.</span><span class="n">load_url</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">run_gui</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="n">window</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">Window</span><span class="p">()</span>
    <span class="n">driver</span> <span class="o">=</span> <span class="n">WebKitDriver</span><span class="p">()</span> <span class="k">if</span> <span class="n">webkit</span> <span class="k">else</span> <span class="n">GeckoDriver</span><span class="p">()</span>
    <span class="n">browser</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">create_browser</span><span class="p">()</span>

    <span class="n">box</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">VBox</span><span class="p">(</span><span class="n">homogeneous</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">spacing</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">window</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">box</span><span class="p">)</span>

    <span class="n">box</span><span class="o">.</span><span class="n">pack_start</span><span class="p">(</span><span class="n">browser</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="n">window</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'destroy'</span><span class="p">,</span> <span class="n">finish</span><span class="p">)</span>
    <span class="n">window</span><span class="o">.</span><span class="n">set_default_size</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">600</span><span class="p">)</span>
    <span class="n">window</span><span class="o">.</span><span class="n">show_all</span><span class="p">()</span>

    <span class="n">driver</span><span class="o">.</span><span class="n">open_uri</span><span class="p">(</span><span class="n">browser</span><span class="p">,</span> <span class="n">uri</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">finish</span><span class="p">(</span><span class="n">ignorable</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="n">gtk</span><span class="o">.</span><span class="n">main_quit</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">signal</span><span class="o">.</span><span class="n">signal</span><span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">SIGINT</span><span class="p">,</span> <span class="n">finish</span><span class="p">)</span>
    <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">threads_init</span><span class="p">()</span>

    <span class="n">web</span> <span class="o">=</span> <span class="n">WebServer</span><span class="p">()</span>
    <span class="n">web</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

    <span class="n">uri</span> <span class="o">=</span> <span class="s">'http://localhost:{}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">web</span><span class="o">.</span><span class="n">port</span><span class="p">)</span>
    <span class="k">print</span> <span class="s">'serving at'</span><span class="p">,</span> <span class="n">web</span><span class="o">.</span><span class="n">port</span>
    <span class="k">print</span> <span class="s">'connecting to '</span><span class="p">,</span> <span class="n">uri</span>
    <span class="n">run_gui</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>

    <span class="n">gtk</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre>


<h2 id="depuracion-y-testing">Depuración y testing</h2>
<p>Resulta bastante complejo depurar el código JavaScript en la aplicación. Pero recordemos que tenemos una página web, así que podemos abrir un navegador en el puerto que se haya seleccionado y depurar ahí. Se depurará igual que cualquier aplicación web normal.</p>
<p>Es más: Se pueden ejecutar regresiones de tests sobre la página web o utilizar sistemas típicos como <a href="http://webob.org/" title="Librería python de pruebas HTTP">WebOb</a> o cualquier otra librería de <em>testing</em>.</p>
<p>Para tests de aceptación, se podría proporcionar un argumento que permita seleccionar un puerto, guardarlo en un archivo o bien procesar la salida. Para los tests de JavaScript también pueden utilizarse los sistemas habituales.</p>
<h2 id="ventajas-e-inconvenientes">Ventajas e inconvenientes</h2>
<p>Manejar aplicaciones de esta manera tiene numerosas ventajas e inconvenientes. La mayor de las ventajas es que <strong>no hace falta aprender a usar una librería de GUI</strong> tan compleja como pueda ser <a href="http://www.gtk.org/">GTK</a> o <a href="http://qt-project.org/">QT</a>. Estas librerías tienen sus propios componentes, sus sistemas de eventos, etc. Que hacen que no sea nada trivial cambiar de una a otra.</p>
<p>Además, a menudo resulta tedioso portar los programas creados con estas librerías a sistemas operativos como Windows. Es cierto que lo aquí expuesto se basa en usarlas como base, pero en Windows se podría hacer una aplicación mínima nativa que lance el servidor web y el browser, y a partir de ese momento todo sería compatible.</p>
<p>Evidentemente, <strong>resultará muy sencillo transformar la aplicación de escritorio en una página web</strong>, ya que <em>es</em> una página web. Como tal, además, podríamos utilizar recursos que se encuentren en la Web, aunque con esto perderíamos autonomía.</p>
<p>Hay quien pueda pensar que el mayor inconveniente es la <strong>seguridad</strong>, ya que se está compartiendo en un puerto de nuestra máquina. Este problema es fácil de solucionar, añadiendo un filtro en el método <code>do_GET</code> de manera que sólo se admita <em>localhost</em>.</p>
<p>Sin embargo, para mí el mayor problema es la <strong>comunicación Servidor-Cliente</strong>. ¿Qué ocurre cuando queremos mostrar algo que ha ocurrido en el servidor, en segundo plano? Existen dos soluciones, igual que en web:</p>
<ul>
<li>Utilizar <a href="http://es.wikipedia.org/wiki/Polling">polling</a>, de manera que el cliente pregunte periódicamente al servidor.</li>
<li>Utilizar <a href="http://es.wikipedia.org/wiki/WebSocket">websockets</a>, lo que implica complicar un poquito el cliente y el servidor, además de tener otra conexión TCP abierta.</li>
</ul>
<p>No hay que olvidar los <strong>recursos</strong> necesarios para ejecutar este tipo de aplicaciones, ya que estamos abriendo un navegador Web para algo que puede ser bastante "pequeño".</p>
<p>Finalmente, las aplicaciones no son Python, sino que serán principalmente JavaScript. Esto puede verse como una ventaja, ya que se puede cambiar el servidor hasta de lenguaje sin tocar el cliente, consiguiendo así tener <strong>claramente diferenciadas las capas de visualización y negocio</strong>.</p>
<p>Algo que puede verse como una ventaja y una desventaja es que las aplicaciones no dependerán del estilo de ventanas propio del sistema operativo. El diseño de la aplicación será algo propio, de la misma manera que cada página web tiene su propio diseño y no se integra con el escritorio.</p>
<h2 id="para-gustos-los-colores">Para gustos los colores</h2>
<p>Una vez más, en informática no exite la mejor solución. Este tipo de aplicaciones pueden ser geniales en algunos casos, pero en otros ser un auténtico tormento. Habrá que decidir en cada caso cuál es la mejor herramienta para obtener el resultado deseado.</p>
<p>Pero eso es justo lo que pretendo: Para proporcionar mayor número de herramientas para que nos sea más sencillo resolver problemas más adelante.</p>
</div>
          </div>
          <br><div>
            <nav><span class="author">
                <span class="glyphicon glyphicon-user"></span> 
                <span>Publicado:Miguel Ángel García</span>
              </span>
               

              
              <span class="dateline">
                <span class="glyphicon glyphicon-calendar"></span> 
                <time class="published dt-published" datetime="2013-12-07T00:00:00+00:00" title="2013-12-07">2013-12-07</time></span>
               
              <span class="tags">
                <span class="glyphicon glyphicon-tags"></span> 
                <a class="label label-primary p-category" href="/categories/gtk/" rel="tag">gtk</a>
                <a class="label label-primary p-category" href="/categories/python/" rel="tag">python</a>
                <a class="label label-primary p-category" href="/categories/webviews/" rel="tag">webviews</a>
              </span>
                      <ul class="pager">
<li class="previous">
              <a href="/blog/micro-web-framework-en-python/" rel="prev" title="Micro-framework web en Python">
                <span class="glyphicon glyphicon-arrow-left"></span>
                Publicación anterior
              </a>
            </li>
            <li class="next">
              <a href="/blog/code-retreat-global-day/" rel="next" title="Code Retreat Global Day 2013: Retrospectiva">
                Siguiente publicación
                <span class="glyphicon glyphicon-arrow-right"></span>
              </a>
            </li>
        </ul>
<div style="margin-left: auto; margin-right: auto;">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:inline-block;width:728px;height:90px" data-ad-client="ca-pub-1887364423515042" data-ad-slot="4236077264"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>
            </nav>
</div>
          <section class="comments"><h2>Comentarios</h2>
                            <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="magmax",
            disqus_url="http://magmax.org/blog/webviews-en-el-escritorio/",
        disqus_title="WebViews en el escritorio",
        disqus_identifier="cache/posts/webviews-en-el-escritorio.html",
        disqus_config = function () {
            this.language = "es_ES";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="//disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


          </section></article><script>var disqus_shortname="magmax";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
      <aside class="sidebar col-md-3"><div>
<section class="panel panel-default"><div class="panel-body">
    <div id="recentcomments" class="dsq-widget">
      <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:inline-block;width:180px;height:150px" data-ad-client="ca-pub-1887364423515042" data-ad-slot="7479875641"></ins>
      <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
</div>
  </div>
</section>
</div>
          <div>
<section class="panel panel-default"><div class="panel-heading">
    <h3 class="panel-title">Last comments</h3>
  </div>
  <div class="panel-body">
    <div id="disqus_last_comments" class="dsq-widget">
      <script type="text/javascript" src="http://magmax.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=0&amp;avatar_size=32&amp;excerpt_length=150">
      </script>
</div>
  </div>
</section>
</div>
          <div>
<section class="panel panel-default"><div class="panel-heading">
    <h3 class="panel-title">GitHub Repos</h3>
  </div>
  <div class="panel-body">
    <ul id="gh_repos" class="list-unstyled">
<li class="loading">Status updating…</li>
    </ul>
</div>
  <div class="panel-footer">
    <a href="https://github.com/magmax">@magmax</a> on GitHub
  </div>
</section>
</div>
      </aside>
</div>

    <footer>
      Contents © 2009-2020 <a href="mailto:">Miguel Ángel García</a> 
<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/2.5/es/">
<img alt="Creative Commons License BY-NC-SA" style="border-width:0; margin-bottom:12px;width:80px;height:15px;vertical-align:middle" src="https://i.creativecommons.org/l/by-nc-sa/2.5/es/80x15.png"></a>; Using <a href="/stories/credits/">a lot of free software</a>
      
    </footer>
</div>
</div>




<a href="http://www.addthis.com/bookmark.php?v=250" id="addthisbox" class="addthis_button" src="http://s7.addthis.com/static/btn/v2/lg-share-en.gif" width="125" height="16" border="0" alt="Share">
<script data-main="/assets/js/main" src="/assets/js/libs/require/require.min.js"></script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-9308241-3', 'auto');
  ga('send', 'pageview');

</script></a>
</body>
</html>
