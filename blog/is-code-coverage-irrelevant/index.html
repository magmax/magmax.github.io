<!DOCTYPE html>
<html prefix="
og: https://ogp.me/ns#
article: https://ogp.me/ns/article#
" lang="es">
<head>
<meta charset="utf-8">
<meta name="description" content="Mi opinión sobre la cobertura de código">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Cache-Control" content="max-age=43200">
<meta http-equiv="ETag" content="b'43516d322f35b42f7136bc9e4ca4c9c80cc1466c'">
<title>¿Es la cobertura de código irrelevante? | MagMax Blog</title>
<link href="/assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="/assets/css/code.css" rel="stylesheet" type="text/css">
<link href="/assets/css/colorbox.css" rel="stylesheet" type="text/css">
<link href="/assets/css/theme.css" rel="stylesheet" type="text/css">
<link href="/assets/css/custom.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="http://feeds.feedburner.com/magmax">
<link rel="canonical" href="http://magmax.org/blog/is-code-coverage-irrelevant/">
<link rel="icon" href="/favicon.png" sizes="128x128">
<link rel="icon" href="/favicon_330.png" sizes="330x330">
<link rel="icon" href="/favicon.ico" sizes="16x16">
<meta name="description" itemprop="description" content="Mi opinión sobre la cobertura de código">
<meta name="author" content="Miguel Ángel García">
<link rel="prev" href="/blog/cambiando-los-colores-a-jenkins/" title="Cambiando los colores a Jenkins" type="text/html">
<link rel="next" href="/blog/magmaxblog-newsletter/" title="MagMaxBlog Newsletter" type="text/html">
<meta property="og:site_name" content="MagMax Blog">
<meta property="og:title" content="¿Es la cobertura de código irrelevante?">
<meta property="og:url" content="http://magmax.org/blog/is-code-coverage-irrelevant/">
<meta property="og:description" content="Mi opinión sobre la cobertura de código">
<meta property="og:type" content="article">
<meta property="article:author" content="Miguel Ángel García">
<meta property="article:published_time" content="2015-11-17T21:41:51+00:00">
<meta property="article:updated" content="2015-11-17T21:41:51+00:00">
<meta property="article:tag" content="coverage">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@magmax_en">
<meta name="twitter:creator" content="@magmax">
<meta name="twitter:title" content="MagMax Blog">
<meta name="twitter:description" content="Mi opinión sobre la cobertura de código">
<meta name="twitter:url" content="http://magmax.org//blog/is-code-coverage-irrelevant/">
<meta name="twitter:image" content="http://magmax.org/favicon.png">
<link rel="alternate" hreflang="en" href="/en/blog/is-code-coverage-irrelevant/">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Ir al contenido principal</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation"><div class="container">
<!-- This keeps the margins nice -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://magmax.org/">

        <span id="blog-title">MagMax Blog</span>
      </a>
    </div>
<!-- /.navbar-header -->
    <div class="collapse navbar-collapse navbar-ex1-collapse">
      <ul class="nav navbar-nav">
<li>
<a href="/">Inicio</a>
                </li>
<li>
<a href="/archive.html">Archivo</a>
                </li>
<li>
<a href="/categories">Categorías</a>
                </li>
<li>
<a href="/projects">Proyectos</a>
                </li>
<li>
<a href="/news">Posts Externos</a>

        
      </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>
<form class="navbar-form navbar-left" role="search" action="http://google.com/search" method="get">
<div class="form-group">
<input type="hidden" name="sitesearch" value="magmax.org"><input type="text" name="q" class="form-control" placeholder="Search / Buscar">
</div>
</form>
</li>

        <li style="margin-left:0">
          <a href="http://feeds.feedburner.com/magmax">
            <img src="/assets/images/rss.png" style="width:22px;height:22px"></a>
        </li>

        
      </ul>
</div>
<!-- /.navbar-collapse -->
  </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
  <div class="body-content">
    <div class="row">
      <div class="page-content col-md-9">
        
        <article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="https://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="/blog/is-code-coverage-irrelevant/" class="u-url">¿Es la cobertura de código irrelevante?</a></h1>
            <div class="metadata text-muted">
              <i class="glyphicon glyphicon-calendar"></i>
              <p class="dateline">
                <time class="published dt-published updated dt-updated" datetime="2015-11-17T21:41:51+00:00" title="2015-11-17">2015-11-17</time></p>
              <p class="commentline">            <a href="/blog/is-code-coverage-irrelevant/#disqus_thread" data-disqus-identifier="cache/posts/is-code-coverage-irrelevant.html">Comments</a>

</p>
              <address class="vcard author"><a class="url fn" href="https://magmax.org">Miguel Ángel García</a></address>
            </div>
            <br><div class="metadata posttranslations translations">
              <h3 class="posttranslations-intro">También disponible en:</h3>
              <p><a href="/en/blog/is-code-coverage-irrelevant/" rel="alternate" hreflang="en"><img src="/images/en.png"> English</a></p>
            </div>
          </header><div class="e-content entry-content" itemprop="articleBody text">
            <div>
<p>Después de leer el artículo <a class="reference external" href="http://ronjeffries.com/articles/015-11/coverage/">"Is Code Coverage Irrelevant?" by Ron Jeffries</a> siento la necesidad de aceptar el reto y contar lo que realmente opino sobre la cobertura de código.</p>
<p>Desde hace algún tiempo he estado pensando en escribir este artículo... Así que creo que éste es el mejor momento.</p>
<!-- TEASER_END -->
<div class="section" id="que-significa-la-cobertura">
<h2>¿Qué significa la cobertura?</h2>
<p>Comencemos con este twit:</p>
<blockquote>
Dos proyectos, uno con el 95% de cobertura con tests, otro con 45%. Pagan por error encontrado. ¿En cuál quieres trabajar?</blockquote>
<p>Bueno... Estoy de acuerdo con la gente que dijo que depende. No tengo suficiente información para decidir.</p>
<p>Pero mi primera pregunta es diferente de la de otra gente: <strong>¿Qué tipo de cobertura?</strong></p>
<p>A menudo las empresas medien la cobertura sin pensar en ello, pero la cobertura dada por los diferentes tests significa diferentes cosas.</p>
<p>La <strong>cobertura de los tests unitarios</strong> puede indicar la <em>intención</em> de pruebas. Una cobertura alta producida por los tests unitarios significa que se ha tratado de probar concienzudamente, a pesar de que no es garantía de que se haya logrado.</p>
<p>Es difícil incrementar la cobertura de los tests unitarios. De hecho, es muy difícil tener tests unitarios realmente buenos.</p>
<p>Por otra parte, la <strong>cobertura de los tests de integración</strong> nos muestra la cantidad de código que <strong>no se ha probado</strong> de ninguna manera. Es decir: no es una medida de la bondad, sino de la duda. Se puede asegurar que el código probado funciona al menos para un caso de uso, pero el código no probado... Es un misterio. He tenido código python fallando en métodos triviales por una errata, sólo porque no había ningún test.</p>
<p>Y, finalmente, la <strong>cobertura de los tests de aceptación</strong> muestra qué métodos <em>probablemente</em> no se usan o no son útiles. Nadie se preocupó de probarlos, por lo que probablemente no haya un flujo para llegar hasta ellos y están obsoletos o bien están aportando una funcionalidad innecesaria.</p>
<p>Lamentablemente, las empresas tienden a unir todos estos porcentajes.</p>
<p>En general, el número que dice más es el <em>código no cubierto</em>, a pesar de que la gente sólo mira el código cubierto.</p>
</div>
<div class="section" id="que-ofrece-en-realidad-una-alta-cobertura">
<h2>¿Qué ofrece en realidad una alta cobertura?</h2>
<p>Bueno... Ofrece probabilidades.</p>
<p>Por ejemplo, con <a class="reference external" href="https://msdn.microsoft.com/en-us/library/ms679351%28VS.85%29.aspx">FormatMessage</a>, un método de la API de Windows, es difícil conseguir una alta cobertura: demasiados argumentos, demasiados flujos. Requeriría un montón de tests. Pero las líneas no cubiertas nos muestran dónde es más probable que falle el código.</p>
<p>Con la típica función <tt class="docutils literal">math.sqrt</tt>, que devuelve la raíz cuadrada de un número dado, es fácil obtener un 100% de cobertura sin probar nada en absoluto: puede fallar con un cero o valores negativos, o incluso funcionar sólo para un par de números. Por lo tanto, la cobertura nos dice... probablemente nada.</p>
<p>Sólo podemos hablar del código no cubierto, porque es algo desconocido.</p>
<p>Además, una alta cobertura en los tests unitarios puede significar que se tienen métodos muy pequeños, que desperdiciamos un montón de tiempo en las pruebas o bien que tenemos test unitarios muy malos (que realmente son tests de integración). Probablemente.</p>
</div>
<div class="section" id="conclusion">
<h2>Conclusión</h2>
<p>Me gusta muchísimo el artículo <a class="reference external" href="http://googletesting.blogspot.com.es/2010/07/code-coverage-goal-80-and-no-less.html">Code coverage goal: 80% and no less!</a>, de Alberto Savoia. La cobertura es algo que nos ayuda a asegurarnos de lo que hace nuestro código y de sus puntos débiles. No se puede utilizar como una medida de avance o la bondad de los desarrolladores.</p>
<p>Como siempre digo: <strong>Es sencillo conseguir un 100% de cobertura, pero lo difícil es probarlo todo</strong>.</p>
</div>
</div>
          </div>
          <br><div>
            <nav><span class="author">
                <span class="glyphicon glyphicon-user"></span> 
                <span>Publicado:Miguel Ángel García</span>
              </span>
               

              
              <span class="dateline">
                <span class="glyphicon glyphicon-calendar"></span> 
                <time class="published dt-published" datetime="2015-11-17T21:41:51+00:00" title="2015-11-17">2015-11-17</time></span>
               
              <span class="tags">
                <span class="glyphicon glyphicon-tags"></span> 
                <a class="label label-primary p-category" href="/categories/coverage/" rel="tag">coverage</a>
              </span>
                      <ul class="pager">
<li class="previous">
              <a href="/blog/cambiando-los-colores-a-jenkins/" rel="prev" title="Cambiando los colores a Jenkins">
                <span class="glyphicon glyphicon-arrow-left"></span>
                Publicación anterior
              </a>
            </li>
            <li class="next">
              <a href="/blog/magmaxblog-newsletter/" rel="next" title="MagMaxBlog Newsletter">
                Siguiente publicación
                <span class="glyphicon glyphicon-arrow-right"></span>
              </a>
            </li>
        </ul></nav>
</div>
          <section class="comments"><h2>Comentarios</h2>
                            <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="magmax",
            disqus_url="http://magmax.org/blog/is-code-coverage-irrelevant/",
        disqus_title="\u00bfEs la cobertura de c\u00f3digo irrelevante?",
        disqus_identifier="cache/posts/is-code-coverage-irrelevant.html",
        disqus_config = function () {
            this.language = "es_ES";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="//disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


          </section></article><script>var disqus_shortname="magmax";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
      <aside class="sidebar col-md-3"><div>
<section class="panel panel-default"><div class="panel-heading">
    <h3 class="panel-title">Last comments</h3>
  </div>
  <div class="panel-body">
    <div id="disqus_last_comments" class="dsq-widget">
      <script type="text/javascript" src="https://magmax.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=0&amp;avatar_size=32&amp;excerpt_length=150">
      </script>
</div>
  </div>
</section>
</div>
          <div>
<section class="panel panel-default"><div class="panel-heading">
    <h3 class="panel-title">GitHub Repos</h3>
  </div>
  <div class="panel-body">
    <ul id="gh_repos" class="list-unstyled">
<li class="loading">Status updating…</li>
    </ul>
</div>
  <div class="panel-footer">
    <a href="https://github.com/magmax">@magmax</a> on GitHub
  </div>
</section>
</div>
      </aside>
</div>

    <footer>
      Contents © 2009-2020 <a href="mailto:">Miguel Ángel García</a> 
<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/2.5/es/">
<img alt="Creative Commons License BY-NC-SA" style="border-width:0; margin-bottom:12px;width:80px;height:15px;vertical-align:middle" src="https://i.creativecommons.org/l/by-nc-sa/2.5/es/80x15.png"></a>; Using <a href="/stories/credits/">a lot of free software</a>
      
    </footer>
</div>
</div>




<script data-main="/assets/js/main" src="/assets/js/libs/require/require.min.js"></script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-9308241-3', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
