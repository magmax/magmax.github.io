<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Creando tu propia Entidad Certificadora SSL (y volcando certificados autofirmados) - El blog de MagMax</title><meta name="Description" content="El blog de un Ingeniero Informático: tutoriales, manuales, opiniones, comparativas, ..."><meta property="og:title" content="Creando tu propia Entidad Certificadora SSL (y volcando certificados autofirmados)" />
<meta property="og:description" content="Otro artículo que no es mío original, pero sinceramente, la idea que tengo de
certificados es la justa. Este artículo ma ha parecido que va al grano y que
cuenta por qué aparece el incómodo mensaje de &ldquo;certificado no confiable&rdquo; y cómo
evitarlo.
El artículo original es Creating Your Own SSL Certificate Authority (and
Dumping Self Signed Certs), y creo que el autor es Tony Bourke, mirando los
comentarios.
Espero que os parezca tan interesante como a mí, aunque el último ejemplo lo he
añadido sólo por completitud." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://magmax.org/blog/creando-tu-propia-entidad-certificadora-ssl/" /><meta property="og:image" content="https://magmax.org/icons/favicon.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2015-06-27T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-01-28T00:00:00+00:00" /><meta property="og:site_name" content="El blog de MagMax" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://magmax.org/icons/favicon.png"/>

<meta name="twitter:title" content="Creando tu propia Entidad Certificadora SSL (y volcando certificados autofirmados)"/>
<meta name="twitter:description" content="Otro artículo que no es mío original, pero sinceramente, la idea que tengo de
certificados es la justa. Este artículo ma ha parecido que va al grano y que
cuenta por qué aparece el incómodo mensaje de &ldquo;certificado no confiable&rdquo; y cómo
evitarlo.
El artículo original es Creating Your Own SSL Certificate Authority (and
Dumping Self Signed Certs), y creo que el autor es Tony Bourke, mirando los
comentarios.
Espero que os parezca tan interesante como a mí, aunque el último ejemplo lo he
añadido sólo por completitud."/>
<meta name="application-name" content="My cool site">
<meta name="apple-mobile-web-app-title" content="My cool site"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://magmax.org/blog/creando-tu-propia-entidad-certificadora-ssl/" /><link rel="prev" href="https://magmax.org/blog/colas-de-mensajes-rabbitmq/" /><link rel="next" href="https://magmax.org/blog/graficas-basadas-en-tiempo-graphite/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Creando tu propia Entidad Certificadora SSL (y volcando certificados autofirmados)",
        "inLanguage": "es",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/magmax.org\/blog\/creando-tu-propia-entidad-certificadora-ssl\/"
        },"genre": "posts","keywords": "security, ssl","wordcount":  1578 ,
        "url": "https:\/\/magmax.org\/blog\/creando-tu-propia-entidad-certificadora-ssl\/","datePublished": "2015-06-27T00:00:00+00:00","dateModified": "2021-01-28T00:00:00+00:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "Miguel Ángel"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="El blog de MagMax"><img
        class="lazyload logo"
        src="/svg/loading.min.svg"
        data-src="/icons/favicon.png"
        data-srcset="/icons/favicon.png, /icons/favicon.png 1.5x, /icons/favicon.png 2x"
        data-sizes="auto"
        alt="/icons/favicon.png"
        title="/icons/favicon.png" />MagMax Blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/"> Inicio </a><a class="menu-item" href="/posts"> Posts </a><a class="menu-item" href="/tags"> Tags </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="Cambia el tema">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a><a href="javascript:void(0);" class="menu-item language" title="Selecciona el lenguage">
                    <i class="fa fa-globe" aria-hidden="true"></i>                      
                    <select class="language-select" id="language-select-desktop" onchange="location = this.value;"><option value="/blog/creando-tu-propia-entidad-certificadora-ssl/" selected>Español</option></select>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="El blog de MagMax"><img
        class="lazyload logo"
        src="/svg/loading.min.svg"
        data-src="/icons/favicon.png"
        data-srcset="/icons/favicon.png, /icons/favicon.png 1.5x, /icons/favicon.png 2x"
        data-sizes="auto"
        alt="/icons/favicon.png"
        title="/icons/favicon.png" />MagMax Blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/" title="">Inicio</a><a class="menu-item" href="/posts" title="">Posts</a><a class="menu-item" href="/tags" title="">Tags</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Cambia el tema">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a><a href="javascript:void(0);" class="menu-item" title="Selecciona el lenguage">
                    <i class="fa fa-globe fa-fw" aria-hidden="true"></i>
                    <select class="language-select" onchange="location = this.value;"><option value="/blog/creando-tu-propia-entidad-certificadora-ssl/" selected>Español</option></select>
                </a></div>
    </div>
</header><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contenido</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Creando tu propia Entidad Certificadora SSL (y volcando certificados autofirmados)</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Miguel Ángel</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="27 Jun 2015">27 Jun 2015</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;1578 palabras&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;8 minutos&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contenido</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#openssl">OpenSSL</a></li>
    <li><a href="#crear-el-certificado-raíz-se-hace-una-vez">Crear el Certificado Raíz (se hace una vez)</a>
      <ul>
        <li><a href="#crear-la-clave-raíz">Crear la clave raíz</a></li>
        <li><a href="#el-siguiente-paso-es-autofirmar-este-certificado">El siguiente paso es autofirmar este certificado</a></li>
        <li><a href="#instalar-el-certificado-raíz-en-las-máquinas">Instalar el certificado raíz en las máquinas</a></li>
        <li><a href="#crear-un-certificado-hacer-una-vez-por-dispositivo">Crear un certificado (hacer una vez por dispositivo)</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>Otro artículo que no es mío original, pero sinceramente, la idea que tengo de
certificados es la justa. Este artículo ma ha parecido que va al grano y que
cuenta por qué aparece el incómodo mensaje de &ldquo;certificado no confiable&rdquo; y cómo
evitarlo.</p>
<p>El artículo original es <a href="https://datacenteroverlords.com/2012/03/01/creating-your-own-ssl-certificate-authority/" target="_blank" rel="noopener noreffer ">Creating Your Own SSL Certificate Authority (and
Dumping Self Signed Certs)</a>, y creo que el autor es Tony Bourke, mirando los
comentarios.</p>
<p>Espero que os parezca tan interesante como a mí, aunque el último ejemplo lo he
añadido sólo por completitud.</p>
<figure><img src="/images/ssl.jpg"
         alt="SSL"/>
</figure>

<hr>
<p>SSL (o TSL si se quiere ser totalmente correcto) nos ofrece muchas cosas (a
pesar de los defectos aparecidos recientemente):</p>
<ul>
<li>Privacidad (deja de mirar mi password)</li>
<li>Integridad (los datos no se han modificado al vuelo)</li>
<li>Confianza (eres quien dices ser)</li>
</ul>
<p>Se necesitan las tres cuando se construye algo en Amazon (¡maldito seas, Amazon
Prime!). Pero también se utiliza SSL para las interfaces de usuario web y otras
<abbr title="Graphical User Interface">GUI</abbr>

cuando se administras dispositivos bajo
nuestro control.</p>
<p>Cuando un <em>website</em> obtiene un certificado SSL, típicamente lo compra a una de
las principales entidades certificadoras como DigiCert, Symantec (compraron la
sección de registros de Verisign), o si te gusta el asesino de elefantes y
libertad, GoDaddy. Oscilan entre $12 USD a varios cientos al año, dependiendo de
la compañía y del nivel de confianza.</p>
<p>El beneficio que ofrecen estas entidades certificadoras consiste en una cadena
de confianza. Tu navegador confía en ellas, ellas confían en un <em>website</em>, por
lo que tu navegador confía en el <em>website</em> (se puede revisar su <a href="https://datacenteroverlords.com/2011/09/25/ssl-who-do-you-trust/" target="_blank" rel="noopener noreffer ">artículo sobre
confianza SSL</a>, que contiene el mejor diagrama SSL jamás imaginado).</p>
<figure><img src="/images/ssl-creation/trustchain.png"
         alt="Cadena de confianza"/>
</figure>

<p>Nuestros dispositivos, por otra parte, aquéllos que configuras y a los que sólo accede tu organización, no necesitan esa cadena de confianza sobre infrastructuras públicas. Lo primero, puede resultar realmente caro comprar un certificado SSL para cada dispositivo que se controla. Y segundo, fuiste tú quien levantó esos dispositivos, por lo que no necesitas ese nivel de confianza.</p>
<p>Por eso las interfaces de usuario web (y otras interfaces basadas en SSL) casi
siempre se protegen con certificados autofirmados. Son <a href="https://www.madboa.com/geek/openssl/#cert-self" target="_blank" rel="noopener noreffer ">realmente sencillos de
crear</a> y gratuítos. También proporcionan toda la seguiridad que implica la
encriptación, aunque no hacen nada sobre la confianza. Por esa razón, cuando te
conectas a un dispositivo con un certificado autofirmado verás algo como esto:</p>
<figure><img src="/images/ssl-creation/securitywarningie.png"
         alt="Alerta de certificado en el Internet Explorer"/>
</figure>

<p>Por lo que tienes la elección, comprar un costoso certificado SSL de una
<abbr title="Certified Authority">CA</abbr>

(Entidad Certificadora) u obtener esos errores. Bueno, hay una tercera opción, que es crear una entidad certificadora privada y venderlos completamente gratis.</p>
<h2 id="openssl">OpenSSL</h2>
<p>OpenSSL es una herramienta libre que viene en la mayoría de las instalaciones de
MacOS X, Linux, *BSD y Unix. También se puede descargar el <a href="https://www.slproweb.com/products/Win32OpenSSL.html" target="_blank" rel="noopener noreffer ">binario para
instalaciones Windows</a>. Y OpenSSL es todo lo que se necesita para crear una entidad certificadora privada.</p>
<p>El proceso para crear tu propia entidad certificadora es muy simple:</p>
<ol>
<li>Crear una clave privada.</li>
<li>Autofirmarla</li>
<li>Instalar la CA raíz en varias máquinas.</li>
</ol>
<p>Una vez hecho esto, cada dispositivo que se maneje vía HTTPS sólo necesita tener creado su propio certificado con los pasos siguientes:</p>
<ol>
<li>Crear un CSR por dispositivo.</li>
<li>Firmar el CSR con la clave CA raíz.</li>
</ol>
<p>Puedes tener configurada la CA raíz en menos de una hora. Y aquí viene cómo hacerlo.</p>
<h2 id="crear-el-certificado-raíz-se-hace-una-vez">Crear el Certificado Raíz (se hace una vez)</h2>
<p>Crear el certificado raíz es fácil y se hace rápidamente. Con estos sencillos pasos se obtiene un certificado SSL raíz que se instalará en todos los escritorios, y una clave privada que se utilizará para firmar los certificados que se instalan en varios dispositivos.</p>
<h3 id="crear-la-clave-raíz">Crear la clave raíz</h3>
<p>El primer paso es crear la
<abbr title="private root key">clave raíz privada</abbr>

que sólo requiere un paso. En el ejemplo de abajo, estoy creando una clave de
2048 bits:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">openssl genrsa -out rootCA.key <span class="m">2048</span>
</code></pre></td></tr></table>
</div>
</div><p>Los tamaños de clave estándar actuales son 1024, 2048 y, aunque mucho menos extendido, 4096. Yo he elegido 2048, que es el más utilizado hoy en día. 4096 suele ser una exageración (y las claves con longitud 4096 es 5 veces más intensa computacionalmente que 2048), y se está abandonando 1024.</p>
<p>Nota importante: Mantener esta clave privada <strong>muy privada</strong>. Ésta es la base de toda confianza para tus certificados, y si alguien obtiene una copia, podría generar certificados que acepte el navegador. También se puede crear una clave que esté protegida mediante una contraseña añadiendo <code>-des3</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">openssl genrsa -out rootCA.key <span class="m">2048</span> -des3
</code></pre></td></tr></table>
</div>
</div><p>Se pedirá que se introduzca una contraseña, y desde entonces se retará a introducir la contraseña cada vez que se use la clave. Claro, si olvidads la clave tendrás que hacer todo esto de nuevo.</p>
<h3 id="el-siguiente-paso-es-autofirmar-este-certificado">El siguiente paso es autofirmar este certificado</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">openssl req -x509 -new -nodes -key rootCA.key -days <span class="m">1024</span> -out rootCA.pem
</code></pre></td></tr></table>
</div>
</div><p>Lo que comenzará un <em>script</em> interactivo que preguntará varios bits de información. Se rellenarán como vea conveniente:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">   You are about to be asked to enter information that will be incorporated
   into your certificate request.
   What you are about to enter is what is called a Distinguished Name or a DN.
   There are quite a few fields but you can leave some blank
   For some fields there will be a default value,
   If you enter <span class="s1">&#39;.&#39;</span>, the field will be left blank.
   -----
   Country Name <span class="o">(</span><span class="m">2</span> letter code<span class="o">)</span> <span class="o">[</span>AU<span class="o">]</span>:US
   State or Province Name <span class="o">(</span>full name<span class="o">)</span> <span class="o">[</span>Some-State<span class="o">]</span>:Oregon
   Locality Name <span class="o">(</span>eg, city<span class="o">)</span> <span class="o">[]</span>:Portland
   Organization Name <span class="o">(</span>eg, company<span class="o">)</span> <span class="o">[</span>Internet Widgits Pty Ltd<span class="o">]</span>:Overlords
   Organizational Unit Name <span class="o">(</span>eg, section<span class="o">)</span> <span class="o">[]</span>:IT
   Common Name <span class="o">(</span>eg, YOUR name<span class="o">)</span> <span class="o">[]</span>:Data Center Overlords
   Email Address <span class="o">[]</span>:none@none.com
</code></pre></td></tr></table>
</div>
</div><p>Una vez hecho, se creará un certificado SSL llamado <strong>rootCA.pem</strong>, firmado por sí mismo, válido durante 1024 días, y que funcionará como tu certificado raíz. Lo más interesante de las autoridades certificadoras tradicionales es que ese certificado raíz está también autofirmado. Pero antes de comenzar una entidad certificadora propia, recuerde que el truco es mantener estos certificados en <em>cada navegador del mundo</em>.</p>
<h3 id="instalar-el-certificado-raíz-en-las-máquinas">Instalar el certificado raíz en las máquinas</h3>
<p>Para los portátiles/sobremesas/terminales, se necesitará instalar el certificado raíz en los repositorios de certificados confiables. Lo que puede ser un poco difícil.</p>
<p>Algunos navegadores utilizan el repositorio por defecto del sistema operativo. Por ejemplo, en Windows tanto IE como Chrome usan la gestión por defecto de certificados. Vaya a IE, <strong>Internet Options</strong>, a la pestaña <strong>Contenido/Content</strong>, y pulse el botón <strong>Certificados/Certificates</strong>. En Chrome vaya a <strong>Opciones/Settings</strong>, <strong>Mostrar opciones avanzadas/Show advanced settings</strong> y <strong>Manejar certificados/Manage certificates</strong>. Lo que se pretende es instalar el certificado CA raíz (no la clave) bajo la pestaña <strong>Trusted root Certificate Authorities</strong>.</p>
<figure><img src="/images/ssl-creation/setuprepo2.png"
         alt="Configuración en el IE"/>
</figure>

<p>Por el contrario, en Windows Firefox tiene su propio repositorio de certificados, por lo que si se utiliza IE o Chrome tanto como Firefox, se tendrá que instalar el certificado raíz tanto en el repositorio de Windows como en el de Firefox.</p>
<p>En Mac, Safari, Firefox y Chrome utilizan el sistema de gestión de certificados del Mac OS X, por lo que sólo se tendrá que instalar una vez. En Linux, creo que se gestiona desde cada navegador.</p>
<h3 id="crear-un-certificado-hacer-una-vez-por-dispositivo">Crear un certificado (hacer una vez por dispositivo)</h3>
<p>Será necesario seguir este proceso para cada dispositivo en el que se desee instalar un certificado confiable. Primero, al igual que con el paso del CA raíz, se necesita una clave privada (diferente de la del CA raíz).</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">openssl genrsa -out device.key <span class="m">2048</span>
</code></pre></td></tr></table>
</div>
</div><p>Una vez creada la clave, se generará la solicitud de firmado de certificado:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">openssl req -new -key device.key -out device.csr
</code></pre></td></tr></table>
</div>
</div><p>El sistema realizará varias preguntas (País, Región/Provincia, etc.). Responder según corresponda. Sin embargo, la pregunta importante es <strong>common-name</strong>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">Common Name <span class="o">(</span>eg, YOUR name<span class="o">)</span> <span class="o">[]</span>: 10.0.0.1
</code></pre></td></tr></table>
</div>
</div><p>Lo que se ve en el campo de la dirección del navegador cuando se accede a tu dispositivo <strong>debe</strong> ser lo que se ponga bajo el <strong>common name</strong>, <em>incluso si es una dirección IP</em>. Sí, incluso una dirección IP (IPv4 o IPv6) funciona como <strong>common name</strong>.</p>
<p>Si no se corresponden, incluso un certificado firmado adecuadamente no se validará adecuadamente, y se obtendrá el error de que &ldquo;No se puede verificar la autenticidad&rdquo;.</p>
<p>Una vez hecho esto, se firmará el CSR, lo que requiere la clave CA raíz:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">openssl x509 -req -in device.csr -CA root.pem -CAkey root.key -CAcreateserial -out device.crt -days <span class="m">500</span>
</code></pre></td></tr></table>
</div>
</div><p>Esto crea un certificado autofirmado llamado <code>device.crt</code> que es válido durante 500 días (se puede ajustar el número de días, claro, pero no tiene sentido que sea mayor que el del certificado raíz).</p>
<p>El paso siguiente consiste en coger la clave y el certificado e instalarlos en el dispositivo. La mayoría de los dispositivos de red que se controlan mediante HTTPS tienen algún mecanismo para instalarlo. Por ejemplo, tengo un LTM VE (virtual edition) F5 como máquina virtual en mi host ESXi 4.</p>
<p>Entro en la
<abbr title="Graphical User Interface, o Interfaz Gráfica de Usuario">GUI</abbr>

web del F5 (y debería ser la última vez que saluda el aviso) y voy
a <strong>System</strong>, <strong>Device Certificates</strong>,  y <strong>Device Certificate</strong>:</p>
<figure><img src="/images/ssl-creation/importcert.png"
         alt="Configuración del F5"/>
</figure>

<p>En el desplegable selecciono <strong>Certificate and Key</strong>, y bien puedo pegar el contenido de los ficheros con la clave y el certificado o puedo subirlos desde mi máquina:</p>
<figure><img src="/images/ssl-creation/importcertandkeyf5.png"
         alt="Importando el certificado y la clave en el F5"/>
</figure>

<p>Después, todo lo que necesito hacer es cerrar el navegador y volver a entrar en la web del GUI. Si todo fue bien, no habrá aviso y se obtendrá un precioso verde en la barra de navegación:</p>
<figure><img src="/images/ssl-creation/importedcertkeyf5.png"
         alt="Barra de navegación con el certificado correctamente firmado"/>
</figure>

<p>Y hablando de VMWare, ¿os suena, quizá, el molesto mensaje que se ve cuando se conecta contra un servidor ESXi?</p>
<p>Se puede eliminar creando una clave y certificado para el servidor ESXi e instalándola en <code>/etc/vmware/ssl/rui.crt</code> y <code>/etc/vmware/ssl/rui.key</code>.</p></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Actualizado el 28 Jan 2021</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Compartir en Twitter" data-sharer="twitter" data-url="https://magmax.org/blog/creando-tu-propia-entidad-certificadora-ssl/" data-title="Creando tu propia Entidad Certificadora SSL (y volcando certificados autofirmados)" data-hashtags="security,ssl"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Compartir en Facebook" data-sharer="facebook" data-url="https://magmax.org/blog/creando-tu-propia-entidad-certificadora-ssl/" data-hashtag="security"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Compartir en Linkedin" data-sharer="linkedin" data-url="https://magmax.org/blog/creando-tu-propia-entidad-certificadora-ssl/"><i class="fab fa-linkedin fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Compartir en WhatsApp" data-sharer="whatsapp" data-url="https://magmax.org/blog/creando-tu-propia-entidad-certificadora-ssl/" data-title="Creando tu propia Entidad Certificadora SSL (y volcando certificados autofirmados)" data-web><i class="fab fa-whatsapp fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Compartir en Tumblr" data-sharer="tumblr" data-url="https://magmax.org/blog/creando-tu-propia-entidad-certificadora-ssl/" data-title="Creando tu propia Entidad Certificadora SSL (y volcando certificados autofirmados)" data-tags="security,ssl"><i class="fab fa-tumblr fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Compartir en Reddit" data-sharer="reddit" data-url="https://magmax.org/blog/creando-tu-propia-entidad-certificadora-ssl/"><i class="fab fa-reddit fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Compartir en Instapaper" data-sharer="instapaper" data-url="https://magmax.org/blog/creando-tu-propia-entidad-certificadora-ssl/" data-title="Creando tu propia Entidad Certificadora SSL (y volcando certificados autofirmados)" data-description=""><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/instapaper.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Compartir en 微博" data-sharer="weibo" data-url="https://magmax.org/blog/creando-tu-propia-entidad-certificadora-ssl/" data-title="Creando tu propia Entidad Certificadora SSL (y volcando certificados autofirmados)"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Compartir en Blogger" data-sharer="blogger" data-url="https://magmax.org/blog/creando-tu-propia-entidad-certificadora-ssl/" data-title="Creando tu propia Entidad Certificadora SSL (y volcando certificados autofirmados)" data-description=""><i class="fab fa-blogger fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/security/">security</a>,&nbsp;<a href="/tags/ssl/">ssl</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Regresar</a></span>&nbsp;|&nbsp;<span><a href="/">Inicio</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/blog/colas-de-mensajes-rabbitmq/" class="prev" rel="prev" title="Colas de mensajes: RabbitMQ"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>Colas de mensajes: RabbitMQ</a>
            <a href="/blog/graficas-basadas-en-tiempo-graphite/" class="next" rel="next" title="Gráficas basadas en tiempo: Graphite">Gráficas basadas en tiempo: Graphite<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
<div id="comments"><div id="disqus_thread" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://disqus.com/?ref_noscript">Disqus</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Con la tecnología de <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.92.2">Hugo</a> | Tema - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2022</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Miguel Ángel</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Volver arriba">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="Ver comentarios">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css"><script type="text/javascript" src="https://magmax.disqus.com/embed.js" defer></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/copy-tex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/mhchem.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copiar al portapapeles","maxShownLines":50},"comment":{},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false}};</script><script type="text/javascript" src="/js/theme.min.js"></script><script type="text/javascript">
            window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());
            gtag('config', 'UA-9308241-3', { 'anonymize_ip': true });
        </script><script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=UA-9308241-3" async></script></body>
</html>
