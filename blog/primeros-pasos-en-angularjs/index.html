<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="es">
<head>
<meta charset="utf-8">
<meta name="description" content="Descripción de los primeros pasos en AngularJS, utilizando Bootstrap y Yeoman. Además, se pondrá a punto una barra de navegación (navbar).">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Cache-Control" content="max-age=43200">
<meta http-equiv="ETag" content="b'37f1c02acfbc640dd157ce60d3b1d0eb3ab54102'">
<title>Primeros pasos en AngularJS | MagMax Blog</title>
<link href="/assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="/assets/css/code.css" rel="stylesheet" type="text/css">
<link href="/assets/css/colorbox.css" rel="stylesheet" type="text/css">
<link href="/assets/css/theme.css" rel="stylesheet" type="text/css">
<link href="/assets/css/custom.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="http://feeds.feedburner.com/magmax">
<link rel="canonical" href="http://magmax.org/blog/primeros-pasos-en-angularjs/">
<link rel="icon" href="/favicon_330.png" sizes="330x330">
<link rel="icon" href="/favicon.ico" sizes="16x16">
<link rel="icon" href="/favicon.png" sizes="128x128">
<meta name="description" itemprop="description" content="Descripción de los primeros pasos en AngularJS, utilizando Bootstrap y Yeoman. Además, se pondrá a punto una barra de navegación (navbar).">
<meta name="author" content="Miguel Ángel García">
<link rel="prev" href="/blog/aprender-es-duro/" title="Aprender es duro (retrospectiva 2014)" type="text/html">
<link rel="next" href="/blog/lamp-con-salt/" title="LAMP con Salt" type="text/html">
<meta property="og:site_name" content="MagMax Blog">
<meta property="og:title" content="Primeros pasos en AngularJS">
<meta property="og:url" content="http://magmax.org/blog/primeros-pasos-en-angularjs/">
<meta property="og:description" content="Descripción de los primeros pasos en AngularJS, utilizando Bootstrap y Yeoman. Además, se pondrá a punto una barra de navegación (navbar).">
<meta property="og:type" content="article">
<meta property="article:author" content="Miguel Ángel García">
<meta property="article:published_time" content="2014-01-18T00:00:00+00:00">
<meta property="article:updated" content="2014-01-18T00:00:00">
<meta property="article:tag" content="angularjs">
<meta property="article:tag" content="bootstrap">
<meta property="article:tag" content="javascript">
<meta property="article:tag" content="yeoman">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@magmax">
<meta name="twitter:creator" content="@magmax">
<meta name="twitter:title" content="MagMax Blog">
<meta name="twitter:description" content="Descripción de los primeros pasos en AngularJS, utilizando Bootstrap y Yeoman. Además, se pondrá a punto una barra de navegación (navbar).">
<meta name="twitter:url" content="http://magmax.org//blog/primeros-pasos-en-angularjs/">
<meta name="twitter:image" content="http://magmax.org/favicon.png">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Ir al contenido principal</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation"><div class="container">
<!-- This keeps the margins nice -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://magmax.org/">

        <span id="blog-title">MagMax Blog</span>
      </a>
    </div>
<!-- /.navbar-header -->
    <div class="collapse navbar-collapse navbar-ex1-collapse">
      <ul class="nav navbar-nav">
<li>
<a href="/">Inicio</a>
                </li>
<li>
<a href="/archive.html">Archivo</a>
                </li>
<li>
<a href="/categories">Categorías</a>
                </li>
<li>
<a href="/projects">Proyectos</a>
                </li>
<li>
<a href="/news">Posts Externos</a>

        
      </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>
<form class="navbar-form navbar-left" role="search" action="http://google.com/search" method="get">
<div class="form-group">
<input type="hidden" name="sitesearch" value="magmax.org"><input type="text" name="q" class="form-control" placeholder="Search / Buscar">
</div>
</form>
</li>

        <li style="margin-left:0">
          <a href="http://feeds.feedburner.com/magmax">
            <img src="/assets/images/rss.png" style="width:22px;height:22px"></a>
        </li>

        
      </ul>
</div>
<!-- /.navbar-collapse -->
  </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
  <div class="body-content">
    <div class="row">
      <div class="page-content col-md-9">
        
        <article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="/blog/primeros-pasos-en-angularjs/" class="u-url">Primeros pasos en AngularJS</a></h1>
            <div class="metadata text-muted">
              <i class="glyphicon glyphicon-calendar"></i>
              <p class="dateline">
                <time class="published dt-published" datetime="2014-01-18T00:00:00+00:00" title="2014-01-18">2014-01-18</time>
                // <time class="updated dt-updated" datetime="2014-01-18T00:00:00" title="2014-01-18">2014-01-18</time></p>
              <p class="commentline">            <a href="/blog/primeros-pasos-en-angularjs/#disqus_thread" data-disqus-identifier="cache/posts/primeros-pasos-en-angularjs.html">Comments</a>

</p>
              <address class="vcard author"><a class="url fn" href="http://magmax.org">Miguel Ángel García</a></address>
            </div>
            <br></header><div class="e-content entry-content" itemprop="articleBody text">
            <div>
<p>Llevo desde el verano investigando <a href="/blog/primeros-pasos-en-angularjs/yuilibrary.com">Yui</a>... Para terminar pasándome a <a href="http://angularjs.org/">AngularJS</a>.</p>
<p>Uno de los primeros problemas que veo cuando se comienza una página web es gestionar la barra de navegación. El simple hecho de resaltar la opción de menú seleccionada es un problema... Salvo que utilices <a href="http://angularjs.org/">AngularJS</a>.</p>
<p>En este artículo veremos cómo crear un proyecto <a href="http://angularjs.org/">AngularJS</a> con <a href="/blog/primeros-pasos-en-angularjs/getbootstrap.com">Bootstrap</a> desde cero, y le añadiremos una barra de herramientas completamente funcional.</p>
<!-- TEASER_END -->

<h2 id="que-necesitamos">Qué necesitamos</h2>
<p>Lo primero que vamos a necesitar es tener intalado <a href="http://nodejs.org/">nodejs</a> y utilizar <a href="https://npmjs.org/">npm</a> para instalar <a href="http://yeoman.io/">yeoman</a>. Por si estuviera obsoleto, podemos forzar la instalación de <a href="https://github.com/yeoman/yo">yo</a>, <a href="http://bower.io/">bower</a> y <a href="http://gruntjs.com/">grunt</a>, que es en definitiva lo que vamos a utilizar; Y aprovechamos también para instalar el generador de <a href="http://angularjs.org/">AngularJS</a> para <a href="https://github.com/yeoman/yo">yo</a>:</p>
<pre class="code literal-block"># npm install -g yeoman yo bower grunt generator-angular
</pre>


<h2 id="este-articulo">Este artículo</h2>
<p>En este artículo voy a mostrar los pasos mínimos. No voy a mostrar el contenido completo de archivos, sino las modificaciones respecto a lo que ya hace <a href="http://yeoman.io/">yeoman</a>.</p>
<p>Además, irá ligado a <a href="https://github.com/magmax/angular-example">un proyecto en github</a>, donde podéis verlo completo o paso a paso.</p>
<h3 id="inicializacion">Inicialización</h3>
<p>Nada más sencillo:</p>
<pre class="code literal-block"><span class="nv">$ </span>mkdir example
<span class="nv">$ </span><span class="nb">cd </span>example
<span class="nv">$ </span>yo angular
</pre>


<p>Y os irá realizando una serie de preguntas. Yo he elegido no utilizar <a href="http://compass-style.org/">compass</a> pero sí <a href="/blog/primeros-pasos-en-angularjs/getbootstrap.com">Bootstrap</a> y todos los módulos de <a href="http://angularjs.org/">AngularJS</a>.</p>
<p>Con esto ya tendremos la web completamente montada. Tenemos incluso un servidor que podemos iniciar fácilmente (se nos abrirá un navegador):</p>
<pre class="code literal-block"><span class="nv">$ </span>grunt serve
</pre>


<p>Sin embargo, podréis comprobar que la barra de estado no funciona, ya que siempre nos redirecciona a la página de inicio. Dejad el servidor corriendo en segundo plano; nos actualizará el navegador con cada cambio.</p>
<h3 id="creando-vistas">Creando vistas</h3>
<p>Vamos a comenzar a crear las vistas. Necesitamos la de 'about' y la de 'contact':</p>
<pre class="code literal-block"><span class="nv">$ </span>yo angular:view about
<span class="nv">$ </span>yo angular:view contact
</pre>


<p>Vamos a darles uso: abrimos el archivo <code>app/scripts/app.js</code>, que contiene las rutas, y lo dejamos similar a éste:</p>
<pre class="code literal-block"><span class="nx">$routeProvider</span>
  <span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">'views/main.html'</span><span class="p">,</span>
    <span class="nx">controller</span><span class="o">:</span> <span class="s1">'MainCtrl'</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="s1">'/about'</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">'views/about.html'</span><span class="p">,</span>
    <span class="nx">controller</span><span class="o">:</span> <span class="s1">'MainCtrl'</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="s1">'/contact'</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">'views/contact.html'</span><span class="p">,</span>
    <span class="nx">controller</span><span class="o">:</span> <span class="s1">'MainCtrl'</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nx">otherwise</span><span class="p">({</span>
    <span class="nx">redirectTo</span><span class="o">:</span> <span class="s1">'/'</span>
  <span class="p">});</span>
</pre>


<p>Es decir, añadimos las nuevas rutas.</p>
<p>Ahora movemos un trozo de código que hay en <code>app/views/main.html</code> a <code>app/index.html</code>, que es el correspondiente a la barra de navegación:</p>
<pre class="code literal-block"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"header"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"nav nav-pills pull-right"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"active"</span><span class="nt">&gt;&lt;a</span> <span class="na">ng-href=</span><span class="s">"#"</span><span class="nt">&gt;</span>Home<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">ng-href=</span><span class="s">"#/about"</span><span class="nt">&gt;</span>About<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">ng-href=</span><span class="s">"#/contact"</span><span class="nt">&gt;</span>Contact<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
  <span class="nt">&lt;/ul&gt;</span>
  <span class="nt">&lt;h3</span> <span class="na">class=</span><span class="s">"text-muted"</span><span class="nt">&gt;</span>example<span class="nt">&lt;/h3&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre>


<p>Veréis que he aprovechado para añadir los enlaces nuevos. Colocadlo justo después de la etiqueta <code>&lt;body&gt;</code>.</p>
<p>Con esto ya nos funcionará la barra de navegación, aunque aún no actualizará el estado actual.</p>
<h3 id="nuestro-primer-controlador">Nuestro primer controlador</h3>
<p>Lo primero que necesitamos es un esqueleto:</p>
<pre class="code literal-block"><span class="nv">$ </span>yo angular:controller navbar
</pre>


<p>Eso nos habrá creado el archivo <code>app/scripts/controllers/navbar.js</code> que tenemos que editar y dejarlo tal que así:</p>
<pre class="code literal-block">    <span class="s1">'use strict'</span><span class="p">;</span>

    <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'exampleApp'</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'NavbarCtrl'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">$location</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">$scope</span><span class="p">.</span><span class="nx">isActive</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">viewLocation</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="p">(</span><span class="nx">viewLocation</span> <span class="o">===</span> <span class="nx">$location</span><span class="p">.</span><span class="nx">path</span><span class="p">());</span>
        <span class="p">};</span>
      <span class="p">});</span>
</pre>


<p>Además, habrá modificado el <code>app/index.html</code>, para añadir el nuevo controlador, lo que nos viene de perlas. De todas maneras, tenemos que realizar un par de pequeñas modificaciones en el código de la barra de navegación, para asociarla al controlador y para usar la función <code>isActive()</code>:</p>
<pre class="code literal-block"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"header"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"nav nav-pills pull-right"</span> <span class="na">ng-controller=</span><span class="s">"NavbarCtrl"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;li</span> <span class="na">ng-class=</span><span class="s">"{active: isActive('/') }"</span><span class="nt">&gt;&lt;a</span> <span class="na">ng-href=</span><span class="s">"#"</span><span class="nt">&gt;</span>Home<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;li</span> <span class="na">ng-class=</span><span class="s">"{active: isActive('/about') }"</span><span class="nt">&gt;&lt;a</span> <span class="na">ng-href=</span><span class="s">"#/about"</span><span class="nt">&gt;</span>About<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;li</span> <span class="na">ng-class=</span><span class="s">"{active: isActive('/contact') }"</span><span class="nt">&gt;&lt;a</span> <span class="na">ng-href=</span><span class="s">"#/contact"</span><span class="nt">&gt;</span>Contact<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
  <span class="nt">&lt;/ul&gt;</span>
  <span class="nt">&lt;h3</span> <span class="na">class=</span><span class="s">"text-muted"</span><span class="nt">&gt;</span>example<span class="nt">&lt;/h3&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre>


<p>Y nuestra barra de navegación es funcional.</p>
<h3 id="tests-unitarios">Tests unitarios</h3>
<p>Hay algo que es imprescindible: Hacer tests. Por ello vamos a ver cómo lanzar los tests unitarios.</p>
<p>Lo primero será asegurarnos de tener la variable <code>CHROME_BIN</code> o exportarla:</p>
<pre class="code literal-block"><span class="nv">$ </span><span class="nb">export </span><span class="nv">CHROME_BIN</span><span class="o">=</span><span class="k">$(</span>which chromium<span class="k">)</span>
</pre>


<p>A continuación modificaremos el archivo de configuración de los tests unitarios. En concreto, queremos que se lancen en el puerto 9876 y que se lancen automáticamente. Por ello modificamos el archivo <code>karma.conf.js</code>:</p>
<pre class="code literal-block">// [...]
port: 9876,
autoWatch: true,
// [...]
</pre>


<p>Y ahora lo lanzamos:</p>
<pre class="code literal-block"><span class="nv">$ </span>karma karma.conf.js
</pre>


<p>Veremos que hay un test fallando y que se queda en espera. Es como debe ser. Ahora modificamos los tests, que están en el archivo <code>test/spec/controllers/navbar.js</code>:</p>
<pre class="code literal-block"><span class="s1">'use strict'</span><span class="p">;</span>

<span class="nx">describe</span><span class="p">(</span><span class="s1">'Controller: NavbarCtrl'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

  <span class="c1">// load the controller's module</span>
  <span class="nx">beforeEach</span><span class="p">(</span><span class="nx">module</span><span class="p">(</span><span class="s1">'exampleApp'</span><span class="p">));</span>

  <span class="kd">var</span> <span class="nx">NavbarCtrl</span><span class="p">,</span>
    <span class="nx">scope</span><span class="p">,</span>
    <span class="nx">mocklocation</span><span class="p">;</span>

  <span class="c1">// Initialize the controller and a mock scope</span>
  <span class="nx">beforeEach</span><span class="p">(</span><span class="nx">inject</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">$controller</span><span class="p">,</span> <span class="nx">$rootScope</span><span class="p">,</span> <span class="nx">_$location_</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">mocklocation</span> <span class="o">=</span> <span class="nx">_$location_</span><span class="p">;</span>
    <span class="nx">scope</span> <span class="o">=</span> <span class="nx">$rootScope</span><span class="p">.</span><span class="nx">$new</span><span class="p">();</span>
    <span class="nx">NavbarCtrl</span> <span class="o">=</span> <span class="nx">$controller</span><span class="p">(</span><span class="s1">'NavbarCtrl'</span><span class="p">,</span> <span class="p">{</span>
      <span class="nx">$scope</span><span class="o">:</span> <span class="nx">scope</span><span class="p">,</span>
      <span class="nx">$location</span><span class="o">:</span> <span class="nx">mocklocation</span>
    <span class="p">});</span>
  <span class="p">}));</span>

  <span class="nx">it</span><span class="p">(</span><span class="s1">'should return True when the location matches'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">mocklocation</span><span class="p">.</span><span class="nx">path</span><span class="p">(</span><span class="s1">'/'</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">isActive</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">it</span><span class="p">(</span><span class="s1">'should return False when the location does not matches'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">mocklocation</span><span class="p">.</span><span class="nx">path</span><span class="p">(</span><span class="s1">'/whatever'</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">isActive</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">it</span><span class="p">(</span><span class="s1">'should return True when the location matches in a local path'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">mocklocation</span><span class="p">.</span><span class="nx">path</span><span class="p">(</span><span class="s1">'/#/'</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">isActive</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">it</span><span class="p">(</span><span class="s1">'should return False when the location does not matches'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">mocklocation</span><span class="p">.</span><span class="nx">path</span><span class="p">(</span><span class="s1">'/#/whatever'</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">isActive</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre>


<p>Como veis, hemos mockeado <code>$location</code> y hay 4 tests. Puede que los dos últimos os resulten extraños, por lo que los voy a explicar un poco.</p>
<p>Ya hemos visto que cuando pulsamos sobre el botón "contact" se accede a la ruta "/contact.html". Pero... ¿Qué ocurre si accedemos a "/contact.html" directamente, en un navegador diferente? Pues posiblemente nos dé un error de archivo no encontrado. Eso es así porque, realmente, no existe. Por eso se usa el truco "/#/contact.html", que le está diciendo al navegador que la ruta es "/", y así obtiene nuestro "index.html". Será <a href="http://angularjs.org/">AngularJS</a> quien parsee la ruta completa y nos permita tratarla como si siempre hubiera sido "/contact.html".</p>
<p>Es importante probar que va a funcionar, con el fin de evitar disgustos :D</p>
<p>Veréis que cada vez que se modifica el archivo de tests se lanzan los tests automáticamente. ¡Precioso!</p>
<h3 id="tests-end-to-end">Tests end to end</h3>
<p>Pero claro, no estamos comprobando que cuando se pulsan los botones se cargan las páginas correctamente... Eso son tests de aceptación, o <strong>end to end</strong> (abreviado <strong>e2e</strong>). Para ellas utilizaremos el archivo <code>karma-e2e.conf.js</code>, que tendremos que modificar ligeramente:</p>
<pre class="code literal-block"><span class="n">port</span><span class="o">:</span> <span class="mi">9877</span><span class="o">,</span>
<span class="n">singleRun</span><span class="o">:</span> <span class="kc">false</span><span class="o">,</span>
<span class="n">proxies</span><span class="o">:</span> <span class="o">{</span>
    <span class="s1">'/'</span><span class="o">:</span> <span class="s1">'http://localhost:9000/'</span>
<span class="o">},</span>
<span class="n">urlRoot</span><span class="o">:</span> <span class="s1">'_karma_'</span>
</pre>


<p>Para estos tests hará falta tener un servidor corriendo. Para lanzarlo necesitamos que esté corriendo el servidor:</p>
<pre class="code literal-block"><span class="nv">$ </span>grunt start
</pre>


<p>Lanzar el servidor de <strong>karma</strong>:</p>
<pre class="code literal-block"><span class="nv">$ </span>karma start karma-e2e.conf.js
</pre>


<p>Eso nos abrirá el navegador. Lo dejamos por ahí funcionando y nos olvidamos de él. Lanzamos los tests en otra terminal:</p>
<pre class="code literal-block"><span class="nv">$ </span>karma run karma-e2e.conf.js
</pre>


<p>Y vemos cómo falla. Eso es porque no hay tests.</p>
<p>Creamos el archivo <code>test/e2e/navbar.js</code> por este contenido:</p>
<pre class="code literal-block"><span class="nx">describe</span><span class="p">(</span><span class="s1">'Navigation Bar'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">it</span><span class="p">(</span><span class="s1">'selects "Home" if location is /'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">browser</span><span class="p">().</span><span class="nx">navigateTo</span><span class="p">(</span><span class="s1">'/'</span><span class="p">);</span>

        <span class="nx">expect</span><span class="p">(</span><span class="nx">browser</span><span class="p">().</span><span class="nx">location</span><span class="p">().</span><span class="nx">path</span><span class="p">()).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">'/'</span><span class="p">);</span>
        <span class="nx">expect</span><span class="p">(</span><span class="nx">element</span><span class="p">(</span><span class="s1">'.nav li:nth-child(1)'</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'class'</span><span class="p">)).</span><span class="nx">toContain</span><span class="p">(</span><span class="s1">'active'</span><span class="p">);</span>
        <span class="nx">expect</span><span class="p">(</span><span class="nx">element</span><span class="p">(</span><span class="s1">'.nav li:nth-child(2)'</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'class'</span><span class="p">)).</span><span class="nx">not</span><span class="p">().</span><span class="nx">toBeDefined</span><span class="p">();</span>
        <span class="nx">expect</span><span class="p">(</span><span class="nx">element</span><span class="p">(</span><span class="s1">'.nav li:nth-child(3)'</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'class'</span><span class="p">)).</span><span class="nx">not</span><span class="p">().</span><span class="nx">toBeDefined</span><span class="p">();</span>
    <span class="p">});</span>

    <span class="nx">it</span><span class="p">(</span><span class="s1">'selects "About" if location is /#/about'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">browser</span><span class="p">().</span><span class="nx">navigateTo</span><span class="p">(</span><span class="s1">'/#/about'</span><span class="p">);</span>

        <span class="nx">expect</span><span class="p">(</span><span class="nx">browser</span><span class="p">().</span><span class="nx">location</span><span class="p">().</span><span class="nx">path</span><span class="p">()).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">'/about'</span><span class="p">);</span>
        <span class="nx">expect</span><span class="p">(</span><span class="nx">element</span><span class="p">(</span><span class="s1">'.nav li:nth-child(1)'</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'class'</span><span class="p">)).</span><span class="nx">not</span><span class="p">().</span><span class="nx">toBeDefined</span><span class="p">();;</span>
        <span class="nx">expect</span><span class="p">(</span><span class="nx">element</span><span class="p">(</span><span class="s1">'.nav li:nth-child(2)'</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'class'</span><span class="p">)).</span><span class="nx">toContain</span><span class="p">(</span><span class="s1">'active'</span><span class="p">);</span>
        <span class="nx">expect</span><span class="p">(</span><span class="nx">element</span><span class="p">(</span><span class="s1">'.nav li:nth-child(3)'</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'class'</span><span class="p">)).</span><span class="nx">not</span><span class="p">().</span><span class="nx">toBeDefined</span><span class="p">();;</span>
    <span class="p">});</span>

    <span class="nx">it</span><span class="p">(</span><span class="s1">'selects "Contact" if location is /#/contact'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">browser</span><span class="p">().</span><span class="nx">navigateTo</span><span class="p">(</span><span class="s1">'/#/contact'</span><span class="p">);</span>

        <span class="nx">expect</span><span class="p">(</span><span class="nx">browser</span><span class="p">().</span><span class="nx">location</span><span class="p">().</span><span class="nx">path</span><span class="p">()).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">'/contact'</span><span class="p">);</span>
        <span class="nx">expect</span><span class="p">(</span><span class="nx">element</span><span class="p">(</span><span class="s1">'.nav li:nth-child(1)'</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'class'</span><span class="p">)).</span><span class="nx">not</span><span class="p">().</span><span class="nx">toBeDefined</span><span class="p">();</span>
        <span class="nx">expect</span><span class="p">(</span><span class="nx">element</span><span class="p">(</span><span class="s1">'.nav li:nth-child(2)'</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'class'</span><span class="p">)).</span><span class="nx">not</span><span class="p">().</span><span class="nx">toBeDefined</span><span class="p">();</span>
        <span class="nx">expect</span><span class="p">(</span><span class="nx">element</span><span class="p">(</span><span class="s1">'.nav li:nth-child(3)'</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'class'</span><span class="p">)).</span><span class="nx">toContain</span><span class="p">(</span><span class="s1">'active'</span><span class="p">);</span>
    <span class="p">});</span>

<span class="p">});</span>
</pre>


<h3 id="pasos-siguientes">Pasos siguientes</h3>
<p>Lo siguiente sería crear dos barras de navegación diferentes o bien compartidas, de manera que se muestren dependiendo de si el usuario hizo <em>login</em> o no... pero eso será otra historia.</p>
<p>Además, creo que el escenario e2e se puede simplificar... Aquí agradecería la ayuda de alguien que sepa más que yo, lo que no es difícil. Por favor, si alguien cree que puede mejorar algún punto... ¡Que haga un <em>pull-request</em>!</p>
<h2 id="mas-informacion">Más información</h2>
<p>La verdad es que el código lo he sacado de <a href="http://stackoverflow.com/questions/16199418/how-do-i-implement-the-bootstrap-navbar-active-class-with-angular-js">Stackoverflow</a>. Lo que añado es toda la creación de la web utilizando <a href="https://github.com/yeoman/yo">yo</a> y mostrar el ejemplo completo.</p>
<p>Si queréis aprender <a href="http://angularjs.org/">AngularJS</a> de verdad, os invito a seguir el <a href="http://docs.angularjs.org/tutorial">tutorial</a>.</p>
<p>También recomiendo <a href="http://www.amazon.es/Angularjs-Brad-Green/dp/1449344852/ref=sr_1_1/276-6524712-7037726?ie=UTF8&amp;qid=1390042651&amp;sr=8-1&amp;keywords=angular+js">el libro "AngularJS"</a>, de <a href="https://twitter.com/bradlygreen">Bradly Green (@bradlygreen)</a> y <a href="https://twitter.com/omniscient1">Shyam Seshadri (@omniscient1)</a>, y <a href="https://github.com/shyamseshadri/angularjs-book">el repositorio del libro</a>, que son muy recomendables. Es en este libro donde me encontré con <a href="http://yeoman.io/">yeoman</a>.</p>
</div>
          </div>
          <br><div>
            <nav><span class="author">
                <span class="glyphicon glyphicon-user"></span> 
                <span>Publicado:Miguel Ángel García</span>
              </span>
               

              
              <span class="dateline">
                <span class="glyphicon glyphicon-calendar"></span> 
                <time class="published dt-published" datetime="2014-01-18T00:00:00+00:00" title="2014-01-18">2014-01-18</time></span>
               
              <span class="tags">
                <span class="glyphicon glyphicon-tags"></span> 
                <a class="label label-primary p-category" href="/categories/angularjs/" rel="tag">angularjs</a>
                <a class="label label-primary p-category" href="/categories/bootstrap/" rel="tag">bootstrap</a>
                <a class="label label-primary p-category" href="/categories/javascript/" rel="tag">javascript</a>
                <a class="label label-primary p-category" href="/categories/yeoman/" rel="tag">yeoman</a>
              </span>
                      <ul class="pager">
<li class="previous">
              <a href="/blog/aprender-es-duro/" rel="prev" title="Aprender es duro (retrospectiva 2014)">
                <span class="glyphicon glyphicon-arrow-left"></span>
                Publicación anterior
              </a>
            </li>
            <li class="next">
              <a href="/blog/lamp-con-salt/" rel="next" title="LAMP con Salt">
                Siguiente publicación
                <span class="glyphicon glyphicon-arrow-right"></span>
              </a>
            </li>
        </ul>
<div style="margin-left: auto; margin-right: auto;">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:inline-block;width:728px;height:90px" data-ad-client="ca-pub-1887364423515042" data-ad-slot="4236077264"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>
            </nav>
</div>
          <section class="comments"><h2>Comentarios</h2>
                            <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="magmax",
            disqus_url="http://magmax.org/blog/primeros-pasos-en-angularjs/",
        disqus_title="Primeros pasos en AngularJS",
        disqus_identifier="cache/posts/primeros-pasos-en-angularjs.html",
        disqus_config = function () {
            this.language = "es_ES";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="//disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


          </section></article><script>var disqus_shortname="magmax";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
      <aside class="sidebar col-md-3"><div>
<section class="panel panel-default"><div class="panel-body">
    <div id="recentcomments" class="dsq-widget">
      <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:inline-block;width:180px;height:150px" data-ad-client="ca-pub-1887364423515042" data-ad-slot="7479875641"></ins>
      <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
</div>
  </div>
</section>
</div>
          <div>
<section class="panel panel-default"><div class="panel-heading">
    <h3 class="panel-title">Last comments</h3>
  </div>
  <div class="panel-body">
    <div id="disqus_last_comments" class="dsq-widget">
      <script type="text/javascript" src="http://magmax.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=0&amp;avatar_size=32&amp;excerpt_length=150">
      </script>
</div>
  </div>
</section>
</div>
          <div>
<section class="panel panel-default"><div class="panel-heading">
    <h3 class="panel-title">GitHub Repos</h3>
  </div>
  <div class="panel-body">
    <ul id="gh_repos" class="list-unstyled">
<li class="loading">Status updating…</li>
    </ul>
</div>
  <div class="panel-footer">
    <a href="https://github.com/magmax">@magmax</a> on GitHub
  </div>
</section>
</div>
      </aside>
</div>

    <footer>
      Contents © 2009-2018 <a href="mailto:">Miguel Ángel García</a> 
<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/2.5/es/">
<img alt="Creative Commons License BY-NC-SA" style="border-width:0; margin-bottom:12px;width:80px;height:15px;vertical-align:middle" src="https://i.creativecommons.org/l/by-nc-sa/2.5/es/80x15.png"></a>; Using <a href="/stories/credits/">a lot of free software</a>
      
    </footer>
</div>
</div>




<a href="http://www.addthis.com/bookmark.php?v=250" id="addthisbox" class="addthis_button" src="http://s7.addthis.com/static/btn/v2/lg-share-en.gif" width="125" height="16" border="0" alt="Share">
<script data-main="/assets/js/main" src="/assets/js/libs/require/require.min.js"></script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-9308241-3', 'auto');
  ga('send', 'pageview');

</script></a>
</body>
</html>
