<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="es">
<head>
<meta charset="utf-8">
<meta name="description" content="Traducción del artículo " in search of five calculating availability complex systems>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Cache-Control" content="max-age=43200">
<meta http-equiv="ETag" content="b'2c87e47779fbd58d747b6211986592a22beba19d'">
<title>En busca de los cinco 9s: Calculando la disponibilidad de sistemas complejos | MagMax Blog</title>
<link href="/assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="/assets/css/code.css" rel="stylesheet" type="text/css">
<link href="/assets/css/colorbox.css" rel="stylesheet" type="text/css">
<link href="/assets/css/theme.css" rel="stylesheet" type="text/css">
<link href="/assets/css/custom.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="http://feeds.feedburner.com/magmax">
<link rel="canonical" href="http://magmax.org/blog/en-busca-de-los-cinco-9s/">
<link rel="icon" href="/favicon_330.png" sizes="330x330">
<link rel="icon" href="/favicon.png" sizes="128x128">
<link rel="icon" href="/favicon.ico" sizes="16x16">
<meta name="description" itemprop="description" content="Traducción del artículo " in search of five calculating availability complex systems>
<meta name="author" content="Miguel Ángel García">
<link rel="prev" href="/blog/peewee-un-orm-para-python/" title="Peewee, un ORM para Python" type="text/html">
<link rel="next" href="/blog/monitorizacion-y-alertado/" title="Monitorización y alertado" type="text/html">
<meta property="og:site_name" content="MagMax Blog">
<meta property="og:title" content="En busca de los cinco 9s: Calculando la disponibilidad de sistemas com">
<meta property="og:url" content="http://magmax.org/blog/en-busca-de-los-cinco-9s/">
<meta property="og:description" content='Traducción del artículo "In search of five 9s: Calculating Availability of Complex Systems"'>
<meta property="og:type" content="article">
<meta property="article:author" content="Miguel Ángel García">
<meta property="article:published_time" content="2015-06-13T00:00:00+00:00">
<meta property="article:updated" content="2015-06-13T00:00:00+00:00">
<meta property="article:tag" content="devops">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@magmax_en">
<meta name="twitter:creator" content="@magmax">
<meta name="twitter:title" content="MagMax Blog">
<meta name="twitter:description" content="Traducción del artículo 'In search of five 9s: Calculating Availability of Complex Systems'">
<meta name="twitter:url" content="http://magmax.org//blog/en-busca-de-los-cinco-9s/">
<meta name="twitter:image" content="http://magmax.org/favicon.png">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Ir al contenido principal</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation"><div class="container">
<!-- This keeps the margins nice -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://magmax.org/">

        <span id="blog-title">MagMax Blog</span>
      </a>
    </div>
<!-- /.navbar-header -->
    <div class="collapse navbar-collapse navbar-ex1-collapse">
      <ul class="nav navbar-nav">
<li>
<a href="/">Inicio</a>
                </li>
<li>
<a href="/archive.html">Archivo</a>
                </li>
<li>
<a href="/categories">Categorías</a>
                </li>
<li>
<a href="/projects">Proyectos</a>
                </li>
<li>
<a href="/news">Posts Externos</a>

        
      </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>
<form class="navbar-form navbar-left" role="search" action="http://google.com/search" method="get">
<div class="form-group">
<input type="hidden" name="sitesearch" value="magmax.org"><input type="text" name="q" class="form-control" placeholder="Search / Buscar">
</div>
</form>
</li>

        <li style="margin-left:0">
          <a href="http://feeds.feedburner.com/magmax">
            <img src="/assets/images/rss.png" style="width:22px;height:22px"></a>
        </li>

        
      </ul>
</div>
<!-- /.navbar-collapse -->
  </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
  <div class="body-content">
    <div class="row">
      <div class="page-content col-md-9">
        
        <article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="/blog/en-busca-de-los-cinco-9s/" class="u-url">En busca de los cinco 9s: Calculando la disponibilidad de sistemas complejos</a></h1>
            <div class="metadata text-muted">
              <i class="glyphicon glyphicon-calendar"></i>
              <p class="dateline">
                <time class="published dt-published updated dt-updated" datetime="2015-06-13T00:00:00+00:00" title="2015-06-13">2015-06-13</time></p>
              <p class="commentline">            <a href="/blog/en-busca-de-los-cinco-9s/#disqus_thread" data-disqus-identifier="cache/posts/en-busca-de-los-cinco-9s.html">Comments</a>

</p>
              <address class="vcard author"><a class="url fn" href="http://magmax.org">Miguel Ángel García</a></address>
            </div>
            <br></header><div class="e-content entry-content" itemprop="articleBody text">
            <div>
<p>Este artículo es la traducción del artículo <a class="reference external" href="http://www.edgeblog.net/2007/in-search-of-five-9s/">In search of five 9s: Calculating Availability of Complex Systems</a>, publicado por un tal Bill el 29 de Octubre de 2007. Dado que el artículo original tiene demasiado texto, me he visto obligado a modificar la maquetación y añadir títulos.</p>
<p>Puede parecer un poco largo, pero es realmente interesante. Aunque tiene muchas fórmulas es sencillo de entender, gracias a los ejemplos.</p>
<p>Y he elegido este artículo porque con el <strong>cloud</strong> que está tan de moda resulta sencillo y relativamente barato redundar máquinas.</p>
<p>Además, éste es el tipo de artículos que realmente me hacen sentir como Ingeniero.</p>
<hr class="docutils">
<!-- TEASER_END --><div class="section" id="disponibilidad-y-sla">
<h2>Disponibilidad y SLA</h2>
<p>He pasado los últimos días tratando de desarrollar un modelo matemático simple para predecir la disponibilidad esperada en sistemas complejos. En IT se nos suele pedir que desarrollemos y cumplamos acuerdos de nivel de servicio (<abbr title="Acuerdos de Nivel de Servicio o Server Level Agreement">SLAs</abbr>). Si no se analizan los puntos de fallo de un sistema, y después se calcula la disponibilidad del sistema, el <abbr title="Acuerdo de Nivel de Servicio o Server Level Agreement">SLA</abbr> es defectuoso desde el principio. Para complicar aún más las cosas, diferentes personas tienen diferentes definiciones de disponibilidad. Por ejemplo: ¿cuenta un <em>downtime</em> planificado de mantenimiento en sus cálculos de disponibilidad del sistema?</p>
<p>Definiciones de Disponibilidad Comunes:</p>
<ol class="arabic simple">
<li>Disponibilidad = <abbr title="Media del tiempo entre fallos">MTBF</abbr>/(<abbr title="Media del tiempo de recuperación">MTTR</abbr> + <abbr title="Media del tiempo entre fallos">MTBF</abbr>). Ésta es una definición clásica de disponibilidad y es frecuentemente usada por fabricantes de hardware cuando publican una métrica de disponibilidad para un determinado servidor.</li>
<li>Disponibilidad = (Uptime + Scheduled Maintenance)/(Unscheduled Downtime + Uptime + Scheduled Maintenance). Consiste en una métrica centrada en IT donde el negocio puede permitirse <em>downtimes</em> durante horas. Este modelo funciona para determinados sistemas, como un servidor de ficheros que no se necesita durante la noche, pero no funciona bien para servicios web, a pesar de que muchas compañías aún lo usan para sus <abbr title="Acuerdos de Nivel de Servicio o Server Level Agreement">SLAs</abbr>.</li>
<li>Disponibilidad = Uptime/(Uptime + Downtime). Es la métrica que mejor aplica para servicios que se necesitan 24x7, como sitios de comercio electrónico.</li>
</ol>
<p>Normalmente se expresa la disponibilidad como un porcentaje. En ocasiones, la gente hace referencia a los <em>"cuatro nueves"</em> (99.99%) o los <em>"cinco nueves"</em> (99.999%). Para simplificar las cosas, en la siguiente tabla se muestran los minutos de <em>downtime</em> al año permitidos para un nivel determinado:</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%">
<col width="41%">
<col width="34%">
</colgroup>
<thead valign="bottom"><tr>
<th class="head">Disponiblidad</th>
<th class="head">Min Downtime/Año</th>
<th class="head">HorasDowntime/Año</th>
</tr></thead>
<tbody valign="top">
<tr>
<td>95.000%</td>
<td>26,298</td>
<td>438</td>
</tr>
<tr>
<td>98.000%</td>
<td>10,519</td>
<td>175</td>
</tr>
<tr>
<td>98.500%</td>
<td>7,889</td>
<td>131</td>
</tr>
<tr>
<td>99.000%</td>
<td>5,260</td>
<td>88</td>
</tr>
<tr>
<td>99.500%</td>
<td>2,630</td>
<td>44</td>
</tr>
<tr>
<td>99.900%</td>
<td>526</td>
<td>8.8</td>
</tr>
<tr>
<td>99.990%</td>
<td>52.6</td>
<td>.88</td>
</tr>
<tr>
<td>99.999%</td>
<td>5.26</td>
<td>.088</td>
</tr>
</tbody>
</table>
<p>Basándose en la tabla anterior, se puede comprobar que hay una gran diferencia entre un <abbr title="Acuerdo de Nivel de Servicio o Server Level Agreement">SLA</abbr> que especifique  un 99% de disponibilidad (88 horas de <em>downtime</em> al año) y 99.9% de disponibilidad (8.8 horas de <em>downtime</em> al año). Pero ¿cómo se puede estar seguro de cuál es el <em>downtime</em> esperado de un sistema? En su form más simplista, la disponibilidad esperada de un sistema es la disponibilidad esperada de cada una de sus partes multiplicadas entre sí. De esta manera, si el sistema tiene dos servidores, y cada servidor tiene una disponibilidad esperada del 99%, entonces la disponibilidad del sistema sería \(99\% * 99\% = 98.01\%\). Nota: He usado la expresión "disponibilidad esperada". Estamos calculando el futuro esperado de un sistema sobre un periodo de tiempo, no la disponibilidad histórica. Para el resto de este artículo, eliminaré el término "esperada" por brevedad, pero está siempre implícito.</p>
</div>
<div class="section" id="sistemas-compuestos">
<h2>Sistemas compuestos</h2>
<p>El modelo simplista de más arriba es útil para mostrar que el <em>downtime</em> es acumulativo. En otras palabras, si se espera que un componente esté fuera de línea 88 horas/año, y un fallo de cualquier componente es un fallo del sistema, entonces el sistema tiene un <em>downtime</em> esperado de 174 horas. ¿Por qué no 176 horas? Bueno, ocasionalmente ambos componentes estarán caídos al mismo tiempo.</p>
<p>Los sistemas del mundo real nunca son tan simples. Típicamente el sistema estará compuesto de múltiples componentes, con redundancia, y cada uno con distinto nivel de disponibilidad por componente. Modelar esto requiere fórmulas algo más complicadas, pero en cuanto se tengan claros los conceptos, los nuevos cálculos pueden hacerse rápidamente en una hoja Excel. Antes de continuar necesitamos algo de notación básica para simplificar nuestras fórmulas:</p>
<ul class="simple">
<li>Disponibilidad del componente 1: \(Ac_1\)</li>
<li>Disponibilidad del componente 2: \(Ac_2\)</li>
<li>Disponibilidad del componente 3: \(Ac_3\)</li>
<li>Disponibilidad del componente N: \(Ac_N\)</li>
<li>Sistema de disponibilidad: \(As\)</li>
</ul>
<p>Y dicho esto, estamos listos para nuestra primera fórmula. Cuando un sistema está constituído por N componentes que son puntos únicos de fallo, la disponibilidad del sistema se puede calcular como:</p>
<div class="math" id="ecuacion-1">
\begin{equation*}
Ecuación \#1: As = Ac_1 * Ac_2 * Ac_3 * ... Ac_n
\end{equation*}
</div>
<div class="section" id="ejemplo">
<h3>Ejemplo</h3>
<p>Consideremos un sitio de comercio electrónico 24x7 con muchos puntos únicos de fallo. Se podría modelar el sistema con los 8 componentes siguientes:</p>
<table border="1" class="docutils">
<colgroup>
<col width="52%">
<col width="48%">
</colgroup>
<thead valign="bottom"><tr>
<th class="head">Component</th>
<th class="head">Availability</th>
</tr></thead>
<tbody valign="top">
<tr>
<td>Web</td>
<td>85%</td>
</tr>
<tr>
<td>Application</td>
<td>90%</td>
</tr>
<tr>
<td>Database</td>
<td>99.9%</td>
</tr>
<tr>
<td>DNS</td>
<td>98%</td>
</tr>
<tr>
<td>Firewall</td>
<td>85%</td>
</tr>
<tr>
<td>Switch</td>
<td>99%</td>
</tr>
<tr>
<td>Data Center</td>
<td>99.99%</td>
</tr>
<tr>
<td>ISP</td>
<td>95%</td>
</tr>
</tbody>
</table>
<p>Si cualquiera de estos componentes falla, el sistema caerá. La disponibilidad esperada del sistema sería \(85\%*90\%*99.9\%*98\%*85\%*99\%*99.99\%*95\% = 59.87\%\). Nótese que se modela cada componente como un todo, en lugar de mirar cada una de sus partes. Se podría dividir el servicio web en el software (Apache), el código (nuestra web) y el hardware (placa base, discos duros, etc). Para nuestros propósitos, la complejidad no mejora necesariamente el modelo, así que trabajaremos con el servicio como un todo. Además, para esta discusión se utilizará la tercera definición de disponibilidad de arriba. Para nuestros usuarios, no importa si el sistema está caído por mantenimiento o por un disco duro roto.</p>
</div>
</div>
<div class="section" id="mejorar-la-disponibilidad">
<h2>Mejorar la disponibilidad</h2>
<p>Si queremos conservar nuestros trabajos, necesitamos encontrar una manera de mejorar esta disponibilidad. Los objetivos obvios para mejorar la estabilidad del sitio son la web y el firewall. La pregunta es qué efecto tendría en la disponibilidad de la web añadir otro servidor. Con esto llegamos a la segunda ecuación. Cuando un sistema está compuesto por dos componentes redundantes, la disponibilidad del sistema se puede calcular como:</p>
<div class="math" id="ecuacion-2">
\begin{equation*}
Ecuación \#2: As = Ac_1 + ((1 – Ac_1) * Ac_2)
\end{equation*}
</div>
<div class="section" id="id1">
<h3>Ejemplo</h3>
<p>Usando nuestro ejemplo del servidor web con disponibilidad de 85%, añadir un segundo servidor incrementaría la disponibilidad a \(85\% + (1-85\%)*85\% = 97.75\%\). La lógica detrás de esto es que mientras el primer servidor está caído (15% del tiempo) el segundo servidor estará arriba el 85% del tiempo. Esto podría traducirse o no a la disponibilidad en el mundo real. Por ejemplo, si el servicio web está caído tan a menudo porque necesitamos desplegar nuestro código constantemente, añadir un segundo servidor debería traducirse en un incremento de la disponibilidad, ya que se puede desplegar código en el servidor fuera de línea mientras el otro servidor continúa funcionando. En este caso, el incremento de nuestra disponibilidad real debería ser mayor del 12.75%. En caso contrario, si el servicio se cae por errores de código, añadir un segundo servidor podría empeorar la disponibilidad debido al desesperante error.</p>
<p>La idea es que, en general, si has calculado rigurosamente la disponibilidad del componente, la ecuación funcionará. Nótese que la ecuación funcionará igualmente si los componentes tienen distinta estimación de disponibilidad. Supongamos que el servidor web tiene un problema de disponibilidad porque el hardware está subdimensionado. Ahora supongamos que el segundo servidor que hemos comprado tiene el doble de capacidad y determinamos que por sí mismo daría una disponibilidad del 90%, por lo que la ecuación cambia a \(85\% + (1-85\%)*90\% = 98.5\%\).</p>
<p>Volvamos al cálculo del sistema anterior y añadamos esto. Asumiendo que se ha añadido un segundo servidor web y un segundo firewall, incrementando la disponibilidad de estos componentes del sistema a 97.75%. Ahora la disponibilidad de nuestro nuevo sistema sería \(97.75\%*90\%*99.9\%*98\%*97.75\%*99\%*99.99\%*95\% = 79.10\%\). Mejor, pero aún no es buena. Es difícil conseguir cualquier nivel de alta disponibilidad cuando se tienen puntos únicos de fallo. Así que asumamos que añadimos componentes redundantes en todos nuestros servidores y equipos de red. Asumamos un segundo ISP para diversificar el transporte, pero aún estamos en un único <abbr title="Centro de Proceso de Datos, o DataCenter">CPD</abbr>. Nuestra ecuación sería ahora: \(97.75\%*99\%*99.9999\%*99.96\%*97.75\%*99.99\%*99.99\%*99.75\% = 94.3\%\). Mejorando. Eliminando los puntos únicos de fallo se mejoró la disponibilidad del sistema del 60% (3506 horas de downtime/año) a 94.3% (500 horas de downtime/año).</p>
</div>
<div class="section" id="generalizando-la-formula">
<h3>Generalizando la fórmula</h3>
<p>La ecuación #2 de más arriba modelaba cómo añadir un único componente. En algunos casos es necesario añadir más de un componente redundante. Por ejemplo, se podrían tener más de dos servidores web. En este caso es necesario iterar la ecuación #2 varias veces para agrupar el efecto de los componentes adicionales, lo que implica una tercera ecuación. Cuando se intenta calcular la disponibilidad de un servicio con n componentes redundantes, se calcula:</p>
<div class="math" id="ecuacion-3">
\begin{equation*}
Ecuación \#3: As = Ac_{n-1} + ((1 – Ac_{n-1}) * Ac_n)
\end{equation*}
</div>
</div>
<div class="section" id="id2">
<h3>Ejemplo</h3>
<p>En el caso de nuestro servidor web, añadir un tercer servidor cambia la disponibilidad a: \(97.75\% + (1-97.75\%)*85\% = 99.6625\%\). Añadiendo un cuarto servidor incrementaría la disponibilidad a: \(99.6625\% + (1-99.6625\%)*85\% = 99.949\%\). Nótese que hay una disminución de ganancia. Añadiendo el segundo servidor incrementó la disponibilidad en un 12.75%. Añadir el tercero sólo hizo ganar 1.9125%. El cuarto servidor nos da un insignificante .2865%. E incluso con 3 servidores más para distribuir nuestra carga, aún no se han conseguido los elusivos cuatro nueves de disponibilidad. Diseñar un sistema altamente disponible requiere que cada componente individual sea altamente disponible Y añadir redundancia en los componentes. Si el servidor web individual de nuestro sistema tuviera una disponibilidad del 90% en lugar del 85%, entonces la disponibilidad de los dos servidores sería del 99% y los tres servidores tendrían un 99.99%.</p>
<p>Las ecuaciones #2 y #3 tienen un defecto, ya que asumen que cada componente independiente puede manejar la carga, y que la carga es constante. ¿Qué ocurre si bajo operativa normal un servidor web puede manejar la carga, pero en pico se necesitan tres servidores? En ese caso la disponibilidad de los tres servidores en carga normal sería de 99.775%, mientras que en pico bajaría hasta el 85%. En un pico de carga, la caída de uno de los servidores podría significar una pérdida de servicio, por lo que se transforma a la disponibilidad de una única caja. ¿Y si el pico de carga requiere 2 servidores? En este caso la disponibilidad en pico sería del 97.75%. Si el pico require dos servidores y tenemos tres, la disponibilidad sería equivalente a tener dos servidores. El concepto importante aquí es que <strong>hay una relación inversa entre la carga y la disponibilidad</strong>.</p>
</div>
</div>
<div class="section" id="redundando-el-cpd">
<h2>Redundando el CPD</h2>
<p>Debería ser obvio a estas alturas unos verdaderos altos niveles de disponibilidad (99.9% - 99.999%) es muy difícil y muy caro. Uno de los puntos únicos de fallo más caros a eliminar es el propio <abbr title="Centro de Proceso de Datos, o DataCenter">CPD</abbr>. En la mayoría de los casos, doblará el coste de la infraestructura, e incluso podría ser más del doble, ya que será necesario invertir en tecnologías para sincronizar ambos <abbr title="Centros de Proceso de Datos, o DataCenters">CPDs</abbr>.</p>
<p>De todas formas consideremos añadir un nuevo <abbr title="Centro de Proceso de Datos, o DataCenter">CPD</abbr>. En el ejemplo de arriba, la disponibilidad de nuestro sistema con servidores e ISPs redundantes era del 94.3%. Añadir un segundo <abbr title="Centro de Proceso de Datos, o DataCenter">CPD</abbr> con la tecnología necesaria para permitir que ambos trabajen de forma activo-activo (ambos centros reciben tráfico al mismo tiempo) incrementaría nuestra disponibilidad a \(94.3\% + (1-94.3\%)*94.3\% = 99.675\%\). ¡Añadir un nuevo <abbr title="Centro de Proceso de Datos, o DataCenter">CPD</abbr> puede ahorrar hasta 471 horas de downtime al año!</p>
<p>En este ejemplo se asume que cada <abbr title="Centro de Proceso de Datos, o DataCenter">CPD</abbr> es un sistema independiente, por lo que el fallo de un sistema en un <abbr title="Centro de Proceso de Datos, o DataCenter">CPD</abbr> sería un fallo de todo el sistema en ese centro. No siempre es así. Por ejemplo, si se diseña correctamente, un servidor web podría conectarse a la base de datos del otro <abbr title="Centro de Proceso de Datos, o DataCenter">CPD</abbr>. En este caso la disponibilidad sería mayor del 99.675%. Si se pudiera diseñar el <em>site</em> de manera que cada sistema operara de forma independiente al resto de servicios, la disponibilidad en el ejemplo se incrementaría del 99.675% al 99.888% (cada servicio tendría 3 componentes redundantes, excepto el <abbr title="Centro de Proceso de Datos, o DataCenter">CPD</abbr> que sólo tendría uno).</p>
<div class="section" id="excel">
<h3>Excel</h3>
<p>Estas fórmulas son mucho más sencillas de mostrar en Excel. Pegue la siguiente tabla en una hoja de cálculo, comenzando en la casilla A1:</p>
<table border="1" class="docutils">
<colgroup>
<col width="14%">
<col width="21%">
<col width="21%">
<col width="21%">
<col width="21%">
</colgroup>
<thead valign="bottom"><tr>
<th class="head">Avail %</th>
<th class="head">1 Component</th>
<th class="head">2 Components</th>
<th class="head">3 Components</th>
<th class="head">4 Components</th>
</tr></thead>
<tbody valign="top">
<tr>
<td>Web</td>
<td>85%</td>
<td>=B2+((1-B2)*$B2)</td>
<td>=C2+((1-C2)*$B2)</td>
<td>=D2+((1-D2)*$B2)</td>
</tr>
<tr>
<td>Application</td>
<td>90%</td>
<td>=B3+((1-B3)*$B3)</td>
<td>=C3+((1-C3)*$B3)</td>
<td>=D3+((1-D3)*$B3)</td>
</tr>
<tr>
<td>Database</td>
<td>99.9%</td>
<td>=B4+((1-B4)*$B4)</td>
<td>=C4+((1-C4)*$B4)</td>
<td>=D4+((1-D4)*$B4)</td>
</tr>
<tr>
<td>DNS</td>
<td>98%</td>
<td>=B5+((1-B5)*$B5)</td>
<td>=C5+((1-C5)*$B5)</td>
<td>=D5+((1-D5)*$B5)</td>
</tr>
<tr>
<td>Firewall</td>
<td>85%</td>
<td>=B6+((1-B6)*$B6)</td>
<td>=C6+((1-C6)*$B6)</td>
<td>=D6+((1-D6)*$B6)</td>
</tr>
<tr>
<td>Switch</td>
<td>99%</td>
<td>=B7+((1-B7)*$B7)</td>
<td>=C7+((1-C7)*$B7)</td>
<td>=D7+((1-D7)*$B7)</td>
</tr>
<tr>
<td>Data Center</td>
<td>99.99%</td>
<td>?</td>
<td>=B8+((1-B8)*$B8)</td>
<td>?</td>
</tr>
<tr>
<td>ISP</td>
<td>95%</td>
<td>=B9+((1-B9)*$B9)</td>
<td>=C9+((1-C9)*$B9)</td>
<td>=D9+((1-D9)*$B9)</td>
</tr>
<tr>
<td>System Avail %</td>
<td>=b2*b3*b4*b5*b6*b7*b8*b9</td>
<td>=c2*c3*c4*c5*c6*c7*b8*c9</td>
<td>=d2*d3*d4*d5*d6*d7*d8*d9</td>
<td>=e2*e3*e4*e5*e6*e7*d8*e9</td>
</tr>
</tbody>
</table>
<p>Ahora que tiene los conceptos claros y el principio de una hoja de cálculo para calcular los cambios de premisas, se puede centrar en aplicar estas teorías a su situación particular. Comenzando por descomponer su sistema, sea una web simple, un sistema de contabilidad o un sistema de ficheros, en servicios de componentes independientes. Para cada servicio, determine el número mínimo de unidades necesarias para trabajar, y la disponibilidad necesaria de cada unidad.</p>
<p>Estimar la disponibilidad puede ser un reto. Una manera es mirar datos históricos. Si no se tiene acceso a buenos datos, se puede formar una estimación basada en los parámetros de su operativa estándar. Por ejemplo, si se despliega código nuevo del servicio web dos veces al mes y cada una causa un <em>downtime</em> de 2 horas, se traduce en 48 horas de parada al año. Si se espera realizar labores de mantenimiento del sistema operativo una vez por trimestre, con un <em>downtime</em> estimado de 2 horas por trimestre, serían otras 8 horas más al año. Si además se anticipa a un fallo hardware al año, con garantía de entrega el siguiente día hábil, se traduciría en 41 horas de <em>downtime</em> al año (fallos en viernes se repararían el lunes, los sábados y domingos en martes). Sumando estos números obtenemos \(48 + 8 + 41 = 98\) horas de <em>downtime</em> al año, o una disponibilidad estimada del 98.882%.</p>
<p>Con un poco de esfuerzo, se puede estimar un nivel de disponibilidad realista para su sistema. Éste es el pilar para crear <abbr title="Acuerdo de Nivel de Servicio o Server Level Agreement">SLA</abbr> realistas y cumplibles. Estas fórmulas pueden ayudar a IT a negociar los <abbr title="Acuerdos de Nivel de Servicio o Server Level Agreement">SLAs</abbr> con negocio, y puede ayudar a comparar el <abbr title="Retorno Sobre la Inversión">RSI</abbr> de diferentes soluciones. Por ejemplo, digamos que se está intentando elegir una solución para el servidor web, y se tienen dos elecciones:</p>
<ul class="simple">
<li>La opción 1 consiste en 4 servidores usando hardware barato sin redundancia interna. Cada servidor cuesta 3.000 €. Estimamos la disponibilidad en un 75%.</li>
<li>La opción 2 consiste en 2 servidores usando hardware caro con discos duros y fuentes de alimentación redundantes. Cada servidor cuesta 20.000 €. Estimas la disponibilidad de cada servidor en un 99%.</li>
</ul>
<p>Se estima que el coste por <em>downtime</em> es de 500€/hora, y se espera que estos servidores aguanten la carga del sistema los próximos 3 años, tras los cuales se reemplazarán. Usando los números de arriba, la solución #1 tiene una disponibilidad esperada del 99.6% a un coste de 12.000€. La solución #2 tiene una disponibilidad esperada del 99.99%, a un coste de $40.000€. La solución #1 experimentaría 34 horas/año, o 102 horas en los tres años, de <em>downtime</em> más que la solución #2. En tres años, este <em>downtime</em> extra costaría $51.000€. Por lo que el gasto de 28.000€ previo proporcionará un <abbr title="Retorno Sobre la Inversión">RSI</abbr> en 3 años del 182%. Nótese que el modelo es tan bueno como lo sean las estimaciones. Si los servidores de la solución #2 sólo tuvieran el 95% de disponibilidad, la disponibilidad combinada sería del 99.75%, lo que sólo proporciona 13 horas menos de <em>downtime</em> anual. En este caso sólo se ahorrarían 20,000€ en los 3 años por la inversión de 28.000€, por lo que podría ser mejor la opción #1.</p>
</div>
</div>
<div class="section" id="conclusion">
<h2>Conclusión</h2>
<p>Diseñar y operar sistemas de alta disponibilidad es un trabajo complicado, pero con unas pocas fórmulas sencillas, es posible entender y predecir su comportamiento general. Esto permitirá realizar mejores decisiones al elegir entre múltiples opciones, y hacer predicciones más realistas a la hora de negociar los <abbr title="Acuerdos de Nivel de Servicio o Server Level Agreement">SLAs</abbr>.</p>
<hr class="docutils">
<p><strong>Artículo original</strong>: <a class="reference external" href="http://www.edgeblog.net/2007/in-search-of-five-9s/">In search of five 9s: Calculating Availability of Complex Systems</a></p>
<p><a class="reference external" href="/blog/en-busca-de-los-cinco-9s">Traducido por Miguel Ángel García</a>.</p>
</div>
</div>
          </div>
          <br><div>
            <nav><span class="author">
                <span class="glyphicon glyphicon-user"></span> 
                <span>Publicado:Miguel Ángel García</span>
              </span>
               

              
              <span class="dateline">
                <span class="glyphicon glyphicon-calendar"></span> 
                <time class="published dt-published" datetime="2015-06-13T00:00:00+00:00" title="2015-06-13">2015-06-13</time></span>
               
              <span class="tags">
                <span class="glyphicon glyphicon-tags"></span> 
                <a class="label label-primary p-category" href="/categories/devops/" rel="tag">devops</a>
              </span>
                      <ul class="pager">
<li class="previous">
              <a href="/blog/peewee-un-orm-para-python/" rel="prev" title="Peewee, un ORM para Python">
                <span class="glyphicon glyphicon-arrow-left"></span>
                Publicación anterior
              </a>
            </li>
            <li class="next">
              <a href="/blog/monitorizacion-y-alertado/" rel="next" title="Monitorización y alertado">
                Siguiente publicación
                <span class="glyphicon glyphicon-arrow-right"></span>
              </a>
            </li>
        </ul></nav>
</div>
          <section class="comments"><h2>Comentarios</h2>
                            <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="magmax",
            disqus_url="http://magmax.org/blog/en-busca-de-los-cinco-9s/",
        disqus_title="En busca de los cinco 9s: Calculando la disponibilidad de sistemas complejos",
        disqus_identifier="cache/posts/en-busca-de-los-cinco-9s.html",
        disqus_config = function () {
            this.language = "es_ES";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="//disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


          </section></article><script>var disqus_shortname="magmax";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
      <aside class="sidebar col-md-3"><div>
<section class="panel panel-default"><div class="panel-heading">
    <h3 class="panel-title">Last comments</h3>
  </div>
  <div class="panel-body">
    <div id="disqus_last_comments" class="dsq-widget">
      <script type="text/javascript" src="http://magmax.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=0&amp;avatar_size=32&amp;excerpt_length=150">
      </script>
</div>
  </div>
</section>
</div>
          <div>
<section class="panel panel-default"><div class="panel-heading">
    <h3 class="panel-title">GitHub Repos</h3>
  </div>
  <div class="panel-body">
    <ul id="gh_repos" class="list-unstyled">
<li class="loading">Status updating…</li>
    </ul>
</div>
  <div class="panel-footer">
    <a href="https://github.com/magmax">@magmax</a> on GitHub
  </div>
</section>
</div>
      </aside>
</div>

    <footer>
      Contents © 2009-2020 <a href="mailto:">Miguel Ángel García</a> 
<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/2.5/es/">
<img alt="Creative Commons License BY-NC-SA" style="border-width:0; margin-bottom:12px;width:80px;height:15px;vertical-align:middle" src="https://i.creativecommons.org/l/by-nc-sa/2.5/es/80x15.png"></a>; Using <a href="/stories/credits/">a lot of free software</a>
      
    </footer>
</div>
</div>




<a href="http://www.addthis.com/bookmark.php?v=250" id="addthisbox" class="addthis_button" src="http://s7.addthis.com/static/btn/v2/lg-share-en.gif" width="125" height="16" border="0" alt="Share">
<script data-main="/assets/js/main" src="/assets/js/libs/require/require.min.js"></script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-9308241-3', 'auto');
  ga('send', 'pageview');

</script></a>
</body>
</html>
