<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>En busca de los cinco 9s: Calculando la disponibilidad de sistemas complejos | El blog de MagMax</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="Traducción del artículo &#34;In search of five 9s: Calculating Availability of Complex Systems&#34;">
    <meta name="generator" content="Hugo 0.79.1" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.4fc0b62e4b82c997bb0041217cd6b979.css" rel="stylesheet">
    

    

    
      

    

    
    
    <meta property="og:title" content="En busca de los cinco 9s: Calculando la disponibilidad de sistemas complejos" />
<meta property="og:description" content="Traducción del artículo &#34;In search of five 9s: Calculating Availability of Complex Systems&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://magmax.org/blog/en-busca-de-los-cinco-9s/" />
<meta property="article:published_time" content="2015-06-13T00:00:00+00:00" />
<meta property="article:modified_time" content="2015-06-13T00:00:00+00:00" /><meta property="og:site_name" content="El blog de MagMax" />
<meta itemprop="name" content="En busca de los cinco 9s: Calculando la disponibilidad de sistemas complejos">
<meta itemprop="description" content="Traducción del artículo &#34;In search of five 9s: Calculating Availability of Complex Systems&#34;">
<meta itemprop="datePublished" content="2015-06-13T00:00:00+00:00" />
<meta itemprop="dateModified" content="2015-06-13T00:00:00+00:00" />
<meta itemprop="wordCount" content="2633">



<meta itemprop="keywords" content="devops,engineering," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="En busca de los cinco 9s: Calculando la disponibilidad de sistemas complejos"/>
<meta name="twitter:description" content="Traducción del artículo &#34;In search of five 9s: Calculating Availability of Complex Systems&#34;"/>

	
  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        El blog de MagMax
      
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="" title="Inicio page">
              Inicio
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="../en" title="English page">
              English
            </a>
          </li>
          
        </ul>
      
      















    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked">
          
        POSTS
      </aside>
      




  <div id="sharing" class="mt3">

    
    <a href="https://www.facebook.com/sharer.php?u=https://magmax.org/blog/en-busca-de-los-cinco-9s/" class="facebook no-underline" aria-label="share on Facebook">
      <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M28.765,50.32h6.744V33.998h4.499l0.596-5.624h-5.095  l0.007-2.816c0-1.466,0.14-2.253,2.244-2.253h2.812V17.68h-4.5c-5.405,0-7.307,2.729-7.307,7.317v3.377h-3.369v5.625h3.369V50.32z   M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;"/></svg>

    </a>

    
    
    <a href="https://twitter.com/share?url=https://magmax.org/blog/en-busca-de-los-cinco-9s/&amp;text=En%20busca%20de%20los%20cinco%209s:%20Calculando%20la%20disponibilidad%20de%20sistemas%20complejos" class="twitter no-underline" aria-label="share on Twitter">
      <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/></svg>

    </a>

    
    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://magmax.org/blog/en-busca-de-los-cinco-9s/&amp;title=En%20busca%20de%20los%20cinco%209s:%20Calculando%20la%20disponibilidad%20de%20sistemas%20complejos" class="linkedin no-underline" aria-label="share on LinkedIn">
      <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

    </a>
  </div>


      <h1 class="f1 athelas mt3 mb1">En busca de los cinco 9s: Calculando la disponibilidad de sistemas complejos</h1>
      
      
      <time class="f6 mv4 dib tracked" datetime="2015-06-13T00:00:00Z">June 13, 2015</time>

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><p>Este artículo es la traducción del artículo <a href="https://www.edgeblog.net/2007/in-search-of-five-9s/">In search of five 9s: Calculating
Availability of Complex Systems</a>, publicado por Bill el 29 de Octubre de 2007.
Dado que el artículo original tiene demasiado texto, me he visto obligado a
modificar la maquetación y añadir títulos.</p>
<p>Puede parecer un poco largo, pero es realmente interesante. Aunque tiene muchas
fórmulas es sencillo de entender, gracias a los ejemplos.</p>
<p>Y he elegido este artículo porque con el <strong>cloud</strong> que está tan de moda resulta
sencillo y relativamente barato redundar máquinas.</p>
<p>Además, éste es el tipo de artículos que realmente me hacen sentir como Ingeniero.</p>
<!-- raw HTML omitted -->
<hr>
<figure>
    <img src="/images/uptime.jpg"
         alt="Uptime"/> 
</figure>

<h2 id="disponibilidad-y-sla">Disponibilidad y SLA</h2>
<p>He pasado los últimos días tratando de desarrollar un modelo matemático simple para predecir la disponibilidad esperada en sistemas complejos. En IT se nos suele pedir que desarrollemos y cumplamos acuerdos de nivel de servicio
(<abbr title="Acuerdos de Nivel de Servicio o Server Level Agreements">SLAs</abbr>
).
Si no se analizan los puntos de fallo de un sistema, y después se calcula la
disponibilidad del sistema, el
(<abbr title="Acuerdo de Nivel de Servicio o Server Level Agreement">SLA</abbr>
).
es defectuoso desde el principio. Para
complicar aún más las cosas, diferentes personas tienen diferentes definiciones
de disponibilidad. Por ejemplo: ¿cuenta un <em>downtime</em> planificado de
mantenimiento en sus cálculos de disponibilidad del sistema?</p>
<p>Definiciones de Disponibilidad Comunes:</p>
<ol>
<li>
<p>Disponibilidad =
<abbr title="Media del tiempo entre fallos">MTBF</abbr>
 / (
<abbr title="Media del tiempo de recuperación">MTTR</abbr>
 +
<abbr title="Media del tiempo entre fallos">MTBF</abbr>

). Ésta es una definición clásica de disponibilidad y es frecuentemente usada por fabricantes de hardware cuando publican una métrica de disponibilidad para un determinado servidor.</p>
</li>
<li>
<p>Disponibilidad = (Uptime + Scheduled Maintenance)/(Unscheduled Downtime + Uptime + Scheduled Maintenance). Consiste en una métrica centrada en IT donde el negocio puede permitirse <em>downtimes</em> durante horas. Este modelo funciona para determinados sistemas, como un servidor de ficheros que no se necesita durante la noche, pero no funciona bien para servicios web, a pesar de que muchas compañías aún lo usan para sus
<abbr title="SLAs (Acuerdos de Nivel de Servicio o Server Level Agreement)">SLAs</abbr>
.</p>
</li>
<li>
<p>Disponibilidad = Uptime/(Uptime + Downtime). Es la métrica que mejor aplica para servicios que se necesitan 24x7, como sitios de comercio electrónico.</p>
</li>
</ol>
<p>Normalmente se expresa la disponibilidad como un porcentaje. En ocasiones, la gente hace referencia a los <em>&ldquo;cuatro nueves&rdquo;</em> (99.99%) o los <em>&ldquo;cinco nueves&rdquo;</em> (99.999%). Para simplificar las cosas, en la siguiente tabla se muestran los minutos de <em>downtime</em> al año permitidos para un nivel determinado:</p>
<table>
<thead>
<tr>
<th>Disponiblidad</th>
<th>Min Downtime/Año</th>
<th>HorasDowntime/Año</th>
</tr>
</thead>
<tbody>
<tr>
<td>95.000%</td>
<td>26,298</td>
<td>438</td>
</tr>
<tr>
<td>98.000%</td>
<td>10,519</td>
<td>175</td>
</tr>
<tr>
<td>98.500%</td>
<td>7,889</td>
<td>131</td>
</tr>
<tr>
<td>99.000%</td>
<td>5,260</td>
<td>88</td>
</tr>
<tr>
<td>99.500%</td>
<td>2,630</td>
<td>44</td>
</tr>
<tr>
<td>99.900%</td>
<td>526</td>
<td>8.8</td>
</tr>
<tr>
<td>99.990%</td>
<td>52.6</td>
<td>.88</td>
</tr>
<tr>
<td>99.999%</td>
<td>5.26</td>
<td>.088</td>
</tr>
</tbody>
</table>
<p>Basándose en la tabla anterior, se puede comprobar que hay una gran diferencia entre un
<abbr title="Acuerdo de Nivel de Servicio o Server Level Agreement">SLA</abbr>

que especifique  un 99% de disponibilidad (88 horas de <em>downtime</em> al año) y 99.9% de disponibilidad (8.8 horas de <em>downtime</em> al año). Pero ¿cómo se puede estar seguro de cuál es el <em>downtime</em> esperado de un sistema? En su form más simplista, la disponibilidad esperada de un sistema es la disponibilidad esperada de cada una de sus partes multiplicadas entre sí. De esta manera, si el sistema tiene dos servidores, y cada servidor tiene una disponibilidad esperada del 99%, entonces la disponibilidad del sistema sería \(99\% * 99\% = 98.01\%\). Nota: He usado la expresión &ldquo;disponibilidad esperada&rdquo;. Estamos calculando el futuro esperado de un sistema sobre un periodo de tiempo, no la disponibilidad histórica. Para el resto de este artículo, eliminaré el término &ldquo;esperada&rdquo; por brevedad, pero está siempre implícito.</p>
<h2 id="sistemas-compuestos">Sistemas compuestos</h2>
<p>El modelo simplista de más arriba es útil para mostrar que el <em>downtime</em> es acumulativo. En otras palabras, si se espera que un componente esté fuera de línea 88 horas/año, y un fallo de cualquier componente es un fallo del sistema, entonces el sistema tiene un <em>downtime</em> esperado de 174 horas. ¿Por qué no 176 horas? Bueno, ocasionalmente ambos componentes estarán caídos al mismo tiempo.</p>
<p>Los sistemas del mundo real nunca son tan simples. Típicamente el sistema estará compuesto de múltiples componentes, con redundancia, y cada uno con distinto nivel de disponibilidad por componente. Modelar esto requiere fórmulas algo más complicadas, pero en cuanto se tengan claros los conceptos, los nuevos cálculos pueden hacerse rápidamente en una hoja Excel. Antes de continuar necesitamos algo de notación básica para simplificar nuestras fórmulas:</p>
<ul>
<li>Disponibilidad del componente 1: \(Ac_1\)</li>
<li>Disponibilidad del componente 2: \(Ac_2\)</li>
<li>Disponibilidad del componente 3: \(Ac_3\)</li>
<li>Disponibilidad del componente N: \(Ac_N\)</li>
<li>Sistema de disponibilidad: \(As\)</li>
</ul>
<p>Y dicho esto, estamos listos para nuestra primera fórmula. Cuando un sistema está constituído por N componentes que son puntos únicos de fallo, la disponibilidad del sistema se puede calcular como:</p>
<p>$$
As = Ac_1 * Ac_2 * Ac_3 * &hellip; Ac_n
$$</p>
<h3 id="ejemplo">Ejemplo</h3>
<p>Consideremos un sitio de comercio electrónico 24x7 con muchos puntos únicos de fallo. Se podría modelar el sistema con los 8 componentes siguientes:</p>
<table>
<thead>
<tr>
<th>Component</th>
<th>Availability</th>
</tr>
</thead>
<tbody>
<tr>
<td>Web</td>
<td>85%</td>
</tr>
<tr>
<td>Application</td>
<td>90%</td>
</tr>
<tr>
<td>Database</td>
<td>99.9%</td>
</tr>
<tr>
<td>DNS</td>
<td>98%</td>
</tr>
<tr>
<td>Firewall</td>
<td>85%</td>
</tr>
<tr>
<td>Switch</td>
<td>99%</td>
</tr>
<tr>
<td>Data Center</td>
<td>99.99%</td>
</tr>
<tr>
<td>ISP</td>
<td>95%</td>
</tr>
</tbody>
</table>
<p>Si cualquiera de estos componentes falla, el sistema caerá. La disponibilidad esperada del sistema sería \(85\%*90\%*99.9\%*98\%*85\%*99\%*99.99\%*95\% = 59.87\%\). Nótese que se modela cada componente como un todo, en lugar de mirar cada una de sus partes. Se podría dividir el servicio web en el software (Apache), el código (nuestra web) y el hardware (placa base, discos duros, etc). Para nuestros propósitos, la complejidad no mejora necesariamente el modelo, así que trabajaremos con el servicio como un todo. Además, para esta discusión se utilizará la tercera definición de disponibilidad de arriba. Para nuestros usuarios, no importa si el sistema está caído por mantenimiento o por un disco duro roto.</p>
<h2 id="mejorar-la-disponibilidad">Mejorar la disponibilidad</h2>
<p>Si queremos conservar nuestros trabajos, necesitamos encontrar una manera de mejorar esta disponibilidad. Los objetivos obvios para mejorar la estabilidad del sitio son la web y el firewall. La pregunta es qué efecto tendría en la disponibilidad de la web añadir otro servidor. Con esto llegamos a la segunda ecuación. Cuando un sistema está compuesto por dos componentes redundantes, la disponibilidad del sistema se puede calcular como:</p>
<p>$$
As = Ac_1 + ((1 – Ac_1) * Ac_2)
$$</p>
<h3 id="ejemplo-1">Ejemplo</h3>
<p>Usando nuestro ejemplo del servidor web con disponibilidad de 85%, añadir un segundo servidor incrementaría la disponibilidad a \(85\% + (1-85\%)*85\% = 97.75\%\). La lógica detrás de esto es que mientras el primer servidor está caído (15% del tiempo) el segundo servidor estará arriba el 85% del tiempo. Esto podría traducirse o no a la disponibilidad en el mundo real. Por ejemplo, si el servicio web está caído tan a menudo porque necesitamos desplegar nuestro código constantemente, añadir un segundo servidor debería traducirse en un incremento de la disponibilidad, ya que se puede desplegar código en el servidor fuera de línea mientras el otro servidor continúa funcionando. En este caso, el incremento de nuestra disponibilidad real debería ser mayor del 12.75%. En caso contrario, si el servicio se cae por errores de código, añadir un segundo servidor podría empeorar la disponibilidad debido al desesperante error.</p>
<p>La idea es que, en general, si has calculado rigurosamente la disponibilidad del componente, la ecuación funcionará. Nótese que la ecuación funcionará igualmente si los componentes tienen distinta estimación de disponibilidad. Supongamos que el servidor web tiene un problema de disponibilidad porque el hardware está subdimensionado. Ahora supongamos que el segundo servidor que hemos comprado tiene el doble de capacidad y determinamos que por sí mismo daría una disponibilidad del 90%, por lo que la ecuación cambia a \(85\% + (1-85\%)*90\% = 98.5\%\).</p>
<p>Volvamos al cálculo del sistema anterior y añadamos esto. Asumiendo que se ha añadido un segundo servidor web y un segundo firewall, incrementando la disponibilidad de estos componentes del sistema a 97.75%. Ahora la disponibilidad de nuestro nuevo sistema sería \(97.75\%*90\%*99.9\%*98\%*97.75\%*99\%*99.99\%*95\% = 79.10\%\). Mejor, pero aún no es buena. Es difícil conseguir cualquier nivel de alta disponibilidad cuando se tienen puntos únicos de fallo. Así que asumamos que añadimos componentes redundantes en todos nuestros servidores y equipos de red. Asumamos un segundo ISP para diversificar el transporte, pero aún estamos en un único
<abbr title="Centro de Proceso de Datos, o DataCenter">CPD</abbr>
.
Nuestra ecuación sería ahora: \(97.75\%*99\%*99.9999\%*99.96\%*97.75\%*99.99\%*99.99\%*99.75\% = 94.3\%\). Mejorando. Eliminando los puntos únicos de fallo se mejoró la disponibilidad del sistema del 60% (3506 horas de downtime/año) a 94.3% (500 horas de downtime/año).</p>
<h3 id="generalizando-la-fórmula">Generalizando la fórmula</h3>
<p>La ecuación #2 de más arriba modelaba cómo añadir un único componente. En algunos casos es necesario añadir más de un componente redundante. Por ejemplo, se podrían tener más de dos servidores web. En este caso es necesario iterar la ecuación #2 varias veces para agrupar el efecto de los componentes adicionales, lo que implica una tercera ecuación. Cuando se intenta calcular la disponibilidad de un servicio con n componentes redundantes, se calcula:</p>
<p>$$
As = Ac_{n-1} + ((1 – Ac_{n-1}) * Ac_n)
$$</p>
<h3 id="ejemplo-2">Ejemplo</h3>
<p>En el caso de nuestro servidor web, añadir un tercer servidor cambia la disponibilidad a: \(97.75\% + (1-97.75\%)*85\% = 99.6625\%\). Añadiendo un cuarto servidor incrementaría la disponibilidad a: \(99.6625\% + (1-99.6625\%)*85\% = 99.949\%\). Nótese que hay una disminución de ganancia. Añadiendo el segundo servidor incrementó la disponibilidad en un 12.75%. Añadir el tercero sólo hizo ganar 1.9125%. El cuarto servidor nos da un insignificante .2865%. E incluso con 3 servidores más para distribuir nuestra carga, aún no se han conseguido los elusivos cuatro nueves de disponibilidad. Diseñar un sistema altamente disponible requiere que cada componente individual sea altamente disponible Y añadir redundancia en los componentes. Si el servidor web individual de nuestro sistema tuviera una disponibilidad del 90% en lugar del 85%, entonces la disponibilidad de los dos servidores sería del 99% y los tres servidores tendrían un 99.99%.</p>
<p>Las ecuaciones #2 y #3 tienen un defecto, ya que asumen que cada componente independiente puede manejar la carga, y que la carga es constante. ¿Qué ocurre si bajo operativa normal un servidor web puede manejar la carga, pero en pico se necesitan tres servidores? En ese caso la disponibilidad de los tres servidores en carga normal sería de 99.775%, mientras que en pico bajaría hasta el 85%. En un pico de carga, la caída de uno de los servidores podría significar una pérdida de servicio, por lo que se transforma a la disponibilidad de una única caja. ¿Y si el pico de carga requiere 2 servidores? En este caso la disponibilidad en pico sería del 97.75%. Si el pico require dos servidores y tenemos tres, la disponibilidad sería equivalente a tener dos servidores. El concepto importante aquí es que <strong>hay una relación inversa entre la carga y la disponibilidad</strong>.</p>
<h2 id="redundando-el-cpd">Redundando el CPD</h2>
<p>Debería ser obvio a estas alturas unos verdaderos altos niveles de disponibilidad (99.9% - 99.999%) es muy difícil y muy caro. Uno de los puntos únicos de fallo más caros a eliminar es el propio
<abbr title="Centro de Proceso de Datos, o DataCenter">CPD</abbr>
.
En la mayoría de los casos, doblará el coste de la infraestructura, e incluso podría ser más del doble, ya que será necesario invertir en tecnologías para sincronizar ambos
<abbr title="Centros de Proceso de Datos, o DataCenters">CPDs</abbr>
.</p>
<p>De todas formas consideremos añadir un nuevo
<abbr title="Centro de Proceso de Datos, o DataCenter">CPD</abbr>
.
En el ejemplo de arriba, la disponibilidad de nuestro sistema con servidores e
ISPs redundantes era del 94.3%. Añadir un segundo
<abbr title="Centro de Proceso de Datos, o DataCenter">CPD</abbr>

con la tecnología
necesaria para permitir que ambos trabajen de forma activo-activo (ambos centros
reciben tráfico al mismo tiempo) incrementaría nuestra disponibilidad a
\(94.3\% + (1-94.3\%)*94.3\% = 99.675\%\). ¡Añadir un nuevo
<abbr title="Centro de Proceso de Datos, o DataCenter">CPD</abbr>

puede ahorrar hasta 471 horas de downtime al año!</p>
<p>En este ejemplo se asume que cada
<abbr title="Centro de Proceso de Datos, o DataCenter">CPD</abbr>

es un sistema independiente, por lo que el fallo de un sistema en un
<abbr title="Centro de Proceso de Datos, o DataCenter">CPD</abbr>

sería un fallo de todo el sistema en ese centro. No siempre es así. Por ejemplo,
si se diseña correctamente, un servidor web podría conectarse a la base de datos
del otro
<abbr title="Centro de Proceso de Datos, o DataCenter">CPD</abbr>
.
En este caso la disponibilidad sería mayor del 99.675%. Si se pudiera diseñar el
<em>site</em> de manera que cada sistema operara de forma independiente al resto de
servicios, la disponibilidad en el ejemplo se incrementaría del 99.675% al
99.888% (cada servicio tendría 3 componentes redundantes, excepto el
<abbr title="Centro de Proceso de Datos, o DataCenter">CPD</abbr>

que sólo tendría uno).</p>
<h3 id="excel">Excel</h3>
<p>Estas fórmulas son mucho más sencillas de mostrar en Excel. Pegue la siguiente tabla en una hoja de cálculo, comenzando en la casilla A1:</p>
<table>
<thead>
<tr>
<th>Avail %</th>
<th>1 Component</th>
<th>2 Components</th>
<th>3 Components</th>
<th>4 Components</th>
</tr>
</thead>
<tbody>
<tr>
<td>Web</td>
<td>85%</td>
<td>=B2+((1-B2)*$B2)</td>
<td>=C2+((1-C2)*$B2)</td>
<td>=D2+((1-D2)*$B2)</td>
</tr>
<tr>
<td>Application</td>
<td>90%</td>
<td>=B3+((1-B3)*$B3)</td>
<td>=C3+((1-C3)*$B3)</td>
<td>=D3+((1-D3)*$B3)</td>
</tr>
<tr>
<td>Database</td>
<td>99.9%</td>
<td>=B4+((1-B4)*$B4)</td>
<td>=C4+((1-C4)*$B4)</td>
<td>=D4+((1-D4)*$B4)</td>
</tr>
<tr>
<td>DNS</td>
<td>98%</td>
<td>=B5+((1-B5)*$B5)</td>
<td>=C5+((1-C5)*$B5)</td>
<td>=D5+((1-D5)*$B5)</td>
</tr>
<tr>
<td>Firewall</td>
<td>85%</td>
<td>=B6+((1-B6)*$B6)</td>
<td>=C6+((1-C6)*$B6)</td>
<td>=D6+((1-D6)*$B6)</td>
</tr>
<tr>
<td>Switch</td>
<td>99%</td>
<td>=B7+((1-B7)*$B7)</td>
<td>=C7+((1-C7)*$B7)</td>
<td>=D7+((1-D7)*$B7)</td>
</tr>
<tr>
<td>Data Center</td>
<td>99.99%</td>
<td>?</td>
<td>=B8+((1-B8)*$B8)</td>
<td>?</td>
</tr>
<tr>
<td>ISP</td>
<td>95%</td>
<td>=B9+((1-B9)*$B9)</td>
<td>=C9+((1-C9)*$B9)</td>
<td>=D9+((1-D9)*$B9)</td>
</tr>
<tr>
<td>System Avail %</td>
<td>=b2<em>b3</em>b4<em>b5</em>b6<em>b7</em>b8*b9</td>
<td>=c2<em>c3</em>c4<em>c5</em>c6<em>c7</em>b8*c9</td>
<td>=d2<em>d3</em>d4<em>d5</em>d6<em>d7</em>d8*d9</td>
<td>=e2<em>e3</em>e4<em>e5</em>e6<em>e7</em>d8*e9</td>
</tr>
</tbody>
</table>
<p>Ahora que tiene los conceptos claros y el principio de una hoja de cálculo para calcular los cambios de premisas, se puede centrar en aplicar estas teorías a su situación particular. Comenzando por descomponer su sistema, sea una web simple, un sistema de contabilidad o un sistema de ficheros, en servicios de componentes independientes. Para cada servicio, determine el número mínimo de unidades necesarias para trabajar, y la disponibilidad necesaria de cada unidad.</p>
<p>Estimar la disponibilidad puede ser un reto. Una manera es mirar datos históricos. Si no se tiene acceso a buenos datos, se puede formar una estimación basada en los parámetros de su operativa estándar. Por ejemplo, si se despliega código nuevo del servicio web dos veces al mes y cada una causa un <em>downtime</em> de 2 horas, se traduce en 48 horas de parada al año. Si se espera realizar labores de mantenimiento del sistema operativo una vez por trimestre, con un <em>downtime</em> estimado de 2 horas por trimestre, serían otras 8 horas más al año. Si además se anticipa a un fallo hardware al año, con garantía de entrega el siguiente día hábil, se traduciría en 41 horas de <em>downtime</em> al año (fallos en viernes se repararían el lunes, los sábados y domingos en martes). Sumando estos números obtenemos \(48 + 8 + 41 = 98\) horas de <em>downtime</em> al año, o una disponibilidad estimada del 98.882%.</p>
<p>Con un poco de esfuerzo, se puede estimar un nivel de disponibilidad realista
para su sistema. Éste es el pilar para crear
<abbr title="Acuerdos de Nivel de Servicio o Server Level Agreements">SLAs</abbr>

realistas y cumplibles. Estas fórmulas pueden ayudar a IT a negociar los
<abbr title="Acuerdos de Nivel de Servicio o Server Level Agreements">SLAs</abbr>

con negocio, y puede ayudar a comparar el
<abbr title="Retorno Sobre la Inversión">RSI</abbr>

de diferentes soluciones. Por ejemplo, digamos que se está
intentando elegir una solución para el servidor web, y se tienen dos elecciones:</p>
<ul>
<li>La opción 1 consiste en 4 servidores usando hardware barato sin redundancia interna. Cada servidor cuesta 3.000 €. Estimamos la disponibilidad en un 75%.</li>
<li>La opción 2 consiste en 2 servidores usando hardware caro con discos duros y fuentes de alimentación redundantes. Cada servidor cuesta 20.000 €. Estimas la disponibilidad de cada servidor en un 99%.</li>
</ul>
<p>Se estima que el coste por <em>downtime</em> es de 500€/hora, y se espera que estos servidores aguanten la carga del sistema los próximos 3 años, tras los cuales se reemplazarán. Usando los números de arriba, la solución #1 tiene una disponibilidad esperada del 99.6% a un coste de 12.000€. La solución #2 tiene una disponibilidad esperada del 99.99%, a un coste de $40.000€. La solución #1 experimentaría 34 horas/año, o 102 horas en los tres años, de <em>downtime</em> más que la solución #2. En tres años, este <em>downtime</em> extra costaría $51.000€. Por lo que el gasto de 28.000€ previo proporcionará un
<abbr title="Retorno Sobre la Inversión">RSI</abbr>

en 3 años del 182%. Nótese que el modelo es tan bueno como lo sean las estimaciones. Si los servidores de la solución #2 sólo tuvieran el 95% de disponibilidad, la disponibilidad combinada sería del 99.75%, lo que sólo proporciona 13 horas menos de <em>downtime</em> anual. En este caso sólo se ahorrarían 20,000€ en los 3 años por la inversión de 28.000€, por lo que podría ser mejor la opción #1.</p>
<h2 id="conclusión">Conclusión</h2>
<p>Diseñar y operar sistemas de alta disponibilidad es un trabajo complicado, pero con unas pocas fórmulas sencillas, es posible entender y predecir su comportamiento general. Esto permitirá realizar mejores decisiones al elegir entre múltiples opciones, y hacer predicciones más realistas a la hora de negociar los
<abbr title="Acuerdos de Nivel de Servicio o Server Level Agreement">SLAs</abbr>
.</p>
<hr>
<p><strong>Artículo original</strong>: <a href="https://www.edgeblog.net/2007/in-search-of-five-9s/">In search of five 9s: Calculating Availability of Complex Systems</a></p>
<p><a href="https://magmax.org/blog/en-busca-de-los-cinco-9s/">Traducido por Miguel Ángel García</a>.</p>
<ul class="pa0">
  
   <li class="list">
     <a href="/tags/devops" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">devops</a>
   </li>
  
   <li class="list">
     <a href="/tags/engineering" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">engineering</a>
   </li>
  
</ul>
<div class="mt6 instapaper_ignoref">
      
        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "magmax" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">Relacionado</p>
    <ul class="pa0 list">
	   
	     <li  class="mb2">
          <a href="/blog/niveles-de-automatizacion/">Niveles de automatización</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/que-es-ingeniero/">¿Qué es un &#39;Ingeniero&#39;?</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/como-funcionan-las-cosas/">Cómo funcionan las cosas</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/vagrant-puppet/">Vagrant y Puppet</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/programarsinifs/">Programar sin condicionales</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/no-lo-llames-helper/">No lo llames &#39;util&#39;, llámalo &#39;helper</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/post-agile/">Agile ha muerto. ¡Viva post-agile!</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/estadistica/">Estadística</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/mercurial-subversion/">Sistemas de Control de Versiones (Subversion y Mercurial)</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/constructores-simples/">Constructores simples</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/arboles-grafos/">Repasando: Árboles y Grafos</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/estatico-vs-dinamico/">Estático vs Dinámico</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/ingenieria/">Ingeniería de software: el nuevo concepto</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/artesania-software/">Artesanía de Software: De qué va todo esto</a>
        </li>
	    
    </ul>
</div>

</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://magmax.org/" >
    &copy;  El blog de MagMax 2021 
  </a>
    <div>














</div>
  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
