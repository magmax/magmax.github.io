<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Hibernate con Netbeans - El blog de MagMax</title><meta name="Description" content="El blog de un Ingeniero Informático: tutoriales, manuales, opiniones, comparativas, ..."><meta property="og:title" content="Hibernate con Netbeans" />
<meta property="og:description" content="Soy nuevo en esto de Hibernate, y tampoco he trabajado demasiado con Netbeans. Por eso es para mí todo un reto tratar de hacer un tutorial de Hibernate con Netbeans.
Por otra parte, tiene sus ventajas: no voy a poder dar nada por asumido, dado que no sé nada de nada. He estado haciendo unas pruebas y tal, pero no he conseguido nada funcional. Vamos a ver qué tal el tutorial.
No voy a tratar de explicar Hibernate. Eso ya lo hace muy bien la gente de Hibernate (y tienen muy buenos tutoriales). Este tutorial trata exclusivamente de ver qué diferencias hay entre el citado tutorial y NetBeans.
Tan solo matizar que voy a suponer que estáis en un entorno GNU/Linux, bien Debian o Ubuntu." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://magmax.org/blog/hibernate-netbeans/" /><meta property="og:image" content="https://magmax.org/icons/favicon.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2010-02-13T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-01-28T00:00:00+00:00" /><meta property="og:site_name" content="El blog de MagMax" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://magmax.org/icons/favicon.png"/>

<meta name="twitter:title" content="Hibernate con Netbeans"/>
<meta name="twitter:description" content="Soy nuevo en esto de Hibernate, y tampoco he trabajado demasiado con Netbeans. Por eso es para mí todo un reto tratar de hacer un tutorial de Hibernate con Netbeans.
Por otra parte, tiene sus ventajas: no voy a poder dar nada por asumido, dado que no sé nada de nada. He estado haciendo unas pruebas y tal, pero no he conseguido nada funcional. Vamos a ver qué tal el tutorial.
No voy a tratar de explicar Hibernate. Eso ya lo hace muy bien la gente de Hibernate (y tienen muy buenos tutoriales). Este tutorial trata exclusivamente de ver qué diferencias hay entre el citado tutorial y NetBeans.
Tan solo matizar que voy a suponer que estáis en un entorno GNU/Linux, bien Debian o Ubuntu."/>
<meta name="application-name" content="My cool site">
<meta name="apple-mobile-web-app-title" content="My cool site"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://magmax.org/blog/hibernate-netbeans/" /><link rel="prev" href="https://magmax.org/blog/tablas-gtk-cambio-seleccion/" /><link rel="next" href="https://magmax.org/blog/experimentos-quimica/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Hibernate con Netbeans",
        "inLanguage": "es",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/magmax.org\/blog\/hibernate-netbeans\/"
        },"genre": "posts","keywords": "hibernate, netbeans, java ide","wordcount":  1531 ,
        "url": "https:\/\/magmax.org\/blog\/hibernate-netbeans\/","datePublished": "2010-02-13T00:00:00+00:00","dateModified": "2021-01-28T00:00:00+00:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "Miguel Ángel"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="El blog de MagMax"><img
        class="lazyload logo"
        src="/svg/loading.min.svg"
        data-src="/icons/favicon.png"
        data-srcset="/icons/favicon.png, /icons/favicon.png 1.5x, /icons/favicon.png 2x"
        data-sizes="auto"
        alt="/icons/favicon.png"
        title="/icons/favicon.png" />MagMax Blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/"> Inicio </a><a class="menu-item" href="/posts"> Posts </a><a class="menu-item" href="/tags"> Tags </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="Cambia el tema">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a><a href="javascript:void(0);" class="menu-item language" title="Selecciona el lenguage">
                    <i class="fa fa-globe" aria-hidden="true"></i>                      
                    <select class="language-select" id="language-select-desktop" onchange="location = this.value;"><option value="/blog/hibernate-netbeans/" selected>Español</option></select>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="El blog de MagMax"><img
        class="lazyload logo"
        src="/svg/loading.min.svg"
        data-src="/icons/favicon.png"
        data-srcset="/icons/favicon.png, /icons/favicon.png 1.5x, /icons/favicon.png 2x"
        data-sizes="auto"
        alt="/icons/favicon.png"
        title="/icons/favicon.png" />MagMax Blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/" title="">Inicio</a><a class="menu-item" href="/posts" title="">Posts</a><a class="menu-item" href="/tags" title="">Tags</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Cambia el tema">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a><a href="javascript:void(0);" class="menu-item" title="Selecciona el lenguage">
                    <i class="fa fa-globe fa-fw" aria-hidden="true"></i>
                    <select class="language-select" onchange="location = this.value;"><option value="/blog/hibernate-netbeans/" selected>Español</option></select>
                </a></div>
    </div>
</header><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contenido</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Hibernate con Netbeans</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Miguel Ángel</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="13 Feb 2010">13 Feb 2010</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;1531 palabras&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;8 minutos&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contenido</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#pasos-previos">Pasos previos</a>
      <ul>
        <li><a href="#netbeans">NetBeans</a></li>
        <li><a href="#plugin-hibernate">Plugin hibernate</a></li>
        <li><a href="#servidor-hsqldb">Servidor HSQLDB</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#configuración-de-la-conexión">Configuración de la conexión</a></li>
        <li><a href="#helpers">Helpers</a></li>
        <li><a href="#primera-clase">Primera clase</a></li>
        <li><a href="#el-mapping-file">El &ldquo;Mapping File&rdquo;</a></li>
        <li><a href="#clase-main">Clase Main</a></li>
      </ul>
    </li>
    <li><a href="#posibles-problemas">Posibles problemas</a>
      <ul>
        <li><a href="#socket-creation-error">socket creation error</a></li>
        <li><a href="#no-currentsessioncontext-configured">No CurrentSessionContext configured!</a></li>
        <li><a href="#unknown-entity-hbtutorialpersona">Unknown entity: hbtutorial.Persona</a></li>
        <li><a href="#table-not-found-in-statement">Table not found in statement</a></li>
      </ul>
    </li>
    <li><a href="#distintas-filosofías">Distintas filosofías</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>Soy nuevo en esto de Hibernate, y tampoco he trabajado demasiado con Netbeans. Por eso es para mí todo un reto tratar de hacer un tutorial de Hibernate con Netbeans.</p>
<p>Por otra parte, tiene sus ventajas: no voy a poder dar nada por asumido, dado que no sé nada de nada. He estado haciendo unas pruebas y tal, pero no he conseguido nada funcional. Vamos a ver qué tal el tutorial.</p>
<p>No voy a tratar de explicar Hibernate. Eso ya lo hace muy bien la gente de Hibernate (y tienen <a href="https://docs.jboss.org/hibernate/core/3.3/reference/en/html/tutorial.html" target="_blank" rel="noopener noreffer ">muy buenos tutoriales</a>). Este tutorial trata exclusivamente de ver qué diferencias hay entre el citado tutorial y NetBeans.</p>
<p>Tan solo matizar que voy a suponer que estáis en un entorno GNU/Linux, bien Debian o Ubuntu.</p>
<figure><img src="/images/hibernate.jpg"
         alt="Hibernate"/>
</figure>

<h2 id="pasos-previos">Pasos previos</h2>
<p>Antes de comenzar necesitamos unas cuantas herramientas:</p>
<ul>
<li><a href="https://netbeans.org/" target="_blank" rel="noopener noreffer ">NetBeans</a>. Uso la versión 6.8.</li>
<li>El plugin para <a href="https://netbeans.org/" target="_blank" rel="noopener noreffer ">NetBeans</a> con hibernate</li>
<li>Un servidor hsqldb.</li>
</ul>
<p>Como voy a empezar desde el principio, veamos qué es cada cosa. Si eres muy listo te lo puedes saltar.</p>
<h3 id="netbeans">NetBeans</h3>
<p>Descargaos <a href="https://netbeans.org/" target="_blank" rel="noopener noreffer ">NetBeans</a>. De los &ldquo;sabores&rdquo; a elegir&hellip; pues realmente da igual. Por ser masocas vamos a elegir Java SE, que es el que menos cosas tiene.</p>
<p>Cuando lo tengáis, basta con ejecutar el programa que os habéis descargado:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ ./netbeans-6.8-ml-javase-linux.sh
</code></pre></td></tr></table>
</div>
</div><p>seguramente se os habrá instalado en /usr/local/netbeans-6.8, así que ejecutamos:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ /usr/local/netbeans-6.8/bin/netbeans
</code></pre></td></tr></table>
</div>
</div><h3 id="plugin-hibernate">Plugin hibernate</h3>
<p>Para mi horror, han traducido &ldquo;hibernate&rdquo; como &ldquo;hibernar&rdquo;, por lo que no os extrañe si véis &ldquo;hibernar&rdquo; donde deberían haber puesto &ldquo;hibernate&rdquo;.</p>
<p>Dentro de <a href="https://netbeans.org/" target="_blank" rel="noopener noreffer ">NetBeans</a>, vamos a <em>Herramientas-&gt;Complementos</em>, en el tab <em>&ldquo;Plugins disponibles&rdquo;</em> buscamos &ldquo;hibernate&rdquo;. Si no lo encontramos, nos vamos a la pestaña <em>&ldquo;Instalado&rdquo;</em>. El caso es que lo marcamos y comprobamos que se encuentre instalado y activado.</p>
<h3 id="servidor-hsqldb">Servidor HSQLDB</h3>
<p>GNU/Linux es muy complicado. Para instalaros el servidor, tenéis que seguir tooooooodos los siguientes pasos:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># apt-get install hsqldb-server</span>
</code></pre></td></tr></table>
</div>
</div><p>Tened cuidado, a ver si os vais a saltar algún paso&hellip; En fin. Ahora hay que echarlo a andar:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># /etc/init.d/hsqldb-server restart</span>
</code></pre></td></tr></table>
</div>
</div><p>Si queréis ver dónde está escuchando, mirad en <em>/etc/hsqldb/sqltool.rc</em>. Os harán falta privilegios de superusuario. Por defecto será algo como <em>jdbc:hsqldb:https://localhost:8080/</em>.</p>
<h1 id="programando">Programando</h1>
<p>Volvamos a NetBeans.</p>
<p>Creamos un proyecto, al que vamos a llamar &ldquo;hbtutorial&rdquo;. Será una aplicación java sin más historia.</p>
<h3 id="configuración-de-la-conexión">Configuración de la conexión</h3>
<p>Ahora necesitamos configurar la conexión. Para ello hay distintas formas: un archivo <em>properties</em>, un archivo <em>XML</em> o incluso de forma <em>programática</em>. Vamos a usar la forma &ldquo;NetBeans&rdquo;, que también es la más extendida y un término medio entre potencia y sencillez: XML.</p>
<p>Para ello añadiremos un nuevo fichero al proyecto. El tipo será &ldquo;otro&rdquo;, para que nos salga el asistente. Dentro de este asistente tendremos que buscar la categoría <em>&ldquo;hibernate&rdquo;</em> y el tipo de archivo <em>&ldquo;Asistente para la configuración de Hibernate&rdquo;</em>. Pulsamos &ldquo;siguiente&rdquo;.</p>
<p>Dejaremos el nombre por defecto (<em>hibernate.cfg</em>), ya que no nos va a afectar demasiado, y volvemos a pulsar &ldquo;siguiente&rdquo;.</p>
<p>Aquí viene lo más complicado de todo. En la <em>Conexión con base de datos</em>, seleccionaremos <em>Nueva Conexión con Base de datos&hellip;</em>, con lo que se nos abrirá un nuevo asistente. El controlador va a ser <em>Nuevo controlador</em>, lo que volverá a abrir, una vez más, un asistente. Agregaremos <code>/usr/share/java/hsqldb.jar</code>. Veréis que se rellenan todos los campos, así que podemos aceptar. Estaremos en la ventana de nueva conexión, así que seleccionamos el controlador &ldquo;HSQLDB&rdquo; (In-Memory), nombre de usuario <em>&ldquo;sa&rdquo;</em> (acordaos del archivo <code>/etc/hsqldb/sqltool.rc</code>) y la URL de consexión <code>jdbc:hsqldb:https://localhost:8080/</code>. Pulsamos aceptar y debería conectar sin problemas.</p>
<p>Nos abrirá el editor de XML que vamos a ignorar de momento.</p>
<h3 id="helpers">Helpers</h3>
<p>Vamos a añadir un helper. Para ello volvemos a añadir un archivo, categoría <code>hibernate</code>, tipo de archivo <strong>HibernateUtil.java</strong>. El nombre de la clase será <code>HibernateUtil</code>, y lo metemos en el paquete <code>hbtutorial</code>. Si cotilleais, veréis que es una factory sin más.</p>
<h3 id="primera-clase">Primera clase</h3>
<p>Vamos a crearnos una clase para transformarla en una tabla. Vamos a definir una persona. Para ello añadimos un nuevo archivo, de categoría <strong>Java</strong>, de tipo <strong>Java Class</strong>, llamada <code>Persona</code> y en el paquete <code>hbtutorial</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">hbtutorial</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.Serializable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.Entity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.GeneratedValue</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.Id</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Persona</span> <span class="kd">implements</span> <span class="n">Serializable</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">Long</span> <span class="n">id</span><span class="o">;</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="n">nombre</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">apellido1</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">apellido2</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">email</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">telefono</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Hemos dicho que vamos a <em>usar</em> hibernate, ¿no? Pues al lío. Ahora <code>ALT+insertar</code> o bien botón derecho del ratón y seleccionamos <strong>&ldquo;Insertar código&rdquo;</strong>. Seleccionamos <strong>&ldquo;Getter y Setter&rdquo;</strong> y marcamos directamente la clase (lo que marcará todo). pulsamos aceptar y nos generará un montón de funciones. Buscamos la función <code>setId</code> y, como recomienda la gente de Hibernate, la hacemos privada para no equivocarnos en el futuro.</p>
<p>Además, vamos a hacer que el nombre sea obligatorio. Para ello, volvemos a pulsar ALT+Insertar y seleccionamos &ldquo;Constructor&rdquo;. En la lista de campos, seleccionamos sólo el nombre y así tenemos que el constructor nos está exigiendo el nombre.</p>
<h3 id="el-mapping-file">El &ldquo;Mapping File&rdquo;</h3>
<p>Vamos a mapear nuestra clase contra una tabla. Para ello volvemos a crear un nuevo archivo, de categoría <code>hibernate</code> y de tipo <strong>Asistente de mapas de hibernate</strong>, que llamaremos <em>&ldquo;persona.hbm&rdquo;</em> y guardaremos en <em>&ldquo;src&rdquo;</em>. La clase a mapear es la única que tenemos: <code>hbtutorial.Persona</code>. Y no hay tabla que seleccionar, así que hemos terminado.</p>
<p>La verdad es que nos ha servido para poco&hellip; Tendré que investigar cómo se hace esto. Mas adelante me ha dado problemas y he tenido que sustituir el archivo por el siguiente:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span class="cp">&lt;!DOCTYPE hibernate-mapping PUBLIC &#34;-//Hibernate/Hibernate Mapping DTD 3.0//EN&#34;
</span><span class="cp">  &#34;https://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd&#34;&gt;</span>
<span class="nt">&lt;hibernate-mapping</span> <span class="na">package=</span><span class="s">&#34;hbtutorial&#34;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">&#34;hbtutorial.Persona&#34;</span> <span class="na">table=</span><span class="s">&#34;persona&#34;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;id</span> <span class="na">name=</span><span class="s">&#34;id&#34;</span> <span class="na">column=</span><span class="s">&#34;PERSON_ID&#34;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;generator</span> <span class="na">class=</span><span class="s">&#34;native&#34;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;nombre&#34;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;apellido1&#34;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;apellido2&#34;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;email&#34;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;telefono&#34;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/hibernate-mapping&gt;</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="clase-main">Clase Main</h3>
<p>Ahora nos vamos al archivo <em>&ldquo;Main.java&rdquo;</em>, que será donde tengamos la clase principal, y vamos a ver si somos capaces de crear alguna <code>Persona</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">hbtutorial</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.hibernate.Criteria</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hibernate.Session</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="o">[]</span> <span class="n">people</span> <span class="o">=</span> <span class="o">{</span><span class="s">&#34;Paco&#34;</span><span class="o">,</span> <span class="s">&#34;Juan&#34;</span><span class="o">};</span>
        <span class="n">String</span> <span class="o">[]</span> <span class="n">people2</span> <span class="o">=</span> <span class="o">{</span><span class="s">&#34;Maria&#34;</span><span class="o">,</span> <span class="s">&#34;Ana&#34;</span><span class="o">};</span>

        <span class="n">getPeople</span> <span class="o">();</span>
        <span class="n">addPeople</span> <span class="o">(</span> <span class="n">people</span> <span class="o">);</span>
        <span class="n">getPeople</span> <span class="o">();</span>
        <span class="n">addPeople</span> <span class="o">(</span> <span class="n">people2</span> <span class="o">);</span>
        <span class="n">getPeople</span> <span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addPeople</span> <span class="o">(</span><span class="n">String</span> <span class="o">[]</span> <span class="n">people</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Session</span> <span class="n">session</span> <span class="o">=</span> <span class="n">MyHibernateUtil</span><span class="o">.</span><span class="na">getSessionFactory</span><span class="o">().</span><span class="na">getCurrentSession</span><span class="o">();</span>

        <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">person</span> <span class="o">:</span> <span class="n">people</span><span class="o">)</span>
        <span class="o">{</span>
            <span class="n">session</span><span class="o">.</span><span class="na">beginTransaction</span> <span class="o">();</span>
            <span class="n">Persona</span> <span class="n">person_obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Persona</span> <span class="o">(</span> <span class="n">person</span> <span class="o">);</span>
            <span class="n">session</span><span class="o">.</span><span class="na">save</span> <span class="o">(</span> <span class="n">person_obj</span> <span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">getPeople</span> <span class="o">()</span> <span class="o">{</span>
        <span class="n">Session</span> <span class="n">session</span> <span class="o">=</span> <span class="n">MyHibernateUtil</span><span class="o">.</span><span class="na">getSessionFactory</span><span class="o">().</span><span class="na">getCurrentSession</span><span class="o">();</span>
        <span class="n">session</span><span class="o">.</span><span class="na">beginTransaction</span> <span class="o">();</span>
        <span class="n">Criteria</span> <span class="n">criteria</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">createCriteria</span> <span class="o">(</span> <span class="n">Persona</span><span class="o">.</span><span class="na">class</span> <span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span> <span class="o">(</span><span class="s">&#34;Personas encontradas:&#34;</span> <span class="o">+</span> <span class="n">criteria</span><span class="o">.</span><span class="na">list</span> <span class="o">().</span><span class="na">size</span> <span class="o">());</span>
        <span class="k">for</span> <span class="o">(</span> <span class="n">Object</span> <span class="n">persona_obj</span> <span class="o">:</span> <span class="n">criteria</span><span class="o">.</span><span class="na">list</span> <span class="o">()</span> <span class="o">)</span>
        <span class="o">{</span>
            <span class="n">Persona</span> <span class="n">persona</span> <span class="o">=</span> <span class="o">(</span><span class="n">Persona</span><span class="o">)</span> <span class="n">persona_obj</span><span class="o">;</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span> <span class="o">(</span> <span class="s">&#34; - &#34;</span> <span class="o">+</span> <span class="n">persona</span><span class="o">.</span><span class="na">getNombre</span> <span class="o">()</span> <span class="o">);</span>
        <span class="o">}</span>
        <span class="n">session</span><span class="o">.</span><span class="na">getTransaction</span> <span class="o">().</span><span class="na">commit</span> <span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Se puede observar que hay dos funciones estáticas que permiten añadir personas o bien obtener la lista de personas. Para demostrar que estamos añadiendo personas, lo que he hecho es llamar a la función de obtención de personas 2 veces, y obtendremos un resultado similar a éste:</p>
<pre tabindex="0"><code>Personas encontradas:0
Personas encontradas:2
 - Paco
 - Juan
Personas encontradas:4
 - Paco
 - Juan
 - Maria
 - Ana
</code></pre><h2 id="posibles-problemas">Posibles problemas</h2>
<h3 id="socket-creation-error">socket creation error</h3>
<p>Probablemente no hayamos levantado el servidor.</p>
<h3 id="no-currentsessioncontext-configured">No CurrentSessionContext configured!</h3>
<p>Podemos configurar Hibernate para que lo haga automáticamente, añadiendo al <code>hibernate.cfg.xml</code> la propiedad siguiente:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;current_session_context_class&#34;</span><span class="nt">&gt;</span>thread<span class="nt">&lt;/property&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>Después tendremos que limpiar el proyecto antes de volver a probar.</p>
<h3 id="unknown-entity-hbtutorialpersona">Unknown entity: hbtutorial.Persona</h3>
<p>Por alguna razón, no está encontrando el archivo <em>&ldquo;Persona.hbm.xml&rdquo;</em>. Comprobad nombres, asegurad que está referenciado desde el <em>&ldquo;hibernate.cfg.xml&rdquo;</em> como un mapping, &hellip;.</p>
<h3 id="table-not-found-in-statement">Table not found in statement</h3>
<p>Hemos tratado de acceder, pero la tabla no se ha creado aún. Probad a hacer un insert en la tabla antes de hacer un criteria. Si eso no funcionara, probad con</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;hibernate.hbm2ddl.auto&#34;</span><span class="nt">&gt;</span>update<span class="nt">&lt;/property&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>o bien:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;hibernate.hbm2ddl.auto&#34;</span><span class="nt">&gt;</span>create<span class="nt">&lt;/property&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>Mucho ojo con estas claves&hellip; Informaros bien antes de usar el &ldquo;create&rdquo; o podréis perder datos.</p>
<h2 id="distintas-filosofías">Distintas filosofías</h2>
<p>He descubierto que con Hibernate hay dos maneras de hacer las cosas:</p>
<ul>
<li>Partir del XML de mappings, con el que se generarán los POJOs y se puede configurar Hibernate para crear automáticamente la base de datos.</li>
<li>Partir de la base de datos, desde la que obtenemos por ingeniería inversa el XML y los POJOs.</li>
</ul>
<p>En mi opinión, la última de las opciones está bien cuando ya tenemos un sistema que no usa Hibernate y queremos importarlo rápidamente, pero no debería ser la opción habitual.</p>
<p>Por temas de mantenimiento, considero que es mejor mantener el XML y generar los POJOs por cada modificación. Esto es algo que se puede automatizar mediante Ant o Maven.</p>
<p>Un consejo es que cada POJO tenga asociada una clase que herede de él y que será donde hagamos todas las modificaciones que necesitemos. A menudo estas clases se llaman como el POJO pero acabados en I mayúscula.</p>
<p>Tengo que investigar más sobre cómo obtener los POJOs a partir del mapping file, ya que no debe ser difícil. Os lo contaré en otro artículo (si alguien lo sabe, bienvenido sea&hellip;).</p></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Actualizado el 28 Jan 2021</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Compartir en Twitter" data-sharer="twitter" data-url="https://magmax.org/blog/hibernate-netbeans/" data-title="Hibernate con Netbeans" data-hashtags="hibernate,netbeans,java ide"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Compartir en Facebook" data-sharer="facebook" data-url="https://magmax.org/blog/hibernate-netbeans/" data-hashtag="hibernate"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Compartir en Linkedin" data-sharer="linkedin" data-url="https://magmax.org/blog/hibernate-netbeans/"><i class="fab fa-linkedin fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Compartir en WhatsApp" data-sharer="whatsapp" data-url="https://magmax.org/blog/hibernate-netbeans/" data-title="Hibernate con Netbeans" data-web><i class="fab fa-whatsapp fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Compartir en Tumblr" data-sharer="tumblr" data-url="https://magmax.org/blog/hibernate-netbeans/" data-title="Hibernate con Netbeans" data-tags="hibernate,netbeans,java ide"><i class="fab fa-tumblr fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Compartir en Reddit" data-sharer="reddit" data-url="https://magmax.org/blog/hibernate-netbeans/"><i class="fab fa-reddit fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Compartir en Instapaper" data-sharer="instapaper" data-url="https://magmax.org/blog/hibernate-netbeans/" data-title="Hibernate con Netbeans" data-description=""><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/instapaper.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Compartir en 微博" data-sharer="weibo" data-url="https://magmax.org/blog/hibernate-netbeans/" data-title="Hibernate con Netbeans"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Compartir en Blogger" data-sharer="blogger" data-url="https://magmax.org/blog/hibernate-netbeans/" data-title="Hibernate con Netbeans" data-description=""><i class="fab fa-blogger fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/hibernate/">hibernate</a>,&nbsp;<a href="/tags/netbeans/">netbeans</a>,&nbsp;<a href="/tags/java-ide/">java ide</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Regresar</a></span>&nbsp;|&nbsp;<span><a href="/">Inicio</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/blog/tablas-gtk-cambio-seleccion/" class="prev" rel="prev" title="Tablas GTK: realizar una acción al cambiar la selección"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>Tablas GTK: realizar una acción al cambiar la selección</a>
            <a href="/blog/experimentos-quimica/" class="next" rel="next" title="Experimentos de química">Experimentos de química<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
<div id="comments"><div id="disqus_thread" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://disqus.com/?ref_noscript">Disqus</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Con la tecnología de <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.92.2">Hugo</a> | Tema - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2022</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Miguel Ángel</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Volver arriba">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="Ver comentarios">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css"><script type="text/javascript" src="https://magmax.disqus.com/embed.js" defer></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/copy-tex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/mhchem.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copiar al portapapeles","maxShownLines":50},"comment":{},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false}};</script><script type="text/javascript" src="/js/theme.min.js"></script><script type="text/javascript">
            window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());
            gtag('config', 'UA-9308241-3', { 'anonymize_ip': true });
        </script><script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=UA-9308241-3" async></script></body>
</html>
