<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>Niveles de automatización - El blog de MagMax</title><meta name="Description" content="Artículo sobre los diferentes niveles de automatización: documentación, script, cron, monitorización, alertas, ...
"><meta property="og:title" content="Niveles de automatización" />
<meta property="og:description" content="Artículo sobre los diferentes niveles de automatización: documentación, script, cron, monitorización, alertas, ...
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://magmax.org/blog/niveles-de-automatizacion/" />
<meta property="og:image" content="https://magmax.org/icons/favicon.png"/>
<meta property="article:published_time" content="2014-09-17T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-01-28T00:00:00+00:00" /><meta property="og:site_name" content="El blog de MagMax" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://magmax.org/icons/favicon.png"/>

<meta name="twitter:title" content="Niveles de automatización"/>
<meta name="twitter:description" content="Artículo sobre los diferentes niveles de automatización: documentación, script, cron, monitorización, alertas, ...
"/>
<meta name="application-name" content="El blog de MagMax">
<meta name="apple-mobile-web-app-title" content="El blog de MagMax"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://magmax.org/blog/niveles-de-automatizacion/" /><link rel="prev" href="https://magmax.org/blog/redondeos-matematicos/" /><link rel="next" href="https://magmax.org/blog/jenkins-again/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Niveles de automatización",
        "inLanguage": "es",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/magmax.org\/blog\/niveles-de-automatizacion\/"
        },"genre": "posts","keywords": "automation, engineering","wordcount":  2116 ,
        "url": "https:\/\/magmax.org\/blog\/niveles-de-automatizacion\/","datePublished": "2014-09-17T00:00:00+00:00","dateModified": "2021-01-28T00:00:00+00:00","publisher": {
            "@type": "Organization",
            "name": "Miguel Ángel"},"author": {
                "@type": "Person",
                "name": "Miguel Ángel"
            },"description": "Artículo sobre los diferentes niveles de automatización: documentación, script, cron, monitorización, alertas, ...\n"
    }
    </script></head>
    <body header-desktop="" header-mobile=""><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="El blog de MagMax"><img
        class="lazyload logo"
        src="/svg/loading.min.svg"
        data-src="/icons/favicon.png"
        data-srcset="/icons/favicon.png, /icons/favicon.png 1.5x, /icons/favicon.png 2x"
        data-sizes="auto"
        alt="/icons/favicon.png"
        title="/icons/favicon.png" />MagMax Blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/"> Inicio </a><a class="menu-item" href="/tags"> Tags </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item language" title="Selecciona el lenguage">Español<i class="fas fa-chevron-right fa-fw"></i>
                        <select class="language-select" id="language-select-desktop" onchange="location = this.value;"><option value="/blog/niveles-de-automatizacion/" selected>Español</option></select>
                    </a><a href="javascript:void(0);" class="menu-item theme-switch" title="Cambia el tema">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="El blog de MagMax"><img
        class="lazyload logo"
        src="/svg/loading.min.svg"
        data-src="/icons/favicon.png"
        data-srcset="/icons/favicon.png, /icons/favicon.png 1.5x, /icons/favicon.png 2x"
        data-sizes="auto"
        alt="/icons/favicon.png"
        title="/icons/favicon.png" />MagMax Blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/" title="">Inicio</a><a class="menu-item" href="/tags" title="">Tags</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Cambia el tema">
                <i class="fas fa-adjust fa-fw"></i>
            </a><a href="javascript:void(0);" class="menu-item" title="Selecciona el lenguage">Español<i class="fas fa-chevron-right fa-fw"></i>
                    <select class="language-select" onchange="location = this.value;"><option value="/blog/niveles-de-automatizacion/" selected>Español</option></select>
                </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contenido</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">Niveles de automatización</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>Miguel Ángel</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="17 Sep 2014">17 Sep 2014</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;2116 palabras&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;10 minutos&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>Contenido</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#estructura">Estructura</a></li>
    <li><a href="#niveles">Niveles</a>
      <ul>
        <li><a href="#nivel-1-documentación">Nivel 1: Documentación</a></li>
        <li><a href="#nivel-2-script">Nivel 2: Script</a></li>
        <li><a href="#nivel-3-script-automatizado">Nivel 3: Script automatizado</a>
          <ul>
            <li><a href="#nivel-31-temporización">Nivel 3.1: Temporización</a></li>
            <li><a href="#nivel-32-replicabilidad">Nivel 3.2: Replicabilidad</a></li>
            <li><a href="#nivel-33-monitorización-y-alertas">Nivel 3.3: Monitorización y alertas</a></li>
            <li><a href="#nivel-34-autorecovery">Nivel 3.4: Autorecovery</a></li>
          </ul>
        </li>
        <li><a href="#nivel-4-sistemas-autónomos">Nivel 4: Sistemas autónomos</a></li>
      </ul>
    </li>
    <li><a href="#nomenclatura">Nomenclatura</a></li>
    <li><a href="#conclusiones">Conclusiones</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>Hace poco escribí un <a href="https://twitter.com/magmax_en/status/505777648493416448" target="_blank" rel="noopener noreffer">twit sobre los niveles de automatización</a>. Desgraciadamente, en 140 caracteres no podía meter todo lo que me gustaría y tampoco podía corregir el error cometido, a pesar de ser importante. Aunque parece que nadie se dio cuenta :D</p>
<p>Pero para eso tengo mi blog.</p>
<p>Aquí contaré cómo veo yo los distintos niveles de automatización, desde la automatización más básica a la más avanzada, con ejemplos y software que puede ayudar a obtener ese nivel.</p>
<p>Faltarán cosas&hellip; Sobre todo programas. Agradecería si pudiérais completarlo en comentarios. Si es software privativo, es bienvenido si la entrada no es publicidad cantosa; pero si es libre, mucho mejor.</p>
<figure>
    <img src="/images/engineering.jpg"/> 
</figure>

<h2 id="estructura">Estructura</h2>
<p>Desgraciadamente, los niveles no son lineales. O al menos, no del todo.</p>
<p>De hecho, habrá ciertos niveles que nunca se puedan alcanzar, como acciones que
se realizan una única vez, que no estarán dentro de un <a href="https://es.wikipedia.org/wiki/Cron*%28Unix%29" target="_blank" rel="noopener noreffer">cron</a> (aunque es posible
que estén dentro de <a href="https://puppetlabs.com/" target="_blank" rel="noopener noreffer">Puppet</a> y éste, dentro de <a href="https://es.wikipedia.org/wiki/Cron*%28Unix%29" target="_blank" rel="noopener noreffer">cron</a>).</p>
<p>Por ello, puede decirse que la automatización sigue este esquema:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-text" data-lang="text">+--------------------------------------------------+
|                   Documentación                  |
+--------------------------------------------------+
|                      Script                      |
+--------------------------------------------------+
|                |                | Monitorización |
| Temporización  |  Replicación   +----------------+
|                |                |  Autorecovery  |
+--------------------------------------------------+
|                Sistemas Autónomos                |
+--------------------------------------------------+
</code></pre></td></tr></table>
</div>
</div><h2 id="niveles">Niveles</h2>
<h3 id="nivel-1-documentación">Nivel 1: Documentación</h3>
<p>El nivel más básico de automatización es la documentación. ¿Quién no le ha mandado a un amigo unas instrucciones sobre cómo debe hacer algo?</p>
<p>Podría decirse que ésta es la razón de que creara este blog: documentar cosas típicas que me voy encontrando para no tener que repetirlas. Creo que desde entonces ha evolucionado un poco :D</p>
<p>Es habitual que todo el software de usuario incluya documentación enumerando paso a paso cómo hacer algo. Éste es el espíritu del nivel documental. Manuales de usuario, FAQs, tutoriales, etc.</p>
<p>Problemas de la documentación:</p>
<ul>
<li>Puede <strong>quedarse obsoleta</strong>. Es lógico, ya que&hellip;</li>
<li>&hellip; casi nunca se puede <strong>probar</strong>.</li>
<li>Es <strong>propensa a errores</strong>. Imagine un operario de una central nuclear leyendo el manual ante una alerta de fusión del núcleo; lo más probable es que lea deprisa y puede saltarse pasos importantes.</li>
<li>Es <strong>aburrida</strong>. ¿Quién se ha leído el manual de su reloj?</li>
<li>Habitualmente, no tiene <strong>control de versiones</strong>, ya que se usan formatos como Word, PDF, etc. en lugar de formatos tipo texto.</li>
<li>Es <strong>lento</strong>, y si hay que repetirlo, requerirá casi el mismo tiempo que la primera vez.</li>
</ul>
<p>Para ayudarnos tenemos distintas herramientas de generación de documentación,
como <a href="https://pypi.python.org/pypi/Sphinx" target="_blank" rel="noopener noreffer">Sphinx</a>, <a href="https://www.oracle.com/technetwork/java/javase/documentation/index-jsp-135444.html" target="_blank" rel="noopener noreffer">Javadoc</a> o más genérica, como <a href="https://www.stack.nl/~dimitri/doxygen/" target="_blank" rel="noopener noreffer">Doxygen</a>.</p>
<h3 id="nivel-2-script">Nivel 2: Script</h3>
<p>Si tenemos un tutorial que indica paso por paso cómo instalar un programa&hellip; ¿Por qué no <em>scriptarlo</em>? Basta con transformar cada uno de esos puntos en una función de un <em>script</em> e invocar a cada una de estas funciones de manera secuencial. Es decir: basta con <strong>formalizar la documentación</strong>.</p>
<p>Ejemplos de software en este nivel son todos los programas de instalación, ya que van paso por paso ejecutando acciones. Algunas veces requieren la acción del usuario para tomar decisiones o para introducir algún valor.</p>
<p>Este nivel tiene algunas ventajas sobre el de documentación:</p>
<ul>
<li>Se puede <strong>probar</strong>.</li>
<li><strong>No es propenso a errores</strong>, al menos para el flujo básico. Si funciona una vez, el ordenador no se saltará pasos ni los hará en distinto orden.</li>
<li><strong>No requiere acción</strong> por parte del usuario, más allá de saber si requiere algún parámetro o saber responder alguna pregunta.</li>
<li>Puede meterse en un <strong>control de versiones</strong>.</li>
<li>Se puede distribuir a otras máquinas, es decir, es <strong>replicable</strong>.</li>
<li><strong>Ahorra tiempo</strong>. Una vez escrito, no es necesario saber qué hace por dentro (¿Alguien sabe qué ocurre al hacer un <code>git init</code>?)</li>
</ul>
<p>Sin embargo, también tiene problemas:</p>
<ul>
<li>Requiere la presencia del <strong>usuario</strong>.</li>
<li>Su replicación, habitualmente requerirá <strong>documentación</strong>, devolviéndonos al nivel anterior.</li>
<li>Puede quedarse <strong>obsoleto</strong>. Que se pueda probar no significa que haya pruebas ni que alguien lo pruebe.</li>
</ul>
<p>Estos tres problemas son, exactamente, los que se tratan de solucionar en el nivel siguiente.</p>
<h3 id="nivel-3-script-automatizado">Nivel 3: Script automatizado</h3>
<p>En este nivel hay 3 partes. No tienen por qué cumplirse las 3 y tampoco tienen que hacerse en un orden determinado. Pero son 3 partes bien diferenciadas que conviene identificar:</p>
<h4 id="nivel-31-temporización">Nivel 3.1: Temporización</h4>
<p>Con el fin de evitar la <strong>presencia del usuario</strong>, se pueden utilizar archivos de configuración y provocar que nuestro script se ejecute cada cierto intervalo de tiempo.</p>
<p>Para esta tarea suele puede utilizar <a href="https://es.wikipedia.org/wiki/Cron*%28Unix%29" target="_blank" rel="noopener noreffer">cron</a>, <a href="https://packages.debian.org/wheezy/admin/at" target="_blank" rel="noopener noreffer">at</a> o <a href="https://anacron.sourceforge.net/" target="_blank" rel="noopener noreffer">anacron</a>.</p>
<p>Este conocimiento hubiera facilitado mucho la vida de Desmond en la isla de
<a href="https://es.wikipedia.org/wiki/Lost" target="_blank" rel="noopener noreffer">Perdidos (Lost)</a> :D.</p>
<h4 id="nivel-32-replicabilidad">Nivel 3.2: Replicabilidad</h4>
<p>No sé cómo llamar a este nivel. Hay gente que se refiere a él como <strong>&ldquo;orquestación&rdquo;</strong>, pero no estoy hablando de la gestión de numerosas máquinas, sino de la realización de pequeñas acciones. Claro, que es la realización de estas pequeñas acciones las que permiten esos sistemas dignos de ser <em>orquestados</em>.</p>
<p>La distribución de nuestro script en distintas máquinas puede implicar distintas
cosas: Puede ser una distribución para que el usuario lo instale (como hacen las
conocidas <a href="https://en.wikipedia.org/wiki/App*store" target="_blank" rel="noopener noreffer">App Stores</a>) o de manera automática (<a href="https://puppetlabs.com/" target="_blank" rel="noopener noreffer">Puppet</a>, <a href="https://www.getchef.com/" target="_blank" rel="noopener noreffer">Chef</a>, <a href="https://www.saltstack.com/community/" target="_blank" rel="noopener noreffer">SaltStack</a>, &hellip;).</p>
<p>Estamos hablando de automatización, así que me centraré en esta última: cuando la distribución es automática, también puede serlo su ejecución, en cuyo caso este nivel podría englobar también el de <strong>Temporización</strong>.</p>
<p>La decisión podríamos estar tomándola cuando utilizamos el software de
orquestación: ¿Debe ser <a href="https://puppetlabs.com/" target="_blank" rel="noopener noreffer">Puppet</a> quien lo ejecute o sólo debe instalarlo en un
<a href="https://es.wikipedia.org/wiki/Cron*%28Unix%29" target="_blank" rel="noopener noreffer">cron</a>?</p>
<p>Cuando hablo de &ldquo;replicabilidad&rdquo; no me refiero sólo a la distribución, sino a
asegurar que no ocurre el efecto <strong>&ldquo;en mi máquina funciona&rdquo;</strong>. Una forma de
conseguir replicabilidad es utilizar un sistema de &ldquo;jaulas&rdquo; con todo el sistema,
de manera que se ejecuten entornos aislados como un todo. Para ello se pueden
utilizar <strong>Máquinas virtuales</strong>(<a href="https://www.virtualbox.org/" target="_blank" rel="noopener noreffer">VirtualBox</a>, <a href="https://www.vagrantup.com/" target="_blank" rel="noopener noreffer">Vagrant</a>, &hellip;), <strong>containers</strong>
(<a href="https://linuxcontainers.org/" target="_blank" rel="noopener noreffer">lxc</a>, <a href="https://www.docker.com/" target="_blank" rel="noopener noreffer">Docker</a> o, a menor escala, <a href="https://pypi.python.org/pypi/virtualenv" target="_blank" rel="noopener noreffer">VirtualEnv</a>, <a href="https://bundler.io/" target="_blank" rel="noopener noreffer">Bundle</a>) o simples listas de
instalación (<a href="https://pypi.python.org/pypi/pip" target="_blank" rel="noopener noreffer">pip</a>, <a href="https://bower.io/" target="_blank" rel="noopener noreffer">bower</a>, &hellip;).</p>
<p>La gestión de estos entornos aislados dan para otro post. Pueden ser de distintos tipos:</p>
<ul>
<li>Gestión de <strong>artefactos específicos</strong>, como puede ser un repositorio Debian,
compatible con la aplicación cliente (<a href="https://es.wikipedia.org/wiki/Advanced_Packaging_Tool" target="_blank" rel="noopener noreffer">apt</a>).</li>
<li>Gestión de <strong>artefactos genéricos</strong>, como <a href="https://www.sonatype.org/nexus/" target="_blank" rel="noopener noreffer">Nexus</a>, <a href="https://www.jfrog.com/open-source/" target="_blank" rel="noopener noreffer">Artifactory</a>, &hellip;</li>
<li>Gestión y <strong>creación de máquinas virtuales</strong> y sistemas de red completos:
<a href="https://mesos.apache.org/" target="_blank" rel="noopener noreffer">Mesos</a>.</li>
</ul>
<h4 id="nivel-33-monitorización-y-alertas">Nivel 3.3: Monitorización y alertas</h4>
<p>Puede considerarse la ejecución del script como una prueba del mismo. Por lo tanto, ¿por qué no monitorizarlo?</p>
<p>La monitorización con alertas nos avisará en dos circunstancias: cuando el elemento monitorizado no tiene los valores que debe o bien cuando el script que obtiene ese valor da problemas. Es como tener un <em>téster</em> constante.</p>
<p>La monitorización puede tener distintas formas, de más sencilla a más compleja:</p>
<ul>
<li>Comprobación de que el <strong>proceso</strong> está corriendo.</li>
<li>Comprobación de un puerto o del <strong>efecto</strong> que debe producir el script.</li>
<li>Lectura de los <strong>archivos de log</strong> para comprobar que van cambiando de la manera esperada.</li>
<li>Generación de estadísticas y posterior comprobación de las mismas para ver <strong>tendencias</strong>.</li>
</ul>
<p>Y lo mismo ocurre con las alertas:</p>
<ul>
<li>Una <a href="https://www.youtube.com/watch?v=1nBg2pk_XFY" target="_blank" rel="noopener noreffer">alarma todo va bien de Homer Simpsom</a>, que nos mande un mail cada vez que acaba de manera exitosa. Esto requiere una comprobación manual que nos devuelve al nivel 1 :D</li>
<li>Un sistema cliente/servidor con interfaz web, como pueda ser <a href="https://www.nagios.org/" target="_blank" rel="noopener noreffer">Nagios</a>,
<a href="https://www.icinga.org/" target="_blank" rel="noopener noreffer">Icinga</a>, <a href="https://pandorafms.com/" target="_blank" rel="noopener noreffer">Pandora</a>, <a href="https://www.zabbix.com/es/" target="_blank" rel="noopener noreffer">Zabbix</a>, <a href="https://sensuapp.org/" target="_blank" rel="noopener noreffer">Sensu</a>, <a href="https://riemann.io/" target="_blank" rel="noopener noreffer">Riemann</a>, <a href="https://cabotapp.com/" target="_blank" rel="noopener noreffer">Cabot</a>, &hellip;</li>
<li>Un sistema distinto para monitorización (<a href="https://munin-monitoring.org/" target="_blank" rel="noopener noreffer">Munin</a>, &hellip;) y alertas (<a href="https://flapjack.io/" target="_blank" rel="noopener noreffer">FlapJack</a>, &hellip;)</li>
<li>Un sistema de agrupación de datos (<a href="https://graphite.wikidot.com/" target="_blank" rel="noopener noreffer">Graphite</a>), monitorización sobre el mismo y alertas.</li>
</ul>
<p>Y también con la <em>forma de las alertas</em>: mail, alerta en un panel, SMS, llamada pregrabada, servicio de mensajería instantánea, tícket, etc.</p>
<p>El tema de la monitorización y alertado es toda una ciencia, ya que puede tener numerosas implicaciones: servicios de 24x7, guardias, releases con alertas a ignorar, &hellip;</p>
<p>Un sistema de alertas deficiente puede provocar dos efectos nocivos:</p>
<ul>
<li>Que se <strong>pierdan alertas</strong>, de manera que un proceso crítico no esté atendido. Es algo que ocurrirá tarde o temprano, y la solución es añadir una alerta nueva.</li>
<li>Que lleguen <strong>demasiadas alertas</strong>, de manera que las críticas se mezclan con las normales. Es mucho peor que el anterior y la solución no suele ser nada sencilla.</li>
</ul>
<h4 id="nivel-34-autorecovery">Nivel 3.4: Autorecovery</h4>
<p>Pero&hellip; ¿Qué ocurre cuando llega una alerta?</p>
<p>Pues que entra en marcha un nuevo proceso automatizable: la resolución.</p>
<p>Ésta puede ser:</p>
<ul>
<li><strong>Completamente manual</strong>: llega la alerta y hay que investigar dónde está el problema.</li>
<li><strong>Documentada</strong>: junto con la alerta llega la solución (o una URL con la misma).</li>
<li><strong>Automática</strong>: al recibir la alerta, se lanza un proceso que intenta recuperarse del problema.</li>
</ul>
<p>Algunas medidas que pueden tomarse:</p>
<ul>
<li>Si es un servicio y se ha muerto, puede <strong>volver a lanzarse</strong>.</li>
<li>Si es un servicio y no responde en un puerto, quizá pueda <strong>reiniciarse</strong>.</li>
<li>Si es una máquina que no responde, quizá dispongamos de <strong>alta disponibilidad</strong> (High Availability) y otro servidor pueda ocupar su lugar.</li>
<li>Si tenemos balanceo de carga y el sistema está sobredimensionado, es posible que no se requiera acción inmediata.</li>
</ul>
<p>También hay software que nos ayuda en este caso: <a href="https://supervisord.org/" target="_blank" rel="noopener noreffer">supervisord</a>, <a href="https://www.haproxy.org/" target="_blank" rel="noopener noreffer">HAProxy</a>,
<a href="https://tldp.org/HOWTO/TCP-Keepalive-HOWTO/overview.html" target="_blank" rel="noopener noreffer">KeepAlive</a>, <a href="https://mmonit.com/monit/" target="_blank" rel="noopener noreffer">Monit</a>, &hellip;</p>
<p>Es importante que el <em>autorecovery</em> quede documentado de alguna manera. De esta forma se pueden indentificar fallos periódicos (por ejemplo, &ldquo;el servidor se cae todos los días a las 00:00&rdquo;). Este registro puede tener la forma de mail, log, etc.</p>
<p>Es más: Si se puede mezclar la hora del <em>autorecovery</em> con el resto de gráficas, mucho mejor, de manera que se quede automáticamente aclarado un problema; por ejemplo, que un pico de la gráfica de memoria se debe a un reinicio de tal servicio.</p>
<h3 id="nivel-4-sistemas-autónomos">Nivel 4: Sistemas autónomos</h3>
<p>Este artículo puede leerse de dos maneras. La primera es leerlo como la automatización de un script, y la segunda, como un sistema considerablemente más grande: una máquina, una red, una organización.</p>
<blockquote>
<p>El todo se compone de cada una de las partes.</p>
</blockquote>
<p>En el caso de un script, una vez es distribuido automáticamente y monitorizado, la automatización ya es completa.</p>
<p>Sin embargo, en el caso de una máquina aún falta otro detalle: Si es necesario entrar a la máquina para algo, entonces aún no se ha automatizado completamente. Esto tiene muchas implicaciones:</p>
<ul>
<li>Debe existir un sistema de logs centralizado y externo al sistema autónomo.
Una solución típica es usar <a href="https://logstash.net/" target="_blank" rel="noopener noreffer">logstash</a> + <a href="https://www.elasticsearch.org/" target="_blank" rel="noopener noreffer">elastic search</a> + <a href="https://www.elasticsearch.org/overview/kibana/" target="_blank" rel="noopener noreffer">kibana</a> para
guardar los logs y <a href="https://www.rsyslog.com/" target="_blank" rel="noopener noreffer">rsyslog</a> para enviar los logs del sistema.</li>
<li>El sistema de monitorización y alertas debe ser igualmente centralizado y externo al sistema autónomo.</li>
<li>El despliegue de todos los servicios del sistema autónomo debe ser automático.</li>
<li>Deben existir políticas de <em>autorecovery</em> muy fuertes.</li>
</ul>
<h2 id="nomenclatura">Nomenclatura</h2>
<p>Propongo medir el nivel de automatización de un sistema mediante la siguiente nomenclatura:</p>
<ul>
<li>El literal &ldquo;A&rdquo;, de &ldquo;Automation&rdquo;</li>
<li>Un número, indicando el nivel.</li>
<li>En el caso del nivel 3, un conjunto de letras, siendo &rsquo;t' para temporización, &lsquo;r&rsquo; para Replicación,  &rsquo;m' para monitorización y &lsquo;a&rsquo; para <em>autorecovery</em>. De esta manera se pueden combinar en &lsquo;ta&rsquo; para <em>autorecovery</em> y temporización, etc. En este caso es importante seguir el orden: &rsquo;t', &lsquo;r&rsquo;, &rsquo;m', &lsquo;a&rsquo;.</li>
</ul>
<p>Aquí está la tabla completa de nomenclatura</p>
<table>
<thead>
<tr>
<th>Código</th>
<th>Significado</th>
</tr>
</thead>
<tbody>
<tr>
<td>A0</td>
<td>No tiene ningún tipo de automatización</td>
</tr>
<tr>
<td>A1</td>
<td>Hay documentación</td>
</tr>
<tr>
<td>A2</td>
<td>Existe un script para hacer el trabajo</td>
</tr>
<tr>
<td>A3.t</td>
<td>El script se ejecuta cada cierto tiempo</td>
</tr>
<tr>
<td>A3.r</td>
<td>El script se replica a otras máquinas</td>
</tr>
<tr>
<td>A3.m</td>
<td>Existe monitorización</td>
</tr>
<tr>
<td>A3.a</td>
<td>Existe <em>autorecovery</em></td>
</tr>
<tr>
<td>A3.tr</td>
<td>El script se replica a otras máquinas y ejecuta cada cierto tiempo</td>
</tr>
<tr>
<td>A3.tm</td>
<td>El script se ejecuta cada cierto tiempo y está monitorizado</td>
</tr>
<tr>
<td>A3.ta</td>
<td>El script se ejecuta cada cierto tiempo y en caso de fallo se arregla sólo</td>
</tr>
<tr>
<td>A3.rm</td>
<td>El script se replica a otras máquinas y está temporizado</td>
</tr>
<tr>
<td>A3.ra</td>
<td>El script se replica a otras máquinas y tiene <em>autorecovery</em></td>
</tr>
<tr>
<td>A3.ma</td>
<td>El script tiene monitorización y <em>autorecovery</em></td>
</tr>
<tr>
<td>A3.trm</td>
<td>Temporización, replicación y monitorización</td>
</tr>
<tr>
<td>A3.tra</td>
<td>Temporización, replicación y <em>autorecovery</em></td>
</tr>
<tr>
<td>A3.tma</td>
<td>Temporización, monitorización y <em>autorecovery</em></td>
</tr>
<tr>
<td>A3.rma</td>
<td>Replicación, monitorización y <em>autorecovery</em></td>
</tr>
<tr>
<td>A3.trma</td>
<td>Temporización, Replicación, monitorización y <em>autorecovery</em></td>
</tr>
<tr>
<td>A4</td>
<td>Sistema autónomo</td>
</tr>
</tbody>
</table>
<p>De esta manera se pueden especificar los <strong>KPI</strong> (<em>Key Performance Indicator</em>) de la siguiente forma: &ldquo;Conseguir A2 en el build y A3.rm en el despliegue&rdquo;.</p>
<h2 id="conclusiones">Conclusiones</h2>
<p>Montar un sistema autónomo es difícil, pero las ventajas son enormes. A mayor automatización, mayor velocidad en el resto de procesos. Si un <em>push</em> en un repositorio desencadena todo un flujo de tareas que termina en el despliegue en producción o en una alerta en mi buzón si hay algún error, provocará que cada trabajador pueda publicar decenas de versiones en un solo día, y que las implicaciones de los errores sean mucho menores.</p>
<p>El otro día hablaba con David y me decía que <strong>&ldquo;el software está vivo&rdquo;</strong>. Es una gran verdad que hay que tener en cuenta a la hora de diseñar nuestro sistema automático: debe ser propenso al cambio.</p>
<p>Ésta es una diferencia entre los administradores de sistemas actuales y los de
antaño: hoy día deben abrazar los <a href="https://agilemanifesto.org/" target="_blank" rel="noopener noreffer">principios del manifiesto ágil</a> y abrazar el cambio. Se acabó lo de &ldquo;si funciona no lo toques&rdquo;.</p></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Actualizado el 28 Jan 2021</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Compartir en Twitter" data-sharer="twitter" data-url="https://magmax.org/blog/niveles-de-automatizacion/" data-title="Niveles de automatización" data-hashtags="automation,engineering"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="Compartir en Facebook" data-sharer="facebook" data-url="https://magmax.org/blog/niveles-de-automatizacion/" data-hashtag="automation"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="Compartir en Linkedin" data-sharer="linkedin" data-url="https://magmax.org/blog/niveles-de-automatizacion/"><i class="fab fa-linkedin fa-fw"></i></a><a href="javascript:void(0);" title="Compartir en WhatsApp" data-sharer="whatsapp" data-url="https://magmax.org/blog/niveles-de-automatizacion/" data-title="Niveles de automatización" data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href="javascript:void(0);" title="Compartir en Tumblr" data-sharer="tumblr" data-url="https://magmax.org/blog/niveles-de-automatizacion/" data-title="Niveles de automatización" data-caption="Artículo sobre los diferentes niveles de automatización: documentación, script, cron, monitorización, alertas, ...
" data-tags="automation,engineering"><i class="fab fa-tumblr fa-fw"></i></a><a href="javascript:void(0);" title="Compartir en Reddit" data-sharer="reddit" data-url="https://magmax.org/blog/niveles-de-automatizacion/"><i class="fab fa-reddit fa-fw"></i></a><a href="javascript:void(0);" title="Compartir en Instapaper" data-sharer="instapaper" data-url="https://magmax.org/blog/niveles-de-automatizacion/" data-title="Niveles de automatización" data-description="Artículo sobre los diferentes niveles de automatización: documentación, script, cron, monitorización, alertas, ...
"><i data-svg-src="/lib/simple-icons/icons/instapaper.min.svg"></i></a><a href="javascript:void(0);" title="Compartir en Digg" data-sharer="digg" data-url="https://magmax.org/blog/niveles-de-automatizacion/"><i class="fab fa-digg fa-fw"></i></a><a href="javascript:void(0);" title="Compartir en Blogger" data-sharer="blogger" data-url="https://magmax.org/blog/niveles-de-automatizacion/" data-title="Niveles de automatización" data-description="Artículo sobre los diferentes niveles de automatización: documentación, script, cron, monitorización, alertas, ...
"><i class="fab fa-blogger fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/automation/">automation</a>,&nbsp;<a href="/tags/engineering/">engineering</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Regresar</a></span>&nbsp;|&nbsp;<span><a href="/">Inicio</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/blog/redondeos-matematicos/" class="prev" rel="prev" title="Redondeos matemáticos"><i class="fas fa-angle-left fa-fw"></i>Redondeos matemáticos</a>
            <a href="/blog/jenkins-again/" class="next" rel="next" title="Primeros pasos en Jenkins">Primeros pasos en Jenkins<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Provisto por <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.79.1">Hugo</a> | Tema - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2021</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Miguel Ángel</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Volver arriba">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="Ver comentarios">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/katex/katex.min.css"><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript" src="/lib/katex/katex.min.js"></script><script type="text/javascript" src="/lib/katex/auto-render.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copiar al portapapeles","maxShownLines":10},"comment":{},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false}};</script><script type="text/javascript" src="/js/theme.min.js"></script><script type="text/javascript">
            window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());
            gtag('config', 'UA-9308241-3', { 'anonymize_ip': true });
        </script><script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=UA-9308241-3" async></script></body>
</html>
