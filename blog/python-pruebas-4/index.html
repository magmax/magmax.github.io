<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Python: Cómo hacer pruebas 4: pyDoubles | El blog de MagMax</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="Tras las peticiones populares , no puedo evitar escribir este post antes de lo que esperaba.
Es la continuación del artículo Python: Cómo hacer pruebas(3), que parece haber tenido bastante éxito.
En este caso vamos a ver los dobles de prueba, y utilizaremos, cómo no, pyDoubles , creado principalmente por Carlos Blé y disponible en Debian gracias a mi buen amigo David Villa.
Actualización 2011-11-16: Corrijo el significado de las siglas F.">
    <meta name="generator" content="Hugo 0.79.1" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.4fc0b62e4b82c997bb0041217cd6b979.css" rel="stylesheet">
    

    

    
      

    

    
    
    <meta property="og:title" content="Python: Cómo hacer pruebas 4: pyDoubles" />
<meta property="og:description" content="Tras las peticiones populares , no puedo evitar escribir este post antes de lo que esperaba.
Es la continuación del artículo Python: Cómo hacer pruebas(3), que parece haber tenido bastante éxito.
En este caso vamos a ver los dobles de prueba, y utilizaremos, cómo no, pyDoubles , creado principalmente por Carlos Blé y disponible en Debian gracias a mi buen amigo David Villa.
Actualización 2011-11-16: Corrijo el significado de las siglas F." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://magmax.org/blog/python-pruebas-4/" />
<meta property="article:published_time" content="2011-11-09T00:00:00+00:00" />
<meta property="article:modified_time" content="2011-11-09T00:00:00+00:00" /><meta property="og:site_name" content="El blog de MagMax" />
<meta itemprop="name" content="Python: Cómo hacer pruebas 4: pyDoubles">
<meta itemprop="description" content="Tras las peticiones populares , no puedo evitar escribir este post antes de lo que esperaba.
Es la continuación del artículo Python: Cómo hacer pruebas(3), que parece haber tenido bastante éxito.
En este caso vamos a ver los dobles de prueba, y utilizaremos, cómo no, pyDoubles , creado principalmente por Carlos Blé y disponible en Debian gracias a mi buen amigo David Villa.
Actualización 2011-11-16: Corrijo el significado de las siglas F.">
<meta itemprop="datePublished" content="2011-11-09T00:00:00+00:00" />
<meta itemprop="dateModified" content="2011-11-09T00:00:00+00:00" />
<meta itemprop="wordCount" content="1808">



<meta itemprop="keywords" content="pydoubles,python testing," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Python: Cómo hacer pruebas 4: pyDoubles"/>
<meta name="twitter:description" content="Tras las peticiones populares , no puedo evitar escribir este post antes de lo que esperaba.
Es la continuación del artículo Python: Cómo hacer pruebas(3), que parece haber tenido bastante éxito.
En este caso vamos a ver los dobles de prueba, y utilizaremos, cómo no, pyDoubles , creado principalmente por Carlos Blé y disponible en Debian gracias a mi buen amigo David Villa.
Actualización 2011-11-16: Corrijo el significado de las siglas F."/>

	
  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        El blog de MagMax
      
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="" title="Inicio page">
              Inicio
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="../en" title="English page">
              English
            </a>
          </li>
          
        </ul>
      
      















    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked">
          
        POSTS
      </aside>
      




  <div id="sharing" class="mt3">

    
    <a href="https://www.facebook.com/sharer.php?u=https://magmax.org/blog/python-pruebas-4/" class="facebook no-underline" aria-label="share on Facebook">
      <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M28.765,50.32h6.744V33.998h4.499l0.596-5.624h-5.095  l0.007-2.816c0-1.466,0.14-2.253,2.244-2.253h2.812V17.68h-4.5c-5.405,0-7.307,2.729-7.307,7.317v3.377h-3.369v5.625h3.369V50.32z   M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;"/></svg>

    </a>

    
    
    <a href="https://twitter.com/share?url=https://magmax.org/blog/python-pruebas-4/&amp;text=Python:%20C%c3%b3mo%20hacer%20pruebas%204:%20pyDoubles" class="twitter no-underline" aria-label="share on Twitter">
      <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/></svg>

    </a>

    
    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://magmax.org/blog/python-pruebas-4/&amp;title=Python:%20C%c3%b3mo%20hacer%20pruebas%204:%20pyDoubles" class="linkedin no-underline" aria-label="share on LinkedIn">
      <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

    </a>
  </div>


      <h1 class="f1 athelas mt3 mb1">Python: Cómo hacer pruebas 4: pyDoubles</h1>
      
      
      <time class="f6 mv4 dib tracked" datetime="2011-11-09T00:00:00Z">November 9, 2011</time>

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><p>Tras las <a href="https://twitter.com/#!/programania/status/133533559779635200">peticiones populares</a> , no puedo evitar escribir este post antes de lo que esperaba.</p>
<p>Es la continuación del artículo <a href="https://magmax.org/blog/python-pruebas-3/">Python: Cómo hacer pruebas(3)</a>, que parece haber tenido bastante éxito.</p>
<p>En este caso vamos a ver los dobles de prueba, y utilizaremos, cómo no, <a href="https://www.pydoubles.org/">pyDoubles</a> , creado principalmente por <a href="https://www.carlosble.com/">Carlos Blé</a>  y disponible en Debian gracias a mi buen amigo <a href="https://arco.esi.uclm.es/~david.villa/">David Villa</a>.</p>
<p><em>Actualización 2011-11-16</em>: Corrijo el significado de las siglas F.I.R.S.T. (¡Gracias, David!).</p>
<!-- raw HTML omitted -->
<figure>
    <img src="/images/python.png"
         alt="Python"/> 
</figure>

<h2 id="qué-vamos-a-hacer">Qué vamos a hacer</h2>
<p>En las ocasiones anteriores me he centrado en pruebas unitarias de objetos que no tienen relación con el mundo exterior. Esto está muy bien, pero es una mala programación. En una programación más <em>pythónica</em> utilizaremos objetos. Montones de objetos. Y los objetos hablan entre ellos.</p>
<p>Una batería de pruebas unitarias que se precie tiene que cumplir las condiciones FIRST, a saber:</p>
<ul>
<li><em>Fast</em>, deben ejecutarse en unos pocos segundos.</li>
<li><em>Independant</em>, evitando el <em>scripting</em>: una prueba es independiente de todas las anteriores y, por tanto, pueden ejecutarse en cualquier orden.</li>
<li><em>Repeatable</em>, de manera que podemos ejecutarla dos o más veces seguidas sin que afecte al resultado.</li>
<li><em>Self-Validating</em>, dando un valor booleano por respuesta, y evitando así buscar esta respuesta en un mar de logs.</li>
<li><em>Timely</em>, en el momento adecuado; de nada sirve escribir los tests <em>después</em> del código, ya que éste puede resultar difícil de probar.</li>
</ul>
<p>Podéis consultar la definición original de estas reglas en el libro &ldquo;Clean Code&rdquo;, de Robert C. Martin, al final del capítulo 9, &ldquo;Unit Tests&rdquo;, páginas 130-131.</p>
<p>Supongamos por un momento que tenemos un objeto que depende de otro. ¿Cómo hacemos que sean las pruebas del primero sean independientes? Lo tenemos complicado. Bueno, pues aquí es donde entran los <em>dobles de pruebas</em>: Creamos un objeto que <em>parece</em> el original, pero que <em>no es</em> el original (bueno, o sí&hellip; ya lo veremos).</p>
<p>Puedo aseguraros que me ha resultado difícil encontrar un ejemplo en el que relacionar dos objetos, con un dominio conocido por todos, pequeño y sencillo, de manera que resulte altamente didáctico&hellip; Y resulta que tenía el caso justo enfrente de mí :D. Vamos a implementar un pequeño <em>sistema de ficheros</em> muy muy básico. Vamos a centrarnos en un <em>directorio</em>. Y nos vamos a centrar en dos operaciones: <em>borrar</em> y <em>cambiar permisos</em>. Claro&hellip; Tenemos el problema de que un directorio depende fuertemente de otros directorios y de archivos, pero no quiero meterme en la implementación de los archivos&hellip; ¿Cómo lo hacemos?</p>
<h2 id="archivos">Archivos</h2>
<p>Como he dicho, no queremos meternos en la implementación de archivos, así que esto es lo que vamos a necesitar (lo copio aquí para no estar repitiéndolo todo el rato):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Archivo</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">borrar</span>(self):
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span>        <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">NotImplementedError</span>(<span style="color:#e6db74">&#34;no lo vamos a necesitar&#34;</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">cambiar_permisos</span>(self, permisos):
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span>        <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">NotImplementedError</span>(<span style="color:#e6db74">&#34;no lo vamos a necesitar&#34;</span>)
</code></pre></div><p>Como véis, si llegáramos a entrar en alguna de las funciones, nuestros tests fallarían estrepitosamente. Tenemos que ser capaces de probarlo sin usar el archivo real.</p>
<h2 id="las-pruebas">Las Pruebas&hellip;</h2>
<p>Para probarlo voy a usar <a href="https://readthedocs.org/docs/nose/en/latest/">nose</a> , ¡¡que para eso expliqué <a href="https://magmax.org/blog/python-pruebas-3/">en el artículo anterior</a> cómo usarlo!!.</p>
<p>El problema de <em>nose</em> es que la clase de pruebas debe estar arriba del todo. Tenedlo en cuenta a la hora de ir componiendo los tests&hellip;</p>
<h2 id="directorios">Directorios</h2>
<p>Asumamos que nuestro código es <em>legacy</em> y ya teníamos las clases escritas&hellip; Así me ahorro bastante tiempo XD. Ahí va la clase Directorio:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Directorio</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span>    <span style="color:#66d9ef">def</span> __init__(self):
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span>        self<span style="color:#f92672">.</span>contenido <span style="color:#f92672">=</span> []
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">borrar</span>(self):
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span>        <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> self<span style="color:#f92672">.</span>contenido:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span>            x<span style="color:#f92672">.</span>borrar()
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">anadir</span>(self, objeto):
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>        self<span style="color:#f92672">.</span>contenido<span style="color:#f92672">.</span>append(objeto)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">cambiar_permisos</span>(self, permisos):
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span>        <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> self<span style="color:#f92672">.</span>contenido:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span>            x<span style="color:#f92672">.</span>cambiar_permisos(permisos)
</code></pre></div><h2 id="probando-que-es-gerundio">Probando, que es gerundio</h2>
<h3 id="añadiendo">Añadiendo</h3>
<p>Pues ya tenemos nuestros Directorios, (no) tenemos nuestros Archivos&hellip; ¡¡Vamos a probarlo!! Voy a necesitar una prueba de la que no os he hablado, y es que para probar que borramos, necesitamos añadir. ¿Estará funcionando correctamente este método? (nuevamente recuerdo que los tests deben ir al principio del archivo para que <em>nose</em> funcione):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span style="color:#f92672">import</span> unittest
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span style="color:#f92672">from</span> pyDoubles.framework <span style="color:#f92672">import</span> <span style="color:#f92672">*</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">testSeBorrarDirectorios</span> (unittest<span style="color:#f92672">.</span>TestCase):
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test_probamos_que_anadimos</span>(self):
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span>        archivo <span style="color:#f92672">=</span> stub(Archivo())
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span>        sut <span style="color:#f92672">=</span> Directorio()
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>        sut<span style="color:#f92672">.</span>anadir(archivo)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span>        self<span style="color:#f92672">.</span>assertTrue (archivo <span style="color:#f92672">in</span> sut<span style="color:#f92672">.</span>contenido)
</code></pre></div><p>¿Qué ha ocurrido aquí? ¿Qué es todo eso?</p>
<p>Bueno, es más sencillo de lo que parece. Lo que hacemos es usar pyDoubles, y por eso importamos todo lo que hay en el framework. Además, creamos una clase que hereda de <em>TestCase</em> para que se ejecuten las pruebas, y será en esta clase donde meteremos todos los tests.</p>
<p>El primero de los tests crea un archivo que no es un archivo&hellip; Es un &ldquo;<em>stub</em>&rdquo;. ¿Qué es eso?</p>
<p>Un <em>STUB</em> es un objeto que se comporta como el original, pero no es el original. Puede reemplazar un único método o un conjunto de ellos.</p>
<p>Como véis, lo que sea &ldquo;archivo&rdquo; no importa, ya que sólo me importa comprobar que, después, puedo recuperarlo. Técnicamente, y aprovechando la potencia de <em>Python</em> podría haber puesto cualquier cosa, pero usar un objeto pseudo-real es más claro. Si no me creéis, podéis comprobar que es un objeto de tipo Archivo.</p>
<p>Pero veamos el segundo ejemplo, que es más claro.</p>
<h3 id="borrando">Borrando</h3>
<p>En este caso vamos a borrar. Evidentemente, se tratará de un borrado recursivo, ya que si no pierde la gracia.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test_probamos_que_borramos</span>(self):
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>    archivo <span style="color:#f92672">=</span> spy(Archivo())
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span>    sut <span style="color:#f92672">=</span> Directorio()
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span>    sut<span style="color:#f92672">.</span>anadir(archivo)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span>    sut<span style="color:#f92672">.</span>borrar()
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8</span>    assert_that_method(archivo<span style="color:#f92672">.</span>borrar)<span style="color:#f92672">.</span>was_called()
</code></pre></div><p>Aquí no he usado un <em>stub</em>, sino un <em>spy</em>, un espía.</p>
<p>Los <em>SPY</em> o <em>spies</em> son dobles de prueba como los <em>stub</em>, solo que tienen post-condiciones. Es decir: se crean, se usan y después se comprueba que se usaron correctamente.</p>
<p>Precisamente por eso está la comprobación final, en la que compruebo que el método &ldquo;<em>borrar</em>&rdquo; del objeto &ldquo;<em>archivo</em>&rdquo; se llamó. ¿Qué hizo? Pues nada, porque era un objeto de coña :D</p>
<p>Una de las grandes ventajas de pyDoubles es lo semántico que resulta su uso. ¡¡Casi se puede leer!!</p>
<h3 id="cambiando-permisos">Cambiando permisos</h3>
<p>Ahora vamos con la segunda parte: comprobar que el cambio de permisos es recursivo. Es igual que el borrado, con la diferencia de que tenemos que pasar un parámetro:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test_cambiar_permisos_llama_con_valores_adecuados</span>(self):
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>    archivo <span style="color:#f92672">=</span> spy(Archivo())
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span>    sut <span style="color:#f92672">=</span> Directorio()
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span>    sut<span style="color:#f92672">.</span>anadir(archivo)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span>    sut<span style="color:#f92672">.</span>cambiar_permisos(<span style="color:#ae81ff">0777</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8</span>    assert_that_method(archivo<span style="color:#f92672">.</span>cambiar_permisos)<span style="color:#f92672">.</span>was_called()<span style="color:#f92672">.</span>with_args(<span style="color:#ae81ff">0777</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9</span>    assert_that_method(archivo<span style="color:#f92672">.</span>borrar)<span style="color:#f92672">.</span>was_never_called()
</code></pre></div><p>Como podemos observar, en este caso hemos vuelto a utilizar un espía. Aquí comprobamos que el método se llamó con los permisos indicados, y también que el método borrar no se llamó nunca. Esto no es ni necesario, pero lo he puesto por mostrar más capacidades de pyDoubles.</p>
<p>Lo mismo se podría hacer de otra manera ligeramente diferente:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test_cambiar_permisos_con_mock</span>(self):
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>    archivo <span style="color:#f92672">=</span> mock(Archivo())
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span>    expect_call(archivo<span style="color:#f92672">.</span>cambiar_permisos)<span style="color:#f92672">.</span>with_args(<span style="color:#ae81ff">0777</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span>    sut <span style="color:#f92672">=</span> Directorio()
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span>    sut<span style="color:#f92672">.</span>anadir(archivo)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span>    sut<span style="color:#f92672">.</span>cambiar_permisos(<span style="color:#ae81ff">0777</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9</span>    archivo<span style="color:#f92672">.</span>assert_that_is_satisfied()
</code></pre></div><p>Aquí he utilizado un <em>mock</em>. Un <em>mock</em> es un <em>stub</em> con precondiciones. Es decir: primero digo lo que va a pasar, ejecuto, y compruebo que ha pasado.</p>
<p>Tan solo nos quedaría ver los &ldquo;<em>proxyspy</em>&rdquo;, que son espías que llaman al objeto real.</p>
<h3 id="todo-junto">Todo junto</h3>
<p>Aquí tenéis todo el código de un tirón:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span style="color:#f92672">import</span> unittest
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span style="color:#f92672">from</span> pyDoubles.framework <span style="color:#f92672">import</span> <span style="color:#f92672">*</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">testSeBorrarDirectorios</span> (unittest<span style="color:#f92672">.</span>TestCase):
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test_probamos_que_anadimos</span>(self):
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span>        archivo <span style="color:#f92672">=</span> stub(Archivo())
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span>        sut <span style="color:#f92672">=</span> Directorio()
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>        sut<span style="color:#f92672">.</span>anadir(archivo)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span>        self<span style="color:#f92672">.</span>assertTrue (archivo <span style="color:#f92672">in</span> sut<span style="color:#f92672">.</span>contenido)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test_probamos_que_borramos</span>(self):
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span>        archivo <span style="color:#f92672">=</span> spy(Archivo())
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span>        sut <span style="color:#f92672">=</span> Directorio()
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span>        sut<span style="color:#f92672">.</span>anadir(archivo)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span>        sut<span style="color:#f92672">.</span>borrar()
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span>        assert_that_method(archivo<span style="color:#f92672">.</span>borrar)<span style="color:#f92672">.</span>was_called()
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test_cambiar_permisos_llama_con_valores_adecuados</span>(self):
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span>        archivo <span style="color:#f92672">=</span> spy(Archivo())
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span>        sut <span style="color:#f92672">=</span> Directorio()
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span>        sut<span style="color:#f92672">.</span>anadir(archivo)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span>        sut<span style="color:#f92672">.</span>cambiar_permisos(<span style="color:#ae81ff">0777</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span>        assert_that_method(archivo<span style="color:#f92672">.</span>cambiar_permisos)<span style="color:#f92672">.</span>was_called()<span style="color:#f92672">.</span>with_args(<span style="color:#ae81ff">0777</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span>        assert_that_method(archivo<span style="color:#f92672">.</span>borrar)<span style="color:#f92672">.</span>was_never_called()
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test_cambiar_permisos_con_mock</span>(self):
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34</span>        archivo <span style="color:#f92672">=</span> mock(Archivo())
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35</span>        expect_call(archivo<span style="color:#f92672">.</span>cambiar_permisos)<span style="color:#f92672">.</span>with_args(<span style="color:#ae81ff">0777</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36</span>        sut <span style="color:#f92672">=</span> Directorio()
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37</span>        sut<span style="color:#f92672">.</span>anadir(archivo)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39</span>        sut<span style="color:#f92672">.</span>cambiar_permisos(<span style="color:#ae81ff">0777</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41</span>        archivo<span style="color:#f92672">.</span>assert_that_is_satisfied()
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Archivo</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45</span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">borrar</span>(self):
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46</span>        <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">NotImplementedError</span>(<span style="color:#e6db74">&#34;no lo vamos a necesitar&#34;</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48</span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">cambiar_permisos</span>(self, permisos):
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49</span>        <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">NotImplementedError</span>(<span style="color:#e6db74">&#34;no lo vamos a necesitar&#34;</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Directorio</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53</span>    <span style="color:#66d9ef">def</span> __init__(self):
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54</span>        self<span style="color:#f92672">.</span>contenido <span style="color:#f92672">=</span> []
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56</span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">borrar</span>(self):
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57</span>        <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> self<span style="color:#f92672">.</span>contenido:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58</span>            x<span style="color:#f92672">.</span>borrar()
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60</span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">anadir</span>(self, objeto):
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61</span>        self<span style="color:#f92672">.</span>contenido<span style="color:#f92672">.</span>append(objeto)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63</span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">cambiar_permisos</span>(self, permisos):
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64</span>        <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> self<span style="color:#f92672">.</span>contenido:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65</span>            x<span style="color:#f92672">.</span>cambiar_permisos(permisos)
</code></pre></div><h2 id="respuestas-predefinidas">Respuestas predefinidas</h2>
<p>Habrá casos en los que necesitemos una respuesta determinada cuando se llame a un método, de manera que el algoritmo que estamos probando pueda continuar. Para ello podemos &ldquo;prediseñar&rdquo; métodos; ahí van diferentes maneras diferentes de hacerlo:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>objeto<span style="color:#f92672">.</span>metodo <span style="color:#f92672">=</span> method_returning(<span style="color:#ae81ff">9</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>objeto<span style="color:#f92672">.</span>metodo <span style="color:#f92672">=</span> method_raising(<span style="color:#a6e22e">NotImplementedError</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span>when(objeto<span style="color:#f92672">.</span>metodo)<span style="color:#f92672">.</span>then_return(<span style="color:#ae81ff">9</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span>when(objeto<span style="color:#f92672">.</span>metodo)<span style="color:#f92672">.</span>with_args(<span style="color:#ae81ff">5</span>)<span style="color:#f92672">.</span>then_return(<span style="color:#ae81ff">25</span>)
</code></pre></div><h2 id="cuestión-de-nomenclatura">Cuestión de nomenclatura</h2>
<p>La diferencia entre un <em>stub</em>, <em>mock</em> y <em>spy</em> es puramente teórica. Hay muchos <em>frameworks</em> que los confunden o ignoran. Yo, personalmente, utilizo siempre <em>spies</em>, ya que me parecen más intuitivos, aunque suelo llamarlos <em>mocks</em>, término con el que se suelen denominar globalmente a todos los dobles de prueba.</p>
<p>Hay más dobles de prueba, como los <em>Fake</em>, que son implementaciones completas de una interfaz pero con funcionalidad simplificada (imaginad una clase de acceso a base de datos que siempre devuelve datos fijos, sin acceder realmente). Si lo pensáis, un <em>stub</em> no es más que un <em>fake</em> automático XD. ¡¡Todos están relacionados!!</p>
<p>Así que, resumiendo:</p>
<ul>
<li>Es un <em>stub</em> si no se realizan comprobaciones.</li>
<li>Será un <em>mock</em> si tenemos precondiciones.</li>
<li>Un <em>spy</em> si tenemos postcondiciones.</li>
<li>Un <em>fake</em> si usamos un objeto que implementa la funcionalidad simplificada.</li>
</ul>
<p>Diré una cosa de corazón: llamadlos como queráis, pero no los mezcléis. La mezcla da lugar a métodos más complejos. Podéis usar distintos tipos en distintas pruebas, pero en una misma prueba, no los mezcléis. Y mucho menos con un único objeto.</p>
<h2 id="hamcrest-y-pydoubles">Hamcrest y pyDoubles</h2>
<p>Resulta que escribí el artículo anterior sabiendo lo que me hacía, y que
podemos combinar los <em>matchers</em> de <a href="https://code.google.com/p/hamcrest/">Hamcrest</a>  junto a pyDoubles&hellip; ¿Cómo?
Pues, por ejemplo, en el método <code>with_args</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>when(objeto<span style="color:#f92672">.</span>metodo)<span style="color:#f92672">.</span>with_args(instance_of(objeto))<span style="color:#f92672">.</span>then_return(<span style="color:#e6db74">&#39;hola, mundo&#39;</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>when(objeto<span style="color:#f92672">.</span>metodo)<span style="color:#f92672">.</span>with_args(any_of(starts_with(<span style="color:#e6db74">&#39;hola&#39;</span>), ends_with(<span style="color:#e6db74">&#39;mundo&#39;</span>))<span style="color:#f92672">.</span>then_return(<span style="color:#e6db74">&#39;hola, mundo&#39;</span>)
</code></pre></div><p>Como véis, hemos usado <code>instance_of</code>, <code>any_of</code>, <code>starts_with</code> y <code>ends_with</code>, que son <em>matchers</em> de <em>Hamcrest</em>.</p>
<h2 id="un-gran-poder-conlleva-una-gran-responsabilidad">Un gran poder conlleva una gran responsabilidad</h2>
<p>&hellip; como le dijo el Tío Ben a Peter Parker :D</p>
<p>Tenemos en nuestras manos una gran herramienta, pero debemos tener en cuenta que debemos usarlo con cuidado, de la misma manera que un mecánico no arregla todas las averías con el mismo martillo.</p>
<p>Hay ciertas reglas básicas que cumplir, con el fin de evitar terminar con pruebas terriblemente complejas o nos metamos en camisas de once varas.</p>
<ul>
<li><em>Nunca &ldquo;<em>mockeéis</em>&rdquo; un objeto que no sea vuestro.</em> De esta manera se evitan <em>mocks</em> interminables de todo <em>Hibernate</em> o cosas incluso peores. Es un fallo habitual en todo novato, y yo no fui la excepción.</li>
<li><em>Realizad <em>mocks</em> precisos</em>. Cuantas menos cosas reemplacéis, más estable será el test (en la terminología típica, &ldquo;los tests serán menos frágiles&rdquo;). Si estáis reemplazando muchos métodos, a lo mejor necesitáis un <em>fake</em>.</li>
</ul>
<h2 id="para-más-información">Para más información</h2>
<p>Podéis visitar <a href="https://www.pydoubles.org/">la web de pyDoubles</a> , la de <a href="https://code.google.com/p/hamcrest/">Hamcrest</a> , la de <a href="https://readthedocs.org/docs/nose/en/latest/">nose</a> , &hellip; O releer mis antiguos posts:</p>
<ul>
<li><a href="https://magmax.org/blog/python-pruebas-1/">Python: Cómo hacer pruebas(1)</a></li>
<li><a href="https://magmax.org/blog/python-pruebas-2/">Python: Cómo hacer pruebas(2)</a></li>
<li><a href="https://magmax.org/blog/python-pruebas-3/">Python: Cómo hacer pruebas(3)</a></li>
<li><a href="https://magmax.org/blog/asegura/">No comentes: ¡Asegura!</a></li>
<li><a href="https://magmax.org/blog/atheist-no-seas-credulo/">Atheist: No seas crédulo ¡¡Prueba!!</a></li>
</ul>
<p>No sé si me he dejado algo en el tintero. Tengo la sensación de que sí&hellip; sobre todo en las reglas a cumplir cuando usamos mocks. Toda contribución será bienvenida.</p>
<p>Un saludo!!</p>
<ul class="pa0">
  
   <li class="list">
     <a href="/tags/pydoubles" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">pydoubles</a>
   </li>
  
   <li class="list">
     <a href="/tags/python-testing" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">python testing</a>
   </li>
  
</ul>
<div class="mt6 instapaper_ignoref">
      
        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "magmax" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">Relacionado</p>
    <ul class="pa0 list">
	   
	     <li  class="mb2">
          <a href="/blog/python-pruebas-3/">Python: Cómo hacer pruebas 3: nose y hamcrest</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/python-pruebas-2/">Python: Cómo hacer pruebas 2: unittest</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/python-pruebas-1/">Python: Cómo hacer pruebas 1: doctest</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/asegura/">No comentes: ¡Asegura!</a>
        </li>
	    
    </ul>
</div>

</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://magmax.org/" >
    &copy;  El blog de MagMax 2021 
  </a>
    <div>














</div>
  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
