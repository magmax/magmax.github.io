<!DOCTYPE html>
<html prefix="
og: https://ogp.me/ns#
article: https://ogp.me/ns/article#
" lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Cache-Control" content="max-age=43200">
<meta http-equiv="ETag" content="b'1566322fc0722093b12eca5f1e9215a3ab6698c5'">
<title>JBehave | MagMax Blog</title>
<link href="/assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="/assets/css/code.css" rel="stylesheet" type="text/css">
<link href="/assets/css/colorbox.css" rel="stylesheet" type="text/css">
<link href="/assets/css/theme.css" rel="stylesheet" type="text/css">
<link href="/assets/css/custom.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="http://feeds.feedburner.com/magmax">
<link rel="canonical" href="http://magmax.org/blog/jbehave/">
<link rel="icon" href="/favicon_330.png" sizes="330x330">
<link rel="icon" href="/favicon.ico" sizes="16x16">
<link rel="icon" href="/favicon.png" sizes="128x128">
<meta name="author" content="Miguel Ángel García">
<link rel="prev" href="/blog/estatico-vs-dinamico/" title="Estático vs Dinámico" type="text/html">
<link rel="next" href="/blog/patron-singleton/" title="El patrón Singleton" type="text/html">
<meta property="og:site_name" content="MagMax Blog">
<meta property="og:title" content="JBehave">
<meta property="og:url" content="http://magmax.org/blog/jbehave/">
<meta property="og:description" content="Apesar de mi mal comienzo con JBehave , debo decir que le voy cogiendo el tranquillo.
JBehave consiste en un sistema para hacer BDD  en Java. En otras palabras: permite definir en un lenguaje no forma">
<meta property="og:type" content="article">
<meta property="article:author" content="Miguel Ángel García">
<meta property="article:published_time" content="2012-01-12T00:00:00+00:00">
<meta property="article:updated" content="2012-01-12T00:00:00">
<meta property="article:tag" content="java testing">
<meta property="article:tag" content="jbehave">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@magmax_en">
<meta name="twitter:creator" content="@magmax">
<meta name="twitter:title" content="MagMax Blog">
<meta name="twitter:description" content="El blog de un Ingeniero Informático: tutoriales, manuales, opiniones, comparativas, ...">
<meta name="twitter:url" content="http://magmax.org//blog/jbehave/">
<meta name="twitter:image" content="http://magmax.org/favicon.png">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Ir al contenido principal</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation"><div class="container">
<!-- This keeps the margins nice -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://magmax.org/">

        <span id="blog-title">MagMax Blog</span>
      </a>
    </div>
<!-- /.navbar-header -->
    <div class="collapse navbar-collapse navbar-ex1-collapse">
      <ul class="nav navbar-nav">
<li>
<a href="/">Inicio</a>
                </li>
<li>
<a href="/archive.html">Archivo</a>
                </li>
<li>
<a href="/categories">Categorías</a>
                </li>
<li>
<a href="/projects">Proyectos</a>
                </li>
<li>
<a href="/news">Posts Externos</a>

        
      </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>
<form class="navbar-form navbar-left" role="search" action="http://google.com/search" method="get">
<div class="form-group">
<input type="hidden" name="sitesearch" value="magmax.org"><input type="text" name="q" class="form-control" placeholder="Search / Buscar">
</div>
</form>
</li>

        <li style="margin-left:0">
          <a href="http://feeds.feedburner.com/magmax">
            <img src="/assets/images/rss.png" style="width:22px;height:22px"></a>
        </li>

        
      </ul>
</div>
<!-- /.navbar-collapse -->
  </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
  <div class="body-content">
    <div class="row">
      <div class="page-content col-md-9">
        
        <article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="https://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="/blog/jbehave/" class="u-url">JBehave</a></h1>
            <div class="metadata text-muted">
              <i class="glyphicon glyphicon-calendar"></i>
              <p class="dateline">
                <time class="published dt-published" datetime="2012-01-12T00:00:00+00:00" title="2012-01-12">2012-01-12</time>
                // <time class="updated dt-updated" datetime="2012-01-12T00:00:00" title="2012-01-12">2012-01-12</time></p>
              <p class="commentline">            <a href="/blog/jbehave/#disqus_thread" data-disqus-identifier="cache/posts/jbehave.html">Comments</a>

</p>
              <address class="vcard author"><a class="url fn" href="https://magmax.org">Miguel Ángel García</a></address>
            </div>
            <br></header><div class="e-content entry-content" itemprop="articleBody text">
            <div>
<p>Apesar de mi mal comienzo con <a class="reference external" href="http://jbehave.org/">JBehave</a> , debo decir que le voy cogiendo el tranquillo.</p>
<p>JBehave consiste en un sistema para hacer <a class="reference external" href="http://en.wikipedia.org/wiki/Behavior_Driven_Development">BDD</a>  en Java. En otras palabras: permite definir en un lenguaje no formal el comportamiento de la aplicación, utilizando expresiones regulares para transformarlo en un lenguaje formal.</p>
<!-- TEASER_END -->
<div class="section" id="ejemplo">
<h2>Ejemplo</h2>
<p>JBehave tiene cosas que no me gustan nada, pero también tiene otras que me gustan mucho. Veamos primero un ejemplito lo más pequeño que he sido capaz de hacerlo:</p>
<div class="section" id="pom-xml">
<h3>pom.xml</h3>
<p>Comenzaremos con el archivo POM necesario:</p>
<pre class="code xml"><a name="rest_code_00f50d6ac88f442885116d7e3ee56f73-1"></a><span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">"http://maven.apache.org/POM/4.0.0"</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
<a name="rest_code_00f50d6ac88f442885116d7e3ee56f73-2"></a>  <span class="na">xsi:schemaLocation=</span><span class="s">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span><span class="nt">&gt;</span>
<a name="rest_code_00f50d6ac88f442885116d7e3ee56f73-3"></a>    <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
<a name="rest_code_00f50d6ac88f442885116d7e3ee56f73-4"></a>
<a name="rest_code_00f50d6ac88f442885116d7e3ee56f73-5"></a>    <span class="nt">&lt;groupId&gt;</span>org.magmax<span class="nt">&lt;/groupId&gt;</span>
<a name="rest_code_00f50d6ac88f442885116d7e3ee56f73-6"></a>    <span class="nt">&lt;artifactId&gt;</span>jbehaveexample<span class="nt">&lt;/artifactId&gt;</span>
<a name="rest_code_00f50d6ac88f442885116d7e3ee56f73-7"></a>
<a name="rest_code_00f50d6ac88f442885116d7e3ee56f73-8"></a>    <span class="nt">&lt;version&gt;</span>1.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
<a name="rest_code_00f50d6ac88f442885116d7e3ee56f73-9"></a>    <span class="nt">&lt;packaging&gt;</span>jar<span class="nt">&lt;/packaging&gt;</span>
<a name="rest_code_00f50d6ac88f442885116d7e3ee56f73-10"></a>
<a name="rest_code_00f50d6ac88f442885116d7e3ee56f73-11"></a>    <span class="nt">&lt;name&gt;</span>jbehaveexample<span class="nt">&lt;/name&gt;</span>
<a name="rest_code_00f50d6ac88f442885116d7e3ee56f73-12"></a>    <span class="nt">&lt;url&gt;</span>http://maven.apache.org<span class="nt">&lt;/url&gt;</span>
<a name="rest_code_00f50d6ac88f442885116d7e3ee56f73-13"></a>
<a name="rest_code_00f50d6ac88f442885116d7e3ee56f73-14"></a>    <span class="nt">&lt;properties&gt;</span>
<a name="rest_code_00f50d6ac88f442885116d7e3ee56f73-15"></a>        <span class="nt">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="nt">&lt;/project.build.sourceEncoding&gt;</span>
<a name="rest_code_00f50d6ac88f442885116d7e3ee56f73-16"></a>
<a name="rest_code_00f50d6ac88f442885116d7e3ee56f73-17"></a>    <span class="nt">&lt;/properties&gt;</span>
<a name="rest_code_00f50d6ac88f442885116d7e3ee56f73-18"></a>
<a name="rest_code_00f50d6ac88f442885116d7e3ee56f73-19"></a>    <span class="nt">&lt;dependencies&gt;</span>
<a name="rest_code_00f50d6ac88f442885116d7e3ee56f73-20"></a>        <span class="nt">&lt;dependency&gt;</span>
<a name="rest_code_00f50d6ac88f442885116d7e3ee56f73-21"></a>            <span class="nt">&lt;groupId&gt;</span>junit<span class="nt">&lt;/groupId&gt;</span>
<a name="rest_code_00f50d6ac88f442885116d7e3ee56f73-22"></a>            <span class="nt">&lt;artifactId&gt;</span>junit<span class="nt">&lt;/artifactId&gt;</span>
<a name="rest_code_00f50d6ac88f442885116d7e3ee56f73-23"></a>            <span class="nt">&lt;version&gt;</span>4.10<span class="nt">&lt;/version&gt;</span>
<a name="rest_code_00f50d6ac88f442885116d7e3ee56f73-24"></a>            <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
<a name="rest_code_00f50d6ac88f442885116d7e3ee56f73-25"></a>
<a name="rest_code_00f50d6ac88f442885116d7e3ee56f73-26"></a>        <span class="nt">&lt;/dependency&gt;</span>
<a name="rest_code_00f50d6ac88f442885116d7e3ee56f73-27"></a>        <span class="nt">&lt;dependency&gt;</span>
<a name="rest_code_00f50d6ac88f442885116d7e3ee56f73-28"></a>            <span class="nt">&lt;groupId&gt;</span>org.jbehave<span class="nt">&lt;/groupId&gt;</span>
<a name="rest_code_00f50d6ac88f442885116d7e3ee56f73-29"></a>            <span class="nt">&lt;artifactId&gt;</span>jbehave-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
<a name="rest_code_00f50d6ac88f442885116d7e3ee56f73-30"></a>            <span class="nt">&lt;version&gt;</span>3.5.4<span class="nt">&lt;/version&gt;</span>
<a name="rest_code_00f50d6ac88f442885116d7e3ee56f73-31"></a>        <span class="nt">&lt;/dependency&gt;</span>
<a name="rest_code_00f50d6ac88f442885116d7e3ee56f73-32"></a>    <span class="nt">&lt;/dependencies&gt;</span>
<a name="rest_code_00f50d6ac88f442885116d7e3ee56f73-33"></a><span class="nt">&lt;/project&gt;</span>
</pre>
<p>Como veréis, he añadido la dependencia de JBehave.</p>
</div>
<div class="section" id="src-test-resources-org-magmax-jbehaveexample-my-95-example-story">
<h3>src/test/resources/org/magmax/jbehaveexample/my&amp;#95;example.story</h3>
<pre class="code cucumber"><a name="rest_code_678b26480e8c4a53991fde31debf12d0-1"></a><span class="nf">In order to show JBehave behaviour</span>
<a name="rest_code_678b26480e8c4a53991fde31debf12d0-2"></a><span class="nf">As a newbie</span>
<a name="rest_code_678b26480e8c4a53991fde31debf12d0-3"></a><span class="k">I </span><span class="nf">want to show this example</span>
<a name="rest_code_678b26480e8c4a53991fde31debf12d0-4"></a>
<a name="rest_code_678b26480e8c4a53991fde31debf12d0-5"></a><span class="k">Given </span><span class="nf">nothing special</span>
<a name="rest_code_678b26480e8c4a53991fde31debf12d0-6"></a><span class="k">When </span><span class="nf">field operand</span><span class="s">1</span><span class="nf"> contains </span><span class="s">1</span><span class="nf"></span>
<a name="rest_code_678b26480e8c4a53991fde31debf12d0-7"></a><span class="k">And </span><span class="nf">field operand</span><span class="s">2</span><span class="nf"> contains </span><span class="s">2</span><span class="nf"></span>
<a name="rest_code_678b26480e8c4a53991fde31debf12d0-8"></a><span class="k">And </span><span class="nf">I press on "</span><span class="s">sum</span><span class="nf">"</span>
<a name="rest_code_678b26480e8c4a53991fde31debf12d0-9"></a><span class="k">Then </span><span class="nf">it returns </span><span class="s">3</span><span class="nf"></span>
</pre>
<p>Como véis, parece una mini calculadora. Según la descripción, tendremos un campo "operand1" y otro "operand2", que parece que pueden contener enteros. Además, tiene que haber un botón "sum" y, en alguna parte, mostrar un "3". Admito todo tipo de críticas al respecto, pero recordad que se trata de algo sencillito.</p>
</div>
<div class="section" id="src-test-java-org-magmax-jbehaveexample-myexample-java">
<h3>src/test/java/org/magmax/jbehaveexample/MyExample.java</h3>
<pre class="code java"><a name="rest_code_1c3a9540be3343edb0293344fbb92d25-1"></a><span class="kn">package</span> <span class="nn">org.magmax.jbehaveexample</span><span class="p">;</span>
<a name="rest_code_1c3a9540be3343edb0293344fbb92d25-2"></a>
<a name="rest_code_1c3a9540be3343edb0293344fbb92d25-3"></a><span class="kn">import</span> <span class="nn">org.jbehave.core.configuration.Configuration</span><span class="p">;</span>
<a name="rest_code_1c3a9540be3343edb0293344fbb92d25-4"></a><span class="kn">import</span> <span class="nn">org.jbehave.core.junit.JUnitStory</span><span class="p">;</span>
<a name="rest_code_1c3a9540be3343edb0293344fbb92d25-5"></a><span class="kn">import</span> <span class="nn">org.jbehave.core.reporters.Format</span><span class="p">;</span>
<a name="rest_code_1c3a9540be3343edb0293344fbb92d25-6"></a><span class="kn">import</span> <span class="nn">org.jbehave.core.reporters.StoryReporterBuilder</span><span class="p">;</span>
<a name="rest_code_1c3a9540be3343edb0293344fbb92d25-7"></a>
<a name="rest_code_1c3a9540be3343edb0293344fbb92d25-8"></a><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyExample</span> <span class="kd">extends</span> <span class="n">JUnitStory</span> <span class="p">{</span>
<a name="rest_code_1c3a9540be3343edb0293344fbb92d25-9"></a>    <span class="nd">@Override</span>
<a name="rest_code_1c3a9540be3343edb0293344fbb92d25-10"></a>    <span class="kd">public</span> <span class="n">Configuration</span> <span class="nf">configuration</span><span class="p">()</span> <span class="p">{</span>
<a name="rest_code_1c3a9540be3343edb0293344fbb92d25-11"></a>        <span class="n">Configuration</span> <span class="n">result</span> <span class="o">=</span> <span class="kd">super</span><span class="p">.</span><span class="na">configuration</span><span class="p">();</span>
<a name="rest_code_1c3a9540be3343edb0293344fbb92d25-12"></a>        <span class="n">result</span><span class="p">.</span><span class="na">useStoryReporterBuilder</span><span class="p">(</span><span class="n">getStoryReporterBuilder</span><span class="p">());</span>
<a name="rest_code_1c3a9540be3343edb0293344fbb92d25-13"></a>        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<a name="rest_code_1c3a9540be3343edb0293344fbb92d25-14"></a>    <span class="p">}</span>
<a name="rest_code_1c3a9540be3343edb0293344fbb92d25-15"></a>
<a name="rest_code_1c3a9540be3343edb0293344fbb92d25-16"></a>    <span class="kd">private</span> <span class="n">StoryReporterBuilder</span> <span class="nf">getStoryReporterBuilder</span><span class="p">()</span> <span class="p">{</span>
<a name="rest_code_1c3a9540be3343edb0293344fbb92d25-17"></a>        <span class="n">StoryReporterBuilder</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StoryReporterBuilder</span><span class="p">();</span>
<a name="rest_code_1c3a9540be3343edb0293344fbb92d25-18"></a>        <span class="n">result</span><span class="p">.</span><span class="na">withFormats</span><span class="p">(</span><span class="n">Format</span><span class="p">.</span><span class="na">CONSOLE</span><span class="p">,</span> <span class="n">Format</span><span class="p">.</span><span class="na">HTML</span><span class="p">,</span> <span class="n">Format</span><span class="p">.</span><span class="na">STATS</span><span class="p">);</span>
<a name="rest_code_1c3a9540be3343edb0293344fbb92d25-19"></a>        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<a name="rest_code_1c3a9540be3343edb0293344fbb92d25-20"></a>    <span class="p">}</span>
<a name="rest_code_1c3a9540be3343edb0293344fbb92d25-21"></a><span class="p">}</span>
</pre>
<p>Éste es el archivo de historia. Será necesario uno por cada historia (aunque hay maneras de necesitar menos). Lo que se hace es indicar la configuración necesaria para probar la historia de forma correcta. Como véis, lo único que hago es establecer la configuración por defecto, indicando que quiero las salidas de Consola, Html y estadísticas. Realmente nos bastaba con Consola, pero así véis más cosas.</p>
</div>
<div class="section" id="primera-ejecucion">
<h3>Primera ejecución</h3>
<p>Con esto ya podemos ejecutar el ejemplo. Evidentemente fallará, pero debe dar un resultado similar al siguiente:</p>
<pre class="code cucumber"><a name="rest_code_ae32cb415ea942fda2d2e825768e0592-1"></a><span class="nf">Processing system properties {}</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-2"></a><span class="nf">Using controls EmbedderControls[batch=false,skip=false,generateViewAfterStories=true,ignoreFailureInStories=false,ignoreFailureInView=false,storyTimeoutInSecs=</span><span class="s">300</span><span class="nf">,threads=</span><span class="s">1</span><span class="nf">]</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-3"></a>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-4"></a><span class="nf">(BeforeStories)</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-5"></a>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-6"></a><span class="nf">Using </span><span class="s">1</span><span class="nf"> threads</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-7"></a><span class="nf">Using executor service java.util.concurrent.ThreadPoolExecutor</span><span class="nt">@64883c</span><span class="nf"></span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-8"></a><span class="nf">Running story org/magmax/jbehaveexample/my_example.story</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-9"></a>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-10"></a><span class="nf">(org/magmax/jbehaveexample/my_example.story)</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-11"></a><span class="k">Scenario:</span><span class="nf"> In order to show JBehave behaviour</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-12"></a><span class="nf">As a newbie</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-13"></a><span class="k">I </span><span class="nf">want to show this example</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-14"></a><span class="k">Given </span><span class="nf">nothing special (PENDING)</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-15"></a><span class="k">When </span><span class="nf">field operand</span><span class="s">1</span><span class="nf"> contains </span><span class="s">1</span><span class="nf"> (PENDING)</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-16"></a><span class="k">And </span><span class="nf">field operand</span><span class="s">2</span><span class="nf"> contains </span><span class="s">2</span><span class="nf"> (PENDING)</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-17"></a><span class="k">And </span><span class="nf">I press on "</span><span class="s">sum</span><span class="nf">" (PENDING)</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-18"></a><span class="k">Then </span><span class="nf">it returns </span><span class="s">3</span><span class="nf"> (PENDING)</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-19"></a><span class="nt">@Given("nothing</span><span class="nf"> special"</span><span class="s">)</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-20"></a><span class="s">@Pending</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-21"></a><span class="s">public void givenNothingSpecial(){</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-22"></a><span class="s">  // PENDING</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-23"></a><span class="s">}</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-24"></a>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-25"></a><span class="s">@When(</span><span class="nf">"field operand</span><span class="s">1</span><span class="nf"> contains </span><span class="s">1</span><span class="nf">"</span><span class="s">)</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-26"></a><span class="s">@Pending</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-27"></a><span class="s">public void whenFieldOperand1Contains1(){</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-28"></a><span class="s">  // PENDING</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-29"></a><span class="s">}</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-30"></a>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-31"></a><span class="s">@When(</span><span class="nf">"field operand</span><span class="s">2</span><span class="nf"> contains </span><span class="s">2</span><span class="nf">"</span><span class="s">)</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-32"></a><span class="s">@Pending</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-33"></a><span class="s">public void whenFieldOperand2Contains2(){</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-34"></a><span class="s">  // PENDING</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-35"></a><span class="s">}</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-36"></a>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-37"></a><span class="s">@When(</span><span class="nf">"I press on \"</span><span class="s">sum\</span><span class="nf">""</span><span class="s">)</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-38"></a><span class="s">@Pending</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-39"></a><span class="s">public void whenIPressOnsum(){</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-40"></a><span class="s">  // PENDING</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-41"></a><span class="s">}</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-42"></a>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-43"></a><span class="s">@Then(</span><span class="nf">"it returns </span><span class="s">3</span><span class="nf">"</span><span class="s">)</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-44"></a><span class="s">@Pending</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-45"></a><span class="s">public void thenItReturns3(){</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-46"></a><span class="s">  // PENDING</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-47"></a><span class="s">}</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-48"></a>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-49"></a>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-50"></a><span class="s">(AfterStories)</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-51"></a>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-52"></a><span class="s">Generating reports view to 'jbehaveexample/target/jbehave' using formats '[console, html, stats]' and view properties '{defaultFormats=stats, decorateNonHtml=true, viewDirectory=view, decorated=ftl/jbehave-report-decorated.ftl, reports=ftl/jbehave-reports-with-totals.ftl, maps=ftl/jbehave-maps.ftl, navigator=ftl/jbehave-navigator.ftl, views=ftl/jbehave-views.ftl, nonDecorated=ftl/jbehave-report-non-decorated.ftl}'</span>
<a name="rest_code_ae32cb415ea942fda2d2e825768e0592-53"></a><span class="s">Reports view generated with 3 stories (of which 1 pending) containing 1 scenarios (of which 0 failed and 1 pending)</span>
</pre>
<p>Lo más importante es fijarse en la parte que nos muestra el código java que necesitamos para nuestros "<em>steps</em>". Así que lo copiamos y lo pegamos en el siguiente archivo (rellenándolo y quitando los &lt;tt&gt;@Pending&lt;/tt&gt;):</p>
<pre class="code java"><a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-1"></a><span class="kn">package</span> <span class="nn">org.magmax.jbehaveexample</span><span class="p">;</span>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-2"></a>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-3"></a><span class="kn">import</span> <span class="nn">org.jbehave.core.annotations.Given</span><span class="p">;</span>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-4"></a><span class="kn">import</span> <span class="nn">org.jbehave.core.annotations.Then</span><span class="p">;</span>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-5"></a><span class="kn">import</span> <span class="nn">org.jbehave.core.annotations.When</span><span class="p">;</span>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-6"></a><span class="kn">import static</span> <span class="nn">org.junit.Assert.*</span><span class="p">;</span>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-7"></a>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-8"></a><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyExampleSteps</span> <span class="p">{</span>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-9"></a>    <span class="kt">int</span> <span class="n">operand1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-10"></a>    <span class="kt">int</span> <span class="n">operand2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-11"></a>    <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-12"></a>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-13"></a>    <span class="nd">@Given</span><span class="p">(</span><span class="s">"nothing special"</span><span class="p">)</span>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-14"></a>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">givenNothingSpecial</span><span class="p">()</span> <span class="p">{</span>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-15"></a>    <span class="p">}</span>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-16"></a>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-17"></a>    <span class="nd">@When</span><span class="p">(</span><span class="s">"field operand1 contains $value"</span><span class="p">)</span>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-18"></a>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">whenFieldOperand1ContainsAValue</span><span class="p">(</span><span class="kt">int</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-19"></a>        <span class="n">operand1</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-20"></a>    <span class="p">}</span>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-21"></a>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-22"></a>    <span class="nd">@When</span><span class="p">(</span><span class="s">"field operand2 contains $value"</span><span class="p">)</span>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-23"></a>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">whenFieldOperand2ContainsAValue</span><span class="p">(</span><span class="kt">int</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-24"></a>        <span class="n">operand2</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-25"></a>    <span class="p">}</span>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-26"></a>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-27"></a>    <span class="nd">@When</span><span class="p">(</span><span class="s">"I press on \"sum\""</span><span class="p">)</span>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-28"></a>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">whenIPressOnsum</span><span class="p">()</span> <span class="p">{</span>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-29"></a>        <span class="c1">// Llamar a la calculadora real</span>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-30"></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">operand1</span> <span class="o">+</span> <span class="n">operand2</span><span class="p">;</span>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-31"></a>    <span class="p">}</span>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-32"></a>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-33"></a>    <span class="nd">@Then</span><span class="p">(</span><span class="s">"it returns $value"</span><span class="p">)</span>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-34"></a>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thenItReturns3</span><span class="p">(</span><span class="kt">int</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-35"></a>        <span class="n">assertEquals</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-36"></a>    <span class="p">}</span>
<a name="rest_code_70ba9ce23d5e470fa9da5f6e830f93ef-37"></a><span class="p">}</span>
</pre>
<p>Fijáos también que he realizado algunas modificaciones a la plantilla que me daba <em>JBehave</em>: he sustituido los valores por variables y he añadido parámetros en mis funciones. Las variables y los parámetros siempre coinciden en nombre, aunque las variables comienzan por el símbolo del dólar.</p>
<p>Fijáos también en el método <em>whenIPressOnsum</em>; aquí es donde iría la llamada a mi clase real, pero por abreviar, he puesto ahí mismo el código.</p>
<p>El caso es que esto no me funciona. No sé si es un problema de nomenclatura (asumo que sí), pero sé cómo arreglarlo: modificando nuestra clase que hereda de <em>JUnitStory</em>, de manera que sepa encontrar este archivo. Finalmente, quedaría así:</p>
<pre class="code java"><a name="rest_code_fe9df61a81b84a3590065adf83506ef1-1"></a><span class="kn">package</span> <span class="nn">org.magmax.jbehaveexample</span><span class="p">;</span>
<a name="rest_code_fe9df61a81b84a3590065adf83506ef1-2"></a>
<a name="rest_code_fe9df61a81b84a3590065adf83506ef1-3"></a><span class="kn">import</span> <span class="nn">java.util.List</span><span class="p">;</span>
<a name="rest_code_fe9df61a81b84a3590065adf83506ef1-4"></a><span class="kn">import</span> <span class="nn">org.jbehave.core.configuration.Configuration</span><span class="p">;</span>
<a name="rest_code_fe9df61a81b84a3590065adf83506ef1-5"></a><span class="kn">import</span> <span class="nn">org.jbehave.core.junit.JUnitStory</span><span class="p">;</span>
<a name="rest_code_fe9df61a81b84a3590065adf83506ef1-6"></a><span class="kn">import</span> <span class="nn">org.jbehave.core.reporters.Format</span><span class="p">;</span>
<a name="rest_code_fe9df61a81b84a3590065adf83506ef1-7"></a><span class="kn">import</span> <span class="nn">org.jbehave.core.reporters.StoryReporterBuilder</span><span class="p">;</span>
<a name="rest_code_fe9df61a81b84a3590065adf83506ef1-8"></a><span class="kn">import</span> <span class="nn">org.jbehave.core.steps.CandidateSteps</span><span class="p">;</span>
<a name="rest_code_fe9df61a81b84a3590065adf83506ef1-9"></a><span class="kn">import</span> <span class="nn">org.jbehave.core.steps.InstanceStepsFactory</span><span class="p">;</span>
<a name="rest_code_fe9df61a81b84a3590065adf83506ef1-10"></a>
<a name="rest_code_fe9df61a81b84a3590065adf83506ef1-11"></a><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyExample</span> <span class="kd">extends</span> <span class="n">JUnitStory</span> <span class="p">{</span>
<a name="rest_code_fe9df61a81b84a3590065adf83506ef1-12"></a>
<a name="rest_code_fe9df61a81b84a3590065adf83506ef1-13"></a>    <span class="nd">@Override</span>
<a name="rest_code_fe9df61a81b84a3590065adf83506ef1-14"></a>    <span class="kd">public</span> <span class="n">List</span> <span class="nf">candidateSteps</span><span class="p">()</span> <span class="p">{</span>
<a name="rest_code_fe9df61a81b84a3590065adf83506ef1-15"></a>        <span class="n">InstanceStepsFactory</span> <span class="n">stepsFactory</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InstanceStepsFactory</span><span class="p">(</span><span class="n">configuration</span><span class="p">(),</span> <span class="k">new</span> <span class="n">MyExampleSteps</span><span class="p">());</span>
<a name="rest_code_fe9df61a81b84a3590065adf83506ef1-16"></a>        <span class="k">return</span> <span class="n">stepsFactory</span><span class="p">.</span><span class="na">createCandidateSteps</span><span class="p">();</span>
<a name="rest_code_fe9df61a81b84a3590065adf83506ef1-17"></a>    <span class="p">}</span>
<a name="rest_code_fe9df61a81b84a3590065adf83506ef1-18"></a>
<a name="rest_code_fe9df61a81b84a3590065adf83506ef1-19"></a>    <span class="nd">@Override</span>
<a name="rest_code_fe9df61a81b84a3590065adf83506ef1-20"></a>    <span class="kd">public</span> <span class="n">Configuration</span> <span class="nf">configuration</span><span class="p">()</span> <span class="p">{</span>
<a name="rest_code_fe9df61a81b84a3590065adf83506ef1-21"></a>        <span class="n">Configuration</span> <span class="n">result</span> <span class="o">=</span> <span class="kd">super</span><span class="p">.</span><span class="na">configuration</span><span class="p">();</span>
<a name="rest_code_fe9df61a81b84a3590065adf83506ef1-22"></a>        <span class="n">result</span><span class="p">.</span><span class="na">useStoryReporterBuilder</span><span class="p">(</span><span class="n">getStoryReporterBuilder</span><span class="p">());</span>
<a name="rest_code_fe9df61a81b84a3590065adf83506ef1-23"></a>        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<a name="rest_code_fe9df61a81b84a3590065adf83506ef1-24"></a>    <span class="p">}</span>
<a name="rest_code_fe9df61a81b84a3590065adf83506ef1-25"></a>
<a name="rest_code_fe9df61a81b84a3590065adf83506ef1-26"></a>    <span class="kd">private</span> <span class="n">StoryReporterBuilder</span> <span class="nf">getStoryReporterBuilder</span><span class="p">()</span> <span class="p">{</span>
<a name="rest_code_fe9df61a81b84a3590065adf83506ef1-27"></a>        <span class="n">StoryReporterBuilder</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StoryReporterBuilder</span><span class="p">();</span>
<a name="rest_code_fe9df61a81b84a3590065adf83506ef1-28"></a>        <span class="n">result</span><span class="p">.</span><span class="na">withFormats</span><span class="p">(</span><span class="n">Format</span><span class="p">.</span><span class="na">CONSOLE</span><span class="p">,</span> <span class="n">Format</span><span class="p">.</span><span class="na">HTML</span><span class="p">,</span> <span class="n">Format</span><span class="p">.</span><span class="na">STATS</span><span class="p">);</span>
<a name="rest_code_fe9df61a81b84a3590065adf83506ef1-29"></a>        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<a name="rest_code_fe9df61a81b84a3590065adf83506ef1-30"></a>    <span class="p">}</span>
<a name="rest_code_fe9df61a81b84a3590065adf83506ef1-31"></a><span class="p">}</span>
</pre>
<p>Y, con este cambio, comienza a andar.</p>
</div>
</div>
<div class="section" id="aciertos-y-errores">
<h2>Aciertos y errores</h2>
<p>Como bien dije, hay cosas que me gustan mucho y otras que nada. Para empezar, está el objeto <em>MostUsefulConfiguration</em>. Se supone que es la configuración más útil, pero... ¿qué es lo más útil? Puede que sea la más común, pero lo cierto es que no incluye el formato "<em>Console</em>" y, como consecuencia, no imprime nada por pantalla. Eso me obliga a tener que sobreescribir el método de Configuración, como en el ejemplo.</p>
<p>Un acierto son las variables en las expresiones regulares, ya que JBehave es suficientemente listo como para resolverlas él solo. Quizá sea un poco peligroso en algún caso darle tanta inteligencia, pero en la mayoría de ellos viene muy bien.</p>
<p>Otra cosa que no me gusta es tener que indicarle el objeto que implementan los pasos a seguir. Debería encontrarse este objeto, basándose en la nomenclatura, de la misma manera que se ha encontrado el archivo <em>.story</em>.</p>
<p>Y otra cosa que no me gusta es tener que estar creando los archivos de historia, aunque siempre se puede crear uno genérico que permita encontrar todas las historias, aunque eso me ha dado no pocos dolores de cabeza.</p>
</div>
<div class="section" id="disculpas">
<h2>Disculpas</h2>
<p>En previsión de que me digáis que no tengo razón, abro ya este apartado. A penas he hecho 2 ejercicios con <em>JBehave</em>, así que es normal que me falten conocimientos y es posible que los problemas que he encontrado se puedan arreglar fácilmente. Me encantaría que me dijerais cómo :D</p>
</div>
<div class="section" id="mas-informacion">
<h2>Más información</h2>
<p>La mayor parte de la información la podéis obtener en la propia página de <a class="reference external" href="http://jbehave.org/reference/">JBehave reference</a>, aunque el <em>JavaDoc</em> está a medias aún.</p>
</div>
</div>
          </div>
          <br><div>
            <nav><span class="author">
                <span class="glyphicon glyphicon-user"></span> 
                <span>Publicado:Miguel Ángel García</span>
              </span>
               

              
              <span class="dateline">
                <span class="glyphicon glyphicon-calendar"></span> 
                <time class="published dt-published" datetime="2012-01-12T00:00:00+00:00" title="2012-01-12">2012-01-12</time></span>
               
              <span class="tags">
                <span class="glyphicon glyphicon-tags"></span> 
                <a class="label label-primary p-category" href="/categories/java-testing/" rel="tag">java testing</a>
                <a class="label label-primary p-category" href="/categories/jbehave/" rel="tag">jbehave</a>
              </span>
                      <ul class="pager">
<li class="previous">
              <a href="/blog/estatico-vs-dinamico/" rel="prev" title="Estático vs Dinámico">
                <span class="glyphicon glyphicon-arrow-left"></span>
                Publicación anterior
              </a>
            </li>
            <li class="next">
              <a href="/blog/patron-singleton/" rel="next" title="El patrón Singleton">
                Siguiente publicación
                <span class="glyphicon glyphicon-arrow-right"></span>
              </a>
            </li>
        </ul></nav>
</div>
          <section class="comments"><h2>Comentarios</h2>
                            <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="magmax",
            disqus_url="http://magmax.org/blog/jbehave/",
        disqus_title="JBehave",
        disqus_identifier="cache/posts/jbehave.html",
        disqus_config = function () {
            this.language = "es_ES";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="//disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


          </section></article><script>var disqus_shortname="magmax";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
      <aside class="sidebar col-md-3"><div>
<section class="panel panel-default"><div class="panel-heading">
    <h3 class="panel-title">Last comments</h3>
  </div>
  <div class="panel-body">
    <div id="disqus_last_comments" class="dsq-widget">
      <script type="text/javascript" src="https://magmax.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=0&amp;avatar_size=32&amp;excerpt_length=150">
      </script>
</div>
  </div>
</section>
</div>
          <div>
<section class="panel panel-default"><div class="panel-heading">
    <h3 class="panel-title">GitHub Repos</h3>
  </div>
  <div class="panel-body">
    <ul id="gh_repos" class="list-unstyled">
<li class="loading">Status updating…</li>
    </ul>
</div>
  <div class="panel-footer">
    <a href="https://github.com/magmax">@magmax</a> on GitHub
  </div>
</section>
</div>
      </aside>
</div>

    <footer>
      Contents © 2009-2020 <a href="mailto:">Miguel Ángel García</a> 
<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/2.5/es/">
<img alt="Creative Commons License BY-NC-SA" style="border-width:0; margin-bottom:12px;width:80px;height:15px;vertical-align:middle" src="https://i.creativecommons.org/l/by-nc-sa/2.5/es/80x15.png"></a>; Using <a href="/stories/credits/">a lot of free software</a>
      
    </footer>
</div>
</div>




<script data-main="/assets/js/main" src="/assets/js/libs/require/require.min.js"></script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-9308241-3', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
