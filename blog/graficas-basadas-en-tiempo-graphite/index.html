<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Gráficas basadas en tiempo: Graphite | El blog de MagMax</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="Pequeña introducción a Graphite y Carbon">
    <meta name="generator" content="Hugo 0.79.1" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.4fc0b62e4b82c997bb0041217cd6b979.css" rel="stylesheet">
    

    

    
      

    

    
    
    <meta property="og:title" content="Gráficas basadas en tiempo: Graphite" />
<meta property="og:description" content="Pequeña introducción a Graphite y Carbon" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://magmax.org/blog/graficas-basadas-en-tiempo-graphite/" />
<meta property="article:published_time" content="2015-07-05T00:00:00+00:00" />
<meta property="article:modified_time" content="2015-07-05T00:00:00+00:00" /><meta property="og:site_name" content="El blog de MagMax" />
<meta itemprop="name" content="Gráficas basadas en tiempo: Graphite">
<meta itemprop="description" content="Pequeña introducción a Graphite y Carbon">
<meta itemprop="datePublished" content="2015-07-05T00:00:00+00:00" />
<meta itemprop="dateModified" content="2015-07-05T00:00:00+00:00" />
<meta itemprop="wordCount" content="1172">



<meta itemprop="keywords" content="graphite,monitoring," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Gráficas basadas en tiempo: Graphite"/>
<meta name="twitter:description" content="Pequeña introducción a Graphite y Carbon"/>

	
  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        El blog de MagMax
      
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="" title="Inicio page">
              Inicio
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="../en" title="English page">
              English
            </a>
          </li>
          
        </ul>
      
      















    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked">
          
        POSTS
      </aside>
      




  <div id="sharing" class="mt3">

    
    <a href="https://www.facebook.com/sharer.php?u=https://magmax.org/blog/graficas-basadas-en-tiempo-graphite/" class="facebook no-underline" aria-label="share on Facebook">
      <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M28.765,50.32h6.744V33.998h4.499l0.596-5.624h-5.095  l0.007-2.816c0-1.466,0.14-2.253,2.244-2.253h2.812V17.68h-4.5c-5.405,0-7.307,2.729-7.307,7.317v3.377h-3.369v5.625h3.369V50.32z   M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;"/></svg>

    </a>

    
    
    <a href="https://twitter.com/share?url=https://magmax.org/blog/graficas-basadas-en-tiempo-graphite/&amp;text=Gr%c3%a1ficas%20basadas%20en%20tiempo:%20Graphite" class="twitter no-underline" aria-label="share on Twitter">
      <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/></svg>

    </a>

    
    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://magmax.org/blog/graficas-basadas-en-tiempo-graphite/&amp;title=Gr%c3%a1ficas%20basadas%20en%20tiempo:%20Graphite" class="linkedin no-underline" aria-label="share on LinkedIn">
      <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

    </a>
  </div>


      <h1 class="f1 athelas mt3 mb1">Gráficas basadas en tiempo: Graphite</h1>
      
      
      <time class="f6 mv4 dib tracked" datetime="2015-07-05T00:00:00Z">July 5, 2015</time>

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><p>En esta ocasión voy a escribir sobre <a href="https://graphite.wikidot.com/">Graphite</a>, una utilidad para generar gráficas basadas en tiempo.</p>
<p>Una vez tengamos <a href="https://graphite.wikidot.com/">Graphite</a> instalado, se podrá utilizar para distintos usos: contar las visitas a una web, contar las ejecuciones de un programa, medir el tiempo de ejecución de un programa, &hellip;</p>
<p>Veremos que es un programa sencillo de manejar, pero muy potente.</p>
<!-- raw HTML omitted -->
<figure>
    <img src="/images/stats.png"
         alt="Distintos tipos de gráficas"/> 
</figure>

<h2 id="entendiendo-graphite">Entendiendo Graphite</h2>
<p>Antes de meternos en harina, es importante tener claros los conceptos.</p>
<p><a href="https://graphite.wikidot.com/">Graphite</a> es una herramienta <a href="https://www.djangoproject.com/">Django</a> que permite graficar lo almacenado en una base de datos <strong>Round Robin</strong> llamada <code>whisper</code>. También permite guardar <strong>eventos discretos</strong> (luego lo vemos).</p>
<p>Por tanto, podremos mostrar información, pero <a href="https://graphite.wikidot.com/">Graphite</a> no guarda esa
información. Eso se delega en otros servicios, como <a href="https://pypi.python.org/pypi/carbon/">Carbon</a>:</p>
<div hidden>

@startuml graphite-basic-flow
actor "Program 1" as p1
actor "Program 2" as p2
actor Browser
component Carbon
component Graphite
database Whisper

p1 --> Carbon
p2 --> Carbon
Carbon --> Whisper: escribir
Graphite <-- Whisper: leer
Browser --> Graphite
@enduml

</div>

<img src="/diagrams/graphite-basic-flow.png"/>

<p><strong>Whisper</strong> es una base de datos de tipo <strong>Round Robin</strong>. Eso significa que tiene una especie de &ldquo;casillas&rdquo; (<em>slots</em>) que se rellenan cada cierto tiempo. Cuando se han rellenado todas, se comienza otra vez por el principio. De esta manera, el tamaño de la base de datos es siempre fijo, permitiéndonos calcularlo antes de comenzar a medir.</p>
<p>El problema de las bases de datos de este tipo es cuando se reciben varios valores en un <em>slot</em> de tiempo. En estos casos se opta por la media o bien por el último de los valores. El tamaño de estos <em>slots</em> se realiza en el archivo <code>/etc/carbon/storage-schemas.conf</code>. Ejemplo:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span style="color:#66d9ef">[carbon]</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span style="color:#a6e22e">pattern</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">^carbon\.</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span style="color:#a6e22e">retentions</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">60:90d</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span style="color:#66d9ef">[local]</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span style="color:#a6e22e">pattern</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">^local\.</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span style="color:#a6e22e">retentions</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">1:1h</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span style="color:#66d9ef">[default_1min_for_1day]</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span style="color:#a6e22e">pattern</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">.*</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span style="color:#a6e22e">retentions</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">60s:1d</span>
</code></pre></div><p>Como se puede observar, el formato es sencillo.</p>
<p>Existen más piezas en este puzzle, que iremos introduciendo a lo largo de otros posts. Este artículo se centrará en los que se ven.</p>
<h2 id="instalando-graphite">Instalando Graphite</h2>
<p>Como no sólo tenemos que instalar <a href="https://graphite.wikidot.com/">Graphite</a> sino también <a href="https://pypi.python.org/pypi/carbon/">Carbon</a>, lo más sencillo es usar:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>apt-get install graphite-web graphite-carbon
</code></pre></div><p>A continuación tendremos que configurar el <a href="https://www.djangoproject.com/">Django</a> detrás de <a href="https://graphite.wikidot.com/">Graphite</a>. Esta información se encuentra en <code>/usr/share/doc/graphite-web/README.Debian</code>, pero voy a repetirla aquí.</p>
<p>Si sólo queremos probar <a href="https://graphite.wikidot.com/">Graphite</a>, lo más sencillo es hacer, como <code>root</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>su -s /bin/bash -c <span style="color:#e6db74">&#39;/usr/bin/django-admin runserver --settings graphite.settings 0.0.0.0:8080&#39;</span> _graphite
</code></pre></div><p>Eso utiliza el servidor web de <a href="https://www.djangoproject.com/">Django</a> y una base de datos <a href="https://www.sqlite.org/">sqlite</a>, que puede no ser suficiente para producción, pero es ideal para probarlo rápidamente.</p>
<p>En producción, por el contrario, será mejor montarlo de una forma más decente,
usando <a href="https://httpd.apache.org/">Apache httpd</a>, por ejemplo:</p>
<ol>
<li>Instalar <code>wsgi</code> para <a href="https://httpd.apache.org/">Apache httpd</a>:</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>apt-get install libapache2-mod-wsgi
</code></pre></div><ol start="2">
<li>Copiar los valores por defecto que ya nos proporciona el paquete Debian de <a href="https://graphite.wikidot.com/">Graphite</a>:</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>cp /usr/share/graphite-web/apache2-graphite.conf /etc/apache2/sites-available/graphite-web.conf
</code></pre></div><ol start="3">
<li>Habilitarlo:</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>a2ensite graphite-web
</code></pre></div><ol start="4">
<li>Reiniciar apache:</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>service apache2 restart
</code></pre></div><p>Si también queremos usar <a href="https://www.mysql.com/">MySQL</a> o <a href="https://www.postgresql.org.es/">PostgreSQL</a> en lugar de <a href="https://www.sqlite.org/">sqlite</a>, tendremos
que modificar la configuración de <a href="https://graphite.wikidot.com/">Graphite</a>, que se encuentra en
<code>/etc/graphite/local_setting.py</code> y que es equivalente a la de cualquier
<a href="https://www.djangoproject.com/">Django</a>.</p>
<p>Si habéis trabajado con <a href="https://www.djangoproject.com/">Django</a>, sabréis que el programa principal se suele
llamar <code>manage.py</code>&hellip; Pues el de <a href="https://graphite.wikidot.com/">Graphite</a> es accesible invocando <code>graphite-manage</code> en su lugar.</p>
<h2 id="primeros-pasos-en-graphite">Primeros pasos en Graphite</h2>
<p>Asumiendo que se ha optado por la vía rápida, ejecutando el <code>runserver</code>, o
bien una configuración similiar, tendremos <a href="https://graphite.wikidot.com/">Graphite</a> escuchando en el puerto 8080, y podremos acceder a él: https://localhost:8080</p>
<p>Probablemente se queje porque la clave <code>SECRET_KEY</code> utilizada es el valor por defecto. Podéis ignorarlo o arreglarlo editando su valor en el archivo <code>/etc/graphite/local_setting.py</code> y poniendo un valor aleatorio y grande.</p>
<p>Pues ya está, ya tenemos <a href="https://graphite.wikidot.com/">Graphite</a> corriendo. No ha sido tan duro.</p>
<p>Como también instalamos <a href="https://pypi.python.org/pypi/carbon/">Carbon</a>, éste ya se ha puesto a insertar valores por su cuenta. En la interfaz, veréis un árbol a la izquierda que podéis ir desplegando. Los nodos pintarán gráficas:</p>
<figure>
    <img src="/images/graphite/graphite_main.png"
         alt="Página por defecto de Graphite"/> 
</figure>

<p>Si pensáis que la interfaz es horrible, sólo os diré que la han mejorado desde la última vez que entré.</p>
<p>Abajo tenéis los botones <code>Graph Options</code> y <code>Graph Data</code> permiten modificar la forma de los gráficos u operar sobre los datos. Volveremos sobre esto en la sección de la API.</p>
<p>A la derecha veréis varios botones, donde me centraré en dos: <strong>Dashboard</strong> y <strong>Events</strong>.</p>
<h3 id="graphite-dashboard">Graphite Dashboard</h3>
<p>En un intento por hacer <a href="https://graphite.wikidot.com/">Graphite</a> algo más usable, hicieron el <strong>Dashboard</strong>, que no es más que otra aberración para la vista:</p>
<figure>
    <img src="/images/graphite/graphite_dashboard.png"
         alt="Dashboard de Graphite"/> 
</figure>

<p>Al menos tiene <em>completion</em>.</p>
<p>Permite generar paneles y así gestionar varias gráficas de una vez. De todas
maneras, es mejor hacer eso con <a href="https://grafana.org/">Grafana</a>, como veremos en próximos posts.</p>
<h3 id="graphite-events">Graphite Events</h3>
<p>Si hemos pulsado en el botón de <strong>Events</strong>, veremos una página horrible que dice:</p>
<blockquote>
<p>No events. Add events using the admin interface or by posting (eg, curl -X POST https://localhost:8000/events/ -d &lsquo;{&ldquo;what&rdquo;: &ldquo;Something Interesting&rdquo;, &ldquo;tags&rdquo; : &ldquo;tag1 &ldquo;}')</p>
</blockquote>
<p>Recomiendo hacerle caso, aunque tendréis que cambiar el puerto, sólo por probar:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>curl -X POST https://localhost:8080/events/ -d <span style="color:#e6db74">&#39;{&#34;what&#34;: &#34;Something Interesting&#34;, &#34;tags&#34; : &#34;tag1 &#34;}&#39;</span>
</code></pre></div><p>Y, si recargamos la página, veremos el evento. Esto será útil para registrar
acciones no periódicas: una actualización de configuración, una ejecución de
<a href="https://puppetlabs.com/">Puppet</a>, etc. Veremos más sobre su uso en el post sobre <a href="https://grafana.org/">Grafana</a>.</p>
<h2 id="puntos-fuertes-de-graphite">Puntos fuertes de Graphite</h2>
<p>Algún lector dirá: &ldquo;bueno, pues si la interfaz es tan horrible como dices, ¿por qué nos cuentas todo esto?&rdquo;.</p>
<h3 id="interfaz-get">Interfaz GET</h3>
<p>Y tendría toda la razón, pero es que Graphite tiene una interfaz, accesible por GET, muy versátil y molona.</p>
<p>Por ejemplo&hellip; obtenemos la URL de la imagen anterior, obtendremos:
<code>https://localhost:8080/render/?width=586&amp;height=308&amp;_salt=1436083979.749&amp;target=carbon.agents.nightcrawler-a.avgUpdateTime</code></p>
<p>Vamos por partes:</p>
<ul>
<li><code>https://localhost:8080/render/</code> Punto de acceso a la API</li>
<li><code>width=586</code> Ancho que tendrá la imagen.</li>
<li><code>height=308</code> Alto que tendrá la imagen.</li>
<li><code>_salt=1436083979.749</code> Podéis ignorarlo. Es la semilla utilizada en caso de usar valores aleatorios.</li>
<li><code>target=carbon.agents.nightcrawler-a.avgUpdateTime</code> Lo que se está pintando.</li>
</ul>
<p>El <code>target</code> permite realizar operaciones, tales como sumar diferentes series, filtrar valores, etc. Por ejemplo, para mostrar el percentil 90 de las consultas a la caché de carbon:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>target<span style="color:#f92672">=</span>percentileOfSeries<span style="color:#f92672">(</span>carbon.agents.nightcrawler-a.cache.queries,0.9<span style="color:#f92672">)</span>
</code></pre></div><p>También se pueden obtener los valores guardados con el argumento <code>format</code>.
Recomiendo echar un ojo a toda la <a href="https://graphite.readthedocs.org/en/latest/render_api.html">API de Graphite</a>.</p>
<h3 id="interfaz-post">Interfaz POST</h3>
<p>Carbon también tiene una interfaz POST que permite insertar datos en <strong>Whisper</strong>
y así renderizarlos desde <a href="https://graphite.wikidot.com/">Graphite</a>. Por defecto estará escuchando en el puerto 2003:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>echo <span style="color:#e6db74">&#34;local.random.diceroll 4 `date +%s`&#34;</span> | nc -q0 localhost <span style="color:#ae81ff">2003</span>
</code></pre></div><p>Como se puede observar, el formato es my sencillo:</p>
<ul>
<li><em>Nombre de la métrica</em>, separando por puntos los distintos niveles. Esto permite generar una especie de árbol, por lo que se recomienda colocar los términos más genéricos al principio y los más específicos al final.</li>
<li><em>Valor</em> de la métrica.</li>
<li><em>timestamp</em>, en formato UNIX</li>
</ul>
<h2 id="ejemplo-de-uso-de-graphite">Ejemplo de uso de Graphite</h2>
<p>Aquí os dejo un pequeño ejemplo de uso:</p>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/UGTb2J-a_0Q" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<p>No conté con que <code>$RANDOM</code> se resuelve en el primer shell, por lo que enviaba un valor fijo XD</p>
<h2 id="conclusión">Conclusión</h2>
<p><a href="https://graphite.wikidot.com/">Graphite</a> es una herramienta mucho más potente de lo que pueda parecer. Lo veremos en próximos posts.</p>
<p>De momento es importante quedarse con la idea principal: generación de gráficos donde el tiempo es el eje X.</p>
<p>En próximos posts veremos cómo graficar información del sistema, cómo embeber
estos gráficos en nuestro sistema de alertas o cómo dar soporte a millones de
métricas por segundo. Y todo basado en <a href="https://graphite.wikidot.com/">Graphite</a>.</p>
<ul class="pa0">
  
   <li class="list">
     <a href="/tags/graphite" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">graphite</a>
   </li>
  
   <li class="list">
     <a href="/tags/monitoring" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">monitoring</a>
   </li>
  
</ul>
<div class="mt6 instapaper_ignoref">
      
        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "magmax" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">Relacionado</p>
    <ul class="pa0 list">
	   
	     <li  class="mb2">
          <a href="/blog/monitorizacion-y-alertado/">Monitorización y alertado</a>
        </li>
	    
    </ul>
</div>

</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://magmax.org/" >
    &copy;  El blog de MagMax 2021 
  </a>
    <div>














</div>
  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
