<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Tablas en Drupal: Haciendo una tabla perfecta - El blog de MagMax</title><meta name="Description" content="El blog de un Ingeniero Informático: tutoriales, manuales, opiniones, comparativas, ..."><meta property="og:title" content="Tablas en Drupal: Haciendo una tabla perfecta" />
<meta property="og:description" content="Sobre el artículo
Este artículo, basado en el original &ldquo;Tables in Drupal: Making a perfect table&rdquo;, escrito por Kevin Bowler, ha sido traducido por Miguel Ángel García al español.
El copyright pertenece a Kevin Bowler, por lo que deberán dirigirse a éste para los agradecimientos y cualquier comentario sobre el código.
Por favor, use el foro en castellano únicamente para comentarios sobre la traducción." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://magmax.org/blog/drupal-tabla-perfecta/" /><meta property="og:image" content="https://magmax.org/icons/favicon.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2009-12-18T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-01-28T00:00:00+00:00" /><meta property="og:site_name" content="My cool site" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://magmax.org/icons/favicon.png"/>

<meta name="twitter:title" content="Tablas en Drupal: Haciendo una tabla perfecta"/>
<meta name="twitter:description" content="Sobre el artículo
Este artículo, basado en el original &ldquo;Tables in Drupal: Making a perfect table&rdquo;, escrito por Kevin Bowler, ha sido traducido por Miguel Ángel García al español.
El copyright pertenece a Kevin Bowler, por lo que deberán dirigirse a éste para los agradecimientos y cualquier comentario sobre el código.
Por favor, use el foro en castellano únicamente para comentarios sobre la traducción."/>
<meta name="application-name" content="My cool site">
<meta name="apple-mobile-web-app-title" content="My cool site"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://magmax.org/blog/drupal-tabla-perfecta/" /><link rel="prev" href="https://magmax.org/blog/google-adiccion/" /><link rel="next" href="https://magmax.org/blog/derechos-fundamentales-internet/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Tablas en Drupal: Haciendo una tabla perfecta",
        "inLanguage": "es",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/magmax.org\/blog\/drupal-tabla-perfecta\/"
        },"genre": "posts","keywords": "drupal","wordcount":  1430 ,
        "url": "https:\/\/magmax.org\/blog\/drupal-tabla-perfecta\/","datePublished": "2009-12-18T00:00:00+00:00","dateModified": "2021-01-28T00:00:00+00:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "Miguel Ángel"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="El blog de MagMax"><img
        class="lazyload logo"
        src="/svg/loading.min.svg"
        data-src="/icons/favicon.png"
        data-srcset="/icons/favicon.png, /icons/favicon.png 1.5x, /icons/favicon.png 2x"
        data-sizes="auto"
        alt="/icons/favicon.png"
        title="/icons/favicon.png" />MagMax Blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/"> Inicio </a><a class="menu-item" href="/posts"> Posts </a><a class="menu-item" href="/tags"> Tags </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="Cambia el tema">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a><a href="javascript:void(0);" class="menu-item language" title="Selecciona el lenguage">
                    <i class="fa fa-globe" aria-hidden="true"></i>                      
                    <select class="language-select" id="language-select-desktop" onchange="location = this.value;"><option value="/blog/drupal-tabla-perfecta/" selected>Español</option></select>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="El blog de MagMax"><img
        class="lazyload logo"
        src="/svg/loading.min.svg"
        data-src="/icons/favicon.png"
        data-srcset="/icons/favicon.png, /icons/favicon.png 1.5x, /icons/favicon.png 2x"
        data-sizes="auto"
        alt="/icons/favicon.png"
        title="/icons/favicon.png" />MagMax Blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/" title="">Inicio</a><a class="menu-item" href="/posts" title="">Posts</a><a class="menu-item" href="/tags" title="">Tags</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Cambia el tema">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a><a href="javascript:void(0);" class="menu-item" title="Selecciona el lenguage">
                    <i class="fa fa-globe fa-fw" aria-hidden="true"></i>
                    <select class="language-select" onchange="location = this.value;"><option value="/blog/drupal-tabla-perfecta/" selected>Español</option></select>
                </a></div>
    </div>
</header><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contenido</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Tablas en Drupal: Haciendo una tabla perfecta</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Miguel Ángel</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="18 Dec 2009">18 Dec 2009</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;1430 palabras&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;7 minutos&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contenido</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#sobre-el-artículo">Sobre el artículo</a></li>
    <li><a href="#alguna-vez-has">¿Alguna vez has&hellip;?</a></li>
    <li><a href="#paso-1-difinir-las-cabeceras">Paso 1: Difinir las cabeceras</a></li>
    <li><a href="#paso-2-define-los-extras">Paso 2: Define los extras</a></li>
    <li><a href="#paso-3-ejecuta-la-consulta">Paso 3: Ejecuta la consulta</a></li>
    <li><a href="#paso-4-procesado-de-datos">Paso 4: Procesado de datos</a>
      <ul>
        <li><a href="#eliminando-el-id">Eliminando el ID</a></li>
      </ul>
    </li>
    <li><a href="#paso-5-establecer-un-tema-para-la-salida">Paso 5: Establecer un tema para la salida</a></li>
    <li><a href="#paso-6-el-paginador">Paso 6: El paginador</a></li>
    <li><a href="#paso-7-ordenación">Paso 7: Ordenación</a></li>
    <li><a href="#aún-más-lejos">Aún más lejos</a></li>
    <li><a href="#nt">N.T.</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h2 id="sobre-el-artículo">Sobre el artículo</h2>
<p>Este artículo, basado en el original &ldquo;<a href="https://www.kpbowler.co.uk/perfect-tables-in-drupal" title="Tables in Drupal: Making a perfect table" target="_blank" rel="noopener noreffer ">Tables in Drupal: Making a perfect table</a>&rdquo;, escrito por <a href="https://www.kpbowler.co.uk/" title="Página personal de Kevin Bowler" target="_blank" rel="noopener noreffer ">Kevin Bowler</a>, ha sido traducido por <a href="https://magmax.org" title="MagMax Blog" target="_blank" rel="noopener noreffer ">Miguel Ángel García</a> al español.</p>
<p>El copyright pertenece a <a href="https://www.kpbowler.co.uk/" title="Página personal de Kevin Bowler" target="_blank" rel="noopener noreffer ">Kevin Bowler</a>, por lo que deberán dirigirse a éste para los agradecimientos y cualquier comentario sobre el código.</p>
<p>Por favor, use el foro en castellano únicamente para comentarios sobre la traducción.</p>
<figure><img src="/images/drupal.png"
         alt="Drupal"/>
</figure>

<h2 id="alguna-vez-has">¿Alguna vez has&hellip;?</h2>
<p>¿Alguna vez ha querido hacer una tabla en Drupal usando <code>theme_table</code>? Bien, ¿qué tal si le añadimos unos links extra, por ejemplo para opciones (Edit/Delete etc)? ¿Y si la ordenamos? ¿Algo de paginación? Bien, este tutorial le mostrará cómo hacer todo esto. ¡Después de esto será el máster de las Tablas en Drupal!</p>
<h2 id="paso-1-difinir-las-cabeceras">Paso 1: Difinir las cabeceras</h2>
<p>¿Cuáles son los nombres de las columnas?</p>
<p>Suena estúpido, pero será útil más adelante durante el proceso.</p>
<p>Puede encontrarlos buscando la tabla correspondiente en su base de datos.</p>
<p>Debería terminar con un array de cabeceras como éste:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">&#34;data&#34;</span> <span class="o">=&gt;</span> <span class="nx">t</span><span class="p">([</span><span class="nx">field_name</span><span class="p">]));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Claro que es necesario sustituir el texto entre corchetes con el nombre del campo de la base de datos.</p>
<h2 id="paso-2-define-los-extras">Paso 2: Define los extras</h2>
<p>Los extras son las acciones que se quieren realizar sobre los datos, como editar o borrar el dato.</p>
<p>La manera más limpia y clara de hacer esto es crear una función de ayuda separada a la que se pueda llamar mientras se construye la tabla principal.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="sd">/**
</span></span></span><span class="line"><span class="cl"><span class="sd">* Función de utilidad para construir enlaces para la tabla
</span></span></span><span class="line"><span class="cl"><span class="sd">*/</span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> <span class="nf">_generate_options</span> <span class="p">(</span> <span class="nv">$id</span> <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$links</span> <span class="o">=</span> <span class="nx">l</span><span class="p">(</span><span class="nx">t</span><span class="p">(</span><span class="s1">&#39;Edit&#39;</span><span class="p">),</span> <span class="s2">&#34;admin/settings/data/edit/</span><span class="si">$id</span><span class="s2">&#34;</span><span class="p">)</span> <span class="o">.</span><span class="s2">&#34;&amp;nbsp;&amp;nbsp;&#34;</span> <span class="o">.</span> <span class="nx">l</span><span class="p">(</span><span class="nx">t</span><span class="p">(</span><span class="s1">&#39;Remove&#39;</span><span class="p">),</span> <span class="s2">&#34;admon/settings/data/remove/</span><span class="si">$id</span><span class="s2">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nv">$links</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Realmente no es demasiado código, y se observa que puede ser muy manejable. Simplemente construya un enlace (utilizando la función <code>l()</code> ) con acciones basadas en las elecciones de la cabecera, y añada el id de la columna en el enlace, con el fin de asegurar que se actúa sobre el elemento correcto.</p>
<p>Uso el subrayado al principio del nombre de la función para marcar que es una función &lsquo;privada&rsquo;; sólo se va a utilizar de forma interna en este módulo.</p>
<p>Esta función se llamará en el paso 4, durante el proceso de los datos para construir la tabla actual.</p>
<h2 id="paso-3-ejecuta-la-consulta">Paso 3: Ejecuta la consulta</h2>
<p>Ahora tenemos que extablecer la consulta para obtener todos los datos de nuestra deseada tabla.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$sql</span> <span class="o">=</span> <span class="s2">&#34;SELECT [fields] FROM {table}&#34;</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Como puede observarse, no es una query demasiado compleja. Puede pensarse que es ineficiente, y así es.</p>
<p>Dejaremos que Drupal se ocupe de esto más adelante (paso 6).</p>
<h2 id="paso-4-procesado-de-datos">Paso 4: Procesado de datos</h2>
<p>Es en este paso cuando transforman los datos de base de datos en un array, preparado para ser introducido con un tema en una tabla.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">// ejecutar la query
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$result</span> <span class="o">=</span> <span class="nx">db_query</span> <span class="p">(</span> <span class="nv">$sql</span> <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span> <span class="nv">$result</span> <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Establecer el array de datos
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nv">$data</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Bucle básico para obtener los datos
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">while</span> <span class="p">(</span> <span class="nv">$tmp</span> <span class="o">=</span> <span class="nx">db_fetch_array</span> <span class="p">(</span> <span class="nv">$result</span> <span class="p">)</span> <span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$data</span><span class="p">[</span><span class="nv">$i</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$tmp</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Puede ser tan simple o tan complejo como se desee. Aquí sólo se cubrirá un ejemplo de personalización.</p>
<h3 id="eliminando-el-id">Eliminando el ID</h3>
<p>A veces no se desea mostrar al usuario el ID de un elemento, pero se necesita para generar la URL o los extras.</p>
<p>De esta manera, después de usarlo en el código anterior se puede &lsquo;desestablecer&rsquo;.</p>
<p>Simplemente inserte la línea siguiente al final del bucle while ( ¡¡¡ pero dentro de él !!! ):</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nx">unset</span> <span class="p">(</span> <span class="nv">$data</span><span class="p">[</span><span class="nv">$i</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ahora el ID no requiere una cabecera, por lo que no es necesario seleccionar el ID en la query y no tiene que mostrarse al usuario cómo se ordenan los datos.</p>
<h2 id="paso-5-establecer-un-tema-para-la-salida">Paso 5: Establecer un tema para la salida</h2>
<p>De esta forma, ahora vamos a establecer un tema para la salida, y obtendremos una tabla básica:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nx">theme</span> <span class="p">(</span> <span class="s1">&#39;table&#39;</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">,</span> <span class="nv">$data</span> <span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Lo que se está haciendo es llamar a la función <code>theme</code>, y pasarle el tipo del elemento a renderizar, en nuestro caso una tabla.</p>
<p>Esto llama a la función interna para el tema de la tabla, llamada <code>theme_table()</code>, y se le pasan los dos parámetros; el array de cabeceras, y el array de datos (ambos definidos antes en el código).</p>
<p>Si lo único que busca es una tabla simple, puede dejarlo aquí.</p>
<p>De todas maneras, es muy fácil añadirle algunas características interesantes a la tabla, de forma que impresione a la gente con su asistente de tablas Drupal, ¡por lo que siga leyendo!</p>
<h2 id="paso-6-el-paginador">Paso 6: El paginador</h2>
<p>Ok, esta tabla está bien, pero ¿qué ocurre si tiene 1.000 registros? ¡Eso hace una página muuuuuuuuuy larga, y una consulta masivamente ineficiente! ¡Pobre servidor de bases de datos!</p>
<p>Así, se le puede pedir a Drupal que añada un paginador a nuestra consulta, y sólo devuelva cada vez un número de filas predefinido:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$limit</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// generar una consulta paginada
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$result</span> <span class="o">=</span> <span class="nx">pager_query</span> <span class="p">(</span> <span class="nv">$sql</span><span class="p">,</span> <span class="nv">$limit</span> <span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>¿Parece simple? Bien. Lo es. Lo único que estamos haciendo es reemplazar la llamada a <code>db_query</code> con una llamada a <code>pager_query</code>, y pasándola un límite, o el número de filas a devolver por página.</p>
<p>Si quería ser realmente listo, este valor se podría establecer en una página de administracción, y añadida aquí usando <code>variable_get</code> (Le dejaré éste a usted, ¡no me gustaría fastidiarle toda la diversión!).</p>
<p>Ésta es una de las cosas a hacer antes de que nuestro paginador funcione. Hay que establecer el tema de la salida como una tabla paginada.</p>
<p>No se preocupe, no es difícil, y no requiere cambiar mucho código.</p>
<p>Todo lo que haremos es reemplazar la llamada actual a <code>theme</code> por:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$output</span> <span class="o">=</span> <span class="nx">theme</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;table&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$headers</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nv">$data</span>
</span></span><span class="line"><span class="cl"><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nv">$output</span> <span class="o">.=</span> <span class="nx">theme</span> <span class="p">(</span> <span class="s1">&#39;pager&#39;</span><span class="p">,</span> <span class="k">NULL</span><span class="p">,</span> <span class="nv">$limit</span><span class="p">,</span> <span class="mi">0</span> <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="k">print</span> <span class="nx">theme</span> <span class="p">(</span> <span class="s1">&#39;page&#39;</span><span class="p">,</span> <span class="nv">$output</span> <span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>¿Qué es lo que estamos haciendo aquí?</p>
<ol>
<li>Llamar a <code>theme</code> para establecer el tema de nuestra tabla original, y almacenando el resultado en una variable.</li>
<li>Añadir el paginador a esa variable llamando a <code>theme_pager</code>, pero esta vez usando &lsquo;pager&rsquo; como tipo, para así llamar a la función con subrayado <code>theme_pager</code>, y concatenarlo con nuestra variable.</li>
<li>Finalmente, establecemos el tema a la salida como una página a renderizar lista para mostrar.</li>
</ol>
<p>Simple, ¿no?</p>
<h2 id="paso-7-ordenación">Paso 7: Ordenación</h2>
<p>El paso final en la ruta de la Tabla Zen es la ordenación de la tabla. ¿No estaría bien poder ordenar por un campo específico distinto del ID, o simplemente cambiar el orden de la tabla, al vuelo?</p>
<p>Bien, con unos pocos cambios en nuestro código, ¡podemos!</p>
<p>¿Recuerda el array de cabeceras que creamos anteriormente? Bien, ahora nos va a venir de perlas.</p>
<p>Para que la ordenación de la tabla funcione, tenemos que indicarle cómo ordenar los datos. Se hace con el array de cabeceras. Simplemente se le da a cada cabecera (que es el nombre del campo en la base de datos) el orden por el que ordenar los datos.</p>
<p>En el siguiente ejemplo, usaremos el campo &lsquo;Name&rsquo;.</p>
<p>Así, nuestro array de cabeceras queda de la forma:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="k">array</span> <span class="p">(</span> <span class="s1">&#39;data&#39;</span> <span class="o">=&gt;</span> <span class="nx">t</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">),</span> <span class="s1">&#39;field&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;sort&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;desc&#39;</span> <span class="p">),</span>
</span></span><span class="line"><span class="cl"><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Esto nos permitirá ordenar por un campo llamado &rsquo;name&rsquo;, y ordenar en orden descendiente cuando se pulse sobre la cabecera.</p>
<p>Ahora se requiere añadir la ordenación de las tablas SQL a nuestra SQL original:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$sql</span> <span class="o">=</span> <span class="s2">&#34;SELECT id, name, state, customer, creator FROM {[table]}&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// añadir el orden mediante la cláusula
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$sql</span> <span class="o">.=</span> <span class="nx">tablesort_sql</span> <span class="p">(</span> <span class="nv">$headers</span> <span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ahora le pasamos esto a nuestra llamada a <code>pager_query</code> y bingo, tenemos una tabla ordenable, paginada y con opciones extra.</p>
<h2 id="aún-más-lejos">Aún más lejos</h2>
<p>La belleza de Drupal es que puede llegar tan lejos como quiera. Una opción obvia es añadirle la funcionalidad de Arrastrar y Soltar, o envolverlo en una función <code>theme</code>, de manera que todo el código se añada a una página con con una llamada a su propia función de tema, como por ejemplo <code>theme ( 'paged_table', $data );</code>.</p>
<p>Por favor, hágame saber si lo encuentra útil o si ha llegado más lejos.</p>
<p>En futuras semanas iré comentando cómo definir sus propios elementos personalizables como mencioné más arriba.</p>
<p>¡Feliz codificación!</p>
<h2 id="nt">N.T.</h2>
<p>En el código, los literales se han mantenido en inglés. Así lo recomienda la gente de Drupal, ya que el inglés es el idioma oficial de Drupal. Las traducciones al resto de idiomas se realizarán todas de la misma manera, con el inglés como base.</p></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Actualizado el 28 Jan 2021</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Compartir en Twitter" data-sharer="twitter" data-url="https://magmax.org/blog/drupal-tabla-perfecta/" data-title="Tablas en Drupal: Haciendo una tabla perfecta" data-via="magmax_en" data-hashtags="drupal"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Compartir en Facebook" data-sharer="facebook" data-url="https://magmax.org/blog/drupal-tabla-perfecta/" data-hashtag="drupal"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Compartir en Linkedin" data-sharer="linkedin" data-url="https://magmax.org/blog/drupal-tabla-perfecta/"><i class="fab fa-linkedin fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Compartir en WhatsApp" data-sharer="whatsapp" data-url="https://magmax.org/blog/drupal-tabla-perfecta/" data-title="Tablas en Drupal: Haciendo una tabla perfecta" data-web><i class="fab fa-whatsapp fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Compartir en Tumblr" data-sharer="tumblr" data-url="https://magmax.org/blog/drupal-tabla-perfecta/" data-title="Tablas en Drupal: Haciendo una tabla perfecta" data-tags="drupal"><i class="fab fa-tumblr fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Compartir en Reddit" data-sharer="reddit" data-url="https://magmax.org/blog/drupal-tabla-perfecta/"><i class="fab fa-reddit fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Compartir en Instapaper" data-sharer="instapaper" data-url="https://magmax.org/blog/drupal-tabla-perfecta/" data-title="Tablas en Drupal: Haciendo una tabla perfecta" data-description=""><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/instapaper.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Compartir en 微博" data-sharer="weibo" data-url="https://magmax.org/blog/drupal-tabla-perfecta/" data-title="Tablas en Drupal: Haciendo una tabla perfecta"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Compartir en Blogger" data-sharer="blogger" data-url="https://magmax.org/blog/drupal-tabla-perfecta/" data-title="Tablas en Drupal: Haciendo una tabla perfecta" data-description=""><i class="fab fa-blogger fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/drupal/">drupal</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Regresar</a></span>&nbsp;|&nbsp;<span><a href="/">Inicio</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/blog/google-adiccion/" class="prev" rel="prev" title="Google-Adicción"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>Google-Adicción</a>
            <a href="/blog/derechos-fundamentales-internet/" class="next" rel="next" title="Derechos fundamentales de Internet">Derechos fundamentales de Internet<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
<div id="comments"><div id="disqus_thread" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://disqus.com/?ref_noscript">Disqus</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Con la tecnología de <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.114.1">Hugo</a> | Tema - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2022 - 2023</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Miguel Ángel</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Volver arriba">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="Ver comentarios">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css"><script type="text/javascript" src="https://magmax.disqus.com/embed.js" defer></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/copy-tex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/mhchem.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copiar al portapapeles","maxShownLines":50},"comment":{},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false}};</script><script type="text/javascript" src="/js/theme.min.js"></script><script type="text/javascript">
            window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());
            gtag('config', 'G-X5FEBMGR06', { 'anonymize_ip': true });
        </script><script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=G-X5FEBMGR06" async></script></body>
</html>
