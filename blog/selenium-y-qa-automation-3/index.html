<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>Selenium y QA Automation: PageObjects - El blog de MagMax</title><meta name="Description" content="Tras la descripción del uso de Selenium/Webdriver, pasamos a cómo organizar los tests, explicando los PageObjects"><meta property="og:title" content="Selenium y QA Automation: PageObjects" />
<meta property="og:description" content="Tras la descripción del uso de Selenium/Webdriver, pasamos a cómo organizar los tests, explicando los PageObjects" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://magmax.org/blog/selenium-y-qa-automation-3/" />
<meta property="og:image" content="https://magmax.org/icons/favicon.png"/>
<meta property="article:published_time" content="2013-03-29T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-01-28T00:00:00+00:00" /><meta property="og:site_name" content="El blog de MagMax" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://magmax.org/icons/favicon.png"/>

<meta name="twitter:title" content="Selenium y QA Automation: PageObjects"/>
<meta name="twitter:description" content="Tras la descripción del uso de Selenium/Webdriver, pasamos a cómo organizar los tests, explicando los PageObjects"/>
<meta name="application-name" content="El blog de MagMax">
<meta name="apple-mobile-web-app-title" content="El blog de MagMax"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://magmax.org/blog/selenium-y-qa-automation-3/" /><link rel="prev" href="https://magmax.org/blog/emacs-y-ficheros-basura/" /><link rel="next" href="https://magmax.org/blog/python-tornado/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Selenium y QA Automation: PageObjects",
        "inLanguage": "es",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/magmax.org\/blog\/selenium-y-qa-automation-3\/"
        },"genre": "posts","keywords": "selenium, webdriver, automation","wordcount":  1165 ,
        "url": "https:\/\/magmax.org\/blog\/selenium-y-qa-automation-3\/","datePublished": "2013-03-29T00:00:00+00:00","dateModified": "2021-01-28T00:00:00+00:00","publisher": {
            "@type": "Organization",
            "name": "Miguel Ángel"},"author": {
                "@type": "Person",
                "name": "Miguel Ángel"
            },"description": "Tras la descripción del uso de Selenium/Webdriver, pasamos a cómo organizar los tests, explicando los PageObjects"
    }
    </script></head>
    <body header-desktop="" header-mobile=""><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="El blog de MagMax"><img
        class="lazyload logo"
        src="/svg/loading.min.svg"
        data-src="/icons/favicon.png"
        data-srcset="/icons/favicon.png, /icons/favicon.png 1.5x, /icons/favicon.png 2x"
        data-sizes="auto"
        alt="/icons/favicon.png"
        title="/icons/favicon.png" />MagMax Blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/"> Inicio </a><a class="menu-item" href="/tags"> Tags </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item language" title="Selecciona el lenguage">Español<i class="fas fa-chevron-right fa-fw"></i>
                        <select class="language-select" id="language-select-desktop" onchange="location = this.value;"><option value="/blog/selenium-y-qa-automation-3/" selected>Español</option></select>
                    </a><a href="javascript:void(0);" class="menu-item theme-switch" title="Cambia el tema">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="El blog de MagMax"><img
        class="lazyload logo"
        src="/svg/loading.min.svg"
        data-src="/icons/favicon.png"
        data-srcset="/icons/favicon.png, /icons/favicon.png 1.5x, /icons/favicon.png 2x"
        data-sizes="auto"
        alt="/icons/favicon.png"
        title="/icons/favicon.png" />MagMax Blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/" title="">Inicio</a><a class="menu-item" href="/tags" title="">Tags</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Cambia el tema">
                <i class="fas fa-adjust fa-fw"></i>
            </a><a href="javascript:void(0);" class="menu-item" title="Selecciona el lenguage">Español<i class="fas fa-chevron-right fa-fw"></i>
                    <select class="language-select" onchange="location = this.value;"><option value="/blog/selenium-y-qa-automation-3/" selected>Español</option></select>
                </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contenido</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">Selenium y QA Automation: PageObjects</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>Miguel Ángel</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="29 Mar 2013">29 Mar 2013</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;1165 palabras&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;6 minutos&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>Contenido</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#enlaces-a-otras-pantallas">Enlaces a otras pantallas</a></li>
    <li><a href="#distintos-resultados-para-una-misma-acción">Distintos resultados para una misma acción</a></li>
    <li><a href="#comprobaciones">Comprobaciones</a></li>
    <li><a href="#páginas-muy-grandes">Páginas muy grandes</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>En los artículos anteriores, &ldquo;<a href="https://magmax.org/blog/selenium-y-qa-automation/" title="Selenium y QA Automation" rel="">Selenium y QA Automation</a>&rdquo; y &ldquo;<a href="https://magmax.org/blog/selenium-y-qa-automation-2/" title="Selenium y QA Automation: Tests" rel="">Selenium y QA Automation: Tests</a>&rdquo; hemos visto cómo utilizar <a href="https://docs.seleniumhq.org/" title="Selenium Official Site" target="_blank" rel="noopener noreffer">Selenium/Webdriver</a>.</p>
<p>En este caso vamos a ver cómo organizar estos tests. Realmente no es necesario el conocimiento previo de Selenium, ya que puede utilizarse algún otro <em>framework</em>. Sin embargo, sí que resulta interesante ya que lo usaremos para los ejemplos.</p>
<p>Aunque los <em>PageObjects</em> se idearon para pruebas en la Web (de hecho, creo que son una idea de Selenium), este artículo está escrito pensando que los <em>PageObjects</em> pueden usarse tanto en aplicaciones de escritorio como web, por lo que veréis &ldquo;pantalla&rdquo; o &ldquo;página&rdquo; indistintamente.</p>
<figure>
    <img src="/images/selenium.jpg"
         alt="Selenium"/> 
</figure>

<h1 id="creando-tests">Creando tests</h1>
<p>Cuando uno comienza a escribir tests, comienza haciendo las cosas mal. Es normal. Para hacer las cosas bien hechas es necesario adquirir experiencia.</p>
<p>Lo primero que suele hacerse es escribir toda la inicialización de un test en el propio test. Poco a poco, uno comienza a darse cuenta de que no hace más que repetirse, así que decide pasar al siguiente nivel: crear funciones dentro del propio <em>Test Case</em>, de manera que pueda reutilizarlas.</p>
<p>Sin embargo, se sigue repitiendo código entre distintas <em>Suites</em>. Así que se aumenta al siguiente nivel: Crear archivos aparte que permitan reutilizar toda esta estructura.</p>
<h1 id="pageobjects">PageObjects</h1>
<p>Los <strong>PageObjects</strong> son el siguiente paso. Consisten en encapsular la funcionalidad de nuestra aplicación en objetos. Dicho de otro modo: Consisten en modelar de nuevo nuestra aplicación, de manera que cada pantalla sea un objeto (un <em>PageObject</em>) y cada acción que pueda realizar el usuario sea un método.</p>
<p>Serán los PageObjects quienes interactúen con la aplicación principal, aislando este uso de los tests y consiguiendo así tests más robustos.</p>
<h1 id="ejemplo">Ejemplo</h1>
<p>Y llegados a este punto, vamos con un ejemplo completo. Consiste en un formulario que, al pulsar el botón, reemplaza el propio formulario por un saludo:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="c">&lt;!-- file: index.html --&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>PageObjects Example (By MagMax)<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/JavaScript&#34;</span><span class="p">&gt;</span>
      <span class="kd">function</span> <span class="nx">greet</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">myAnchor</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&#34;content&#34;</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">mySpan</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&#34;span&#34;</span><span class="p">);</span>
        <span class="nx">mySpan</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&#34;Hello, &#34;</span> <span class="o">+</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&#34;name&#34;</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
        <span class="nx">myAnchor</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">replaceChild</span><span class="p">(</span><span class="nx">mySpan</span><span class="p">,</span> <span class="nx">myAnchor</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;content&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&#34;name&#34;</span><span class="p">&gt;</span>Name:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;name&#34;</span> <span class="p">/&gt;</span>
      <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;submit&#34;</span> <span class="na">onClick</span><span class="o">=</span><span class="s">&#34;return greet();&#34;</span><span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>Y ahora vamos con los tests:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># FILE: exampleTest.py</span>
<span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">from</span> <span class="nn">selenium</span> <span class="kn">import</span> <span class="n">webdriver</span>
<span class="kn">from</span> <span class="nn">selenium.common.exceptions</span> <span class="kn">import</span> <span class="n">NoSuchElementException</span>

<span class="k">class</span> <span class="nc">BrowserTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="n">BASE_URL</span> <span class="o">=</span> <span class="s1">&#39;https://localhost:8000&#39;</span>
    <span class="n">SELENIUM_URL</span> <span class="o">=</span> <span class="s1">&#39;https://localhost:4444/wd/hub&#39;</span>
    <span class="n">BROWSER_NAME</span> <span class="o">=</span> <span class="s1">&#39;firefox&#39;</span>

    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">getBrowser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">address</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Remote</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">SELENIUM_URL</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;browserName&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">BROWSER_NAME</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">address</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span>


<span class="k">class</span> <span class="nc">PageObject</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">browser</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_browser</span> <span class="o">=</span> <span class="n">browser</span>


<span class="k">class</span> <span class="nc">GreetingsPageObject</span><span class="p">(</span><span class="n">PageObject</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">writeName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_browser</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">submit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_browser</span><span class="o">.</span><span class="n">find_element_by_css_selector</span><span class="p">(</span><span class="s1">&#39;[type=submit]&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">getContent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_browser</span><span class="o">.</span><span class="n">find_element_by_css_selector</span><span class="p">(</span><span class="s1">&#39;span&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>


<span class="k">class</span> <span class="nc">AutomationTest</span><span class="p">(</span><span class="n">BrowserTest</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test_the_title_is_set</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">browser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getBrowser</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
        <span class="n">greetingsPage</span> <span class="o">=</span> <span class="n">GreetingsPageObject</span><span class="p">(</span><span class="n">browser</span><span class="p">)</span>

        <span class="n">greetingsPage</span><span class="o">.</span><span class="n">writeName</span><span class="p">(</span><span class="s2">&#34;MagMax&#34;</span><span class="p">)</span>
        <span class="n">greetingsPage</span><span class="o">.</span><span class="n">submit</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="s1">&#39;Hello, MagMax&#39;</span><span class="p">,</span> <span class="n">greetingsPage</span><span class="o">.</span><span class="n">getContent</span><span class="p">())</span>
</code></pre></td></tr></table>
</div>
</div><p>Es un poquito largo, pero vamos a analizarlo para ver que no es tan complicado.</p>
<p>Por una parte, tenemos la clase <code>BrowserTest</code>, que ya analizamos en <a href="https://magmax.org/blog/selenium-y-qa-automation-2/" title="Selenium y QA Automation: Tests" rel="">el artículo anterior</a>. Como vimos, en esta clase se enmascara el acceso principal a Selenium. Vemos que está configurado para utilizar el servidor. Podéis modificarlo para que utilice <code>webdriver.Firefox</code> en lugar de <code>webdriver.Remote</code> si queréis simplificarlo, pero con este cambio estaréis perdiendo versatilidad. De esto hablaré más en otro artículo.</p>
<p>A continuación creamos un <code>PageObject</code> básico, que lo único que implementa es el constructor. Con el fin de poder acceder a Selenium, necesitamos el driver. La idea es, justamente, usar el driver exclusivamente desde los <strong>PageObjects</strong>.</p>
<p>Lo siguiente es el <em>PageObject</em> propiamente dicho, en la clase <code>GreetingsPageObject</code>, en la que definimos las acciones que se pueden realizar en la página:</p>
<ul>
<li><code>writeName</code>: escribe el nombre en el lugar adecuado.</li>
<li><code>submit</code>: envía los datos.</li>
<li><code>getContent</code>: Obtiene el contenido final.</li>
</ul>
<p>Y finalmente el test en la clase <code>AutomationTest</code>, que define claramente lo que se desea hacer.</p>
<p>Me gustaría hacer incapié en varias cosas que podéis observar en este ejemplo:</p>
<ul>
<li>No se hacen comprobaciones en el <em>PageObject</em>.</li>
<li>No se accede directamente a Selenium/Webdriver desde el test. Únicamente desde el <em>PageObject</em>.</li>
<li>Estamos creando el objeto directamente desde el Test, pero sería mejor utilizar una <strong>Factory</strong>.</li>
</ul>
<h1 id="problemas">Problemas</h1>
<p>Los <em>PageObjects</em> no están exentos de problemas, pero ya hay quien se ha peleado con éstos y ha aportado algunas soluciones:</p>
<h2 id="enlaces-a-otras-pantallas">Enlaces a otras pantallas</h2>
<p>Es normal que, al pulsar un botón, aparezca otra pantalla/página.</p>
<p>La forma de modelar esto es mediante la devolución de otro PageObject que modele la página destino.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">Desktop</span><span class="p">(</span><span class="n">PageObject</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">Login</span><span class="p">(</span><span class="n">PageObject</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">login</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Desktop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_browser</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><em>NOTA</em>: Se supone que ambas clases heredan de los <strong>PageObjects</strong> del ejemplo, por lo que necesitan el browser en su constructor.</p>
<h2 id="distintos-resultados-para-una-misma-acción">Distintos resultados para una misma acción</h2>
<p>En ocasiones podemos tener distintos resultados para una misma acción, dependiendo del estado interno. Por ejemplo, en la ventana de <em>Login</em>, el resultado será diferente si el <em>login</em> es válido o inválido.</p>
<p>La solución a este problema es utilizar distintos métodos que modelen cada una de estas posibilidades:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">Login</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">login</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># ...</span>
    <span class="k">def</span> <span class="nf">login_no_password</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># ...</span>
    <span class="k">def</span> <span class="nf">login_invalid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># ...</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="comprobaciones">Comprobaciones</h2>
<p>Todas las comprobaciones deberían hacerse en el propio Test y no en el <em>PageObject</em>. De esta manera se aíslan los Tests del manejo de la aplicación.  No deberían realizarse comprobaciones en los PageObjects, ya que esto rome la encapsulación.</p>
<p>Existe una excepción. Es un patrón bastante corriente comprobar que estamos en la página que debemos estar al crear un PageObject. Esto es normal, ya que encontrarnos en una página incorrecta puede dar lugar a errores más difíciles de encontrar.</p>
<p>Por ello, suelen utilizarse los constructores para realizar este tipo de comprobaciones. Hay que evitar realizar estas comprobaciones en otros sitios. Sin embargo, debe tratarse de realizar comprobaciones rápidas, ya que se realizarán muy a menudo.</p>
<h2 id="páginas-muy-grandes">Páginas muy grandes</h2>
<p>En ocasiones vamos a encontrar páginas muy grandes, que suelen dividirse en objetos más pequeños y, a menudo, reutilizados en distintas páginas.</p>
<p>En estos casos debemos crear <em>PageWidgets</em>, que embeban la funcionalidad de todo el componente. Así resultará más sencillo reutilizarlos y organizarlos.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">Login</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">menu</span> <span class="o">=</span> <span class="n">MenuPageWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">header</span> <span class="o">=</span> <span class="n">HeaderPageWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">footer</span> <span class="o">=</span> <span class="n">FooterPageWidget</span><span class="p">()</span>
        <span class="c1"># ...</span>
</code></pre></td></tr></table>
</div>
</div><h1 id="ventajas">Ventajas</h1>
<ul>
<li>Si usamos un <em>framework</em> diferente de Selenium/Webdriver, es suficiente cambiar la implementación de los PageObjects, ya que el funcionamiento de las páginas debería ser el mismo. Los tests seguirán siendo igual de válidos.</li>
<li>Es más fácil reutilizar la funcionalidad.</li>
<li>Los tests son independientes del acceso a la Web.</li>
<li>Los tests se quedan más sencillos.</li>
</ul>
<h1 id="referencias">Referencias</h1>
<p>Lo mejor es irse a la propia web de <a href="https://docs.seleniumhq.org/" title="Selenium Official Site" target="_blank" rel="noopener noreffer">selenium</a>, donde está el artículo sobre <a href="https://code.google.com/p/selenium/wiki/PageObjects" title="PageObjects en Selenium/Webdriver" target="_blank" rel="noopener noreffer">Page Objects</a>. Es un artículo bastante conciso, en el que se proponen ejemplos en Java.</p></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Actualizado el 28 Jan 2021</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Compartir en Twitter" data-sharer="twitter" data-url="https://magmax.org/blog/selenium-y-qa-automation-3/" data-title="Selenium y QA Automation: PageObjects" data-hashtags="selenium,webdriver,automation"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="Compartir en Facebook" data-sharer="facebook" data-url="https://magmax.org/blog/selenium-y-qa-automation-3/" data-hashtag="selenium"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="Compartir en Linkedin" data-sharer="linkedin" data-url="https://magmax.org/blog/selenium-y-qa-automation-3/"><i class="fab fa-linkedin fa-fw"></i></a><a href="javascript:void(0);" title="Compartir en WhatsApp" data-sharer="whatsapp" data-url="https://magmax.org/blog/selenium-y-qa-automation-3/" data-title="Selenium y QA Automation: PageObjects" data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href="javascript:void(0);" title="Compartir en Tumblr" data-sharer="tumblr" data-url="https://magmax.org/blog/selenium-y-qa-automation-3/" data-title="Selenium y QA Automation: PageObjects" data-caption="Tras la descripción del uso de Selenium/Webdriver, pasamos a cómo organizar los tests, explicando los PageObjects" data-tags="selenium,webdriver,automation"><i class="fab fa-tumblr fa-fw"></i></a><a href="javascript:void(0);" title="Compartir en Reddit" data-sharer="reddit" data-url="https://magmax.org/blog/selenium-y-qa-automation-3/"><i class="fab fa-reddit fa-fw"></i></a><a href="javascript:void(0);" title="Compartir en Instapaper" data-sharer="instapaper" data-url="https://magmax.org/blog/selenium-y-qa-automation-3/" data-title="Selenium y QA Automation: PageObjects" data-description="Tras la descripción del uso de Selenium/Webdriver, pasamos a cómo organizar los tests, explicando los PageObjects"><i data-svg-src="/lib/simple-icons/icons/instapaper.min.svg"></i></a><a href="javascript:void(0);" title="Compartir en Digg" data-sharer="digg" data-url="https://magmax.org/blog/selenium-y-qa-automation-3/"><i class="fab fa-digg fa-fw"></i></a><a href="javascript:void(0);" title="Compartir en Blogger" data-sharer="blogger" data-url="https://magmax.org/blog/selenium-y-qa-automation-3/" data-title="Selenium y QA Automation: PageObjects" data-description="Tras la descripción del uso de Selenium/Webdriver, pasamos a cómo organizar los tests, explicando los PageObjects"><i class="fab fa-blogger fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/selenium/">selenium</a>,&nbsp;<a href="/tags/webdriver/">webdriver</a>,&nbsp;<a href="/tags/automation/">automation</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Regresar</a></span>&nbsp;|&nbsp;<span><a href="/">Inicio</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/blog/emacs-y-ficheros-basura/" class="prev" rel="prev" title="Emacs y ficheros basura"><i class="fas fa-angle-left fa-fw"></i>Emacs y ficheros basura</a>
            <a href="/blog/python-tornado/" class="next" rel="next" title="Python Tornado">Python Tornado<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Provisto por <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.79.1">Hugo</a> | Tema - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2021</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Miguel Ángel</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Volver arriba">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="Ver comentarios">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/katex/katex.min.css"><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript" src="/lib/katex/katex.min.js"></script><script type="text/javascript" src="/lib/katex/auto-render.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copiar al portapapeles","maxShownLines":10},"comment":{},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false}};</script><script type="text/javascript" src="/js/theme.min.js"></script><script type="text/javascript">
            window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());
            gtag('config', 'UA-9308241-3', { 'anonymize_ip': true });
        </script><script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=UA-9308241-3" async></script></body>
</html>
