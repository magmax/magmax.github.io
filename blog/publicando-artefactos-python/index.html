<!DOCTYPE html>
<html prefix="
og: https://ogp.me/ns#
article: https://ogp.me/ns/article#
" lang="es">
<head>
<meta charset="utf-8">
<meta name="description" content="Muestro el proceso que he seguido para publicar artefactos Python en pypi, para poder descargarlos con pip.">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Cache-Control" content="max-age=43200">
<meta http-equiv="ETag" content="b'43516d322f35b42f7136bc9e4ca4c9c80cc1466c'">
<title>Publicando artefactos Python | MagMax Blog</title>
<link href="/assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="/assets/css/code.css" rel="stylesheet" type="text/css">
<link href="/assets/css/colorbox.css" rel="stylesheet" type="text/css">
<link href="/assets/css/theme.css" rel="stylesheet" type="text/css">
<link href="/assets/css/custom.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="http://feeds.feedburner.com/magmax">
<link rel="canonical" href="http://magmax.org/blog/publicando-artefactos-python/">
<link rel="icon" href="/favicon.png" sizes="128x128">
<link rel="icon" href="/favicon_330.png" sizes="330x330">
<link rel="icon" href="/favicon.ico" sizes="16x16">
<meta name="description" itemprop="description" content="Muestro el proceso que he seguido para publicar artefactos Python en pypi, para poder descargarlos con pip.">
<meta name="author" content="Miguel Ángel García">
<link rel="prev" href="/blog/elasticsearch-y-logstash/" title="ElasticSearch y Logstash" type="text/html">
<link rel="next" href="/blog/combinando-git-y-subversion/" title="Combinando Git y Subversion" type="text/html">
<meta property="og:site_name" content="MagMax Blog">
<meta property="og:title" content="Publicando artefactos Python">
<meta property="og:url" content="http://magmax.org/blog/publicando-artefactos-python/">
<meta property="og:description" content="Muestro el proceso que he seguido para publicar artefactos Python en pypi, para poder descargarlos con pip.">
<meta property="og:type" content="article">
<meta property="article:author" content="Miguel Ángel García">
<meta property="article:published_time" content="2014-05-14T00:00:00+00:00">
<meta property="article:updated" content="2014-05-14T00:00:00">
<meta property="article:tag" content="package">
<meta property="article:tag" content="python">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@magmax_en">
<meta name="twitter:creator" content="@magmax">
<meta name="twitter:title" content="MagMax Blog">
<meta name="twitter:description" content="Muestro el proceso que he seguido para publicar artefactos Python en pypi, para poder descargarlos con pip.">
<meta name="twitter:url" content="http://magmax.org//blog/publicando-artefactos-python/">
<meta name="twitter:image" content="http://magmax.org/favicon.png">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Ir al contenido principal</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation"><div class="container">
<!-- This keeps the margins nice -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://magmax.org/">

        <span id="blog-title">MagMax Blog</span>
      </a>
    </div>
<!-- /.navbar-header -->
    <div class="collapse navbar-collapse navbar-ex1-collapse">
      <ul class="nav navbar-nav">
<li>
<a href="/">Inicio</a>
                </li>
<li>
<a href="/archive.html">Archivo</a>
                </li>
<li>
<a href="/categories">Categorías</a>
                </li>
<li>
<a href="/projects">Proyectos</a>
                </li>
<li>
<a href="/news">Posts Externos</a>

        
      </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>
<form class="navbar-form navbar-left" role="search" action="http://google.com/search" method="get">
<div class="form-group">
<input type="hidden" name="sitesearch" value="magmax.org"><input type="text" name="q" class="form-control" placeholder="Search / Buscar">
</div>
</form>
</li>

        <li style="margin-left:0">
          <a href="http://feeds.feedburner.com/magmax">
            <img src="/assets/images/rss.png" style="width:22px;height:22px"></a>
        </li>

        
      </ul>
</div>
<!-- /.navbar-collapse -->
  </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
  <div class="body-content">
    <div class="row">
      <div class="page-content col-md-9">
        
        <article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="https://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="/blog/publicando-artefactos-python/" class="u-url">Publicando artefactos Python</a></h1>
            <div class="metadata text-muted">
              <i class="glyphicon glyphicon-calendar"></i>
              <p class="dateline">
                <time class="published dt-published" datetime="2014-05-14T00:00:00+00:00" title="2014-05-14">2014-05-14</time>
                // <time class="updated dt-updated" datetime="2014-05-14T00:00:00" title="2014-05-14">2014-05-14</time></p>
              <p class="commentline">            <a href="/blog/publicando-artefactos-python/#disqus_thread" data-disqus-identifier="cache/posts/publicando-artefactos-python.html">Comments</a>

</p>
              <address class="vcard author"><a class="url fn" href="https://magmax.org">Miguel Ángel García</a></address>
            </div>
            <br></header><div class="e-content entry-content" itemprop="articleBody text">
            <div>
<p>Hace un par de semanas que comencé un proyectillo Python que se ha transformado en mi primer paquete <a class="reference external" href="https://pypi.python.org/pypi">pypi</a> serio. Bueno, realmente se ha transformado en dos paquetes, lo que me ha hecho darme cuenta de lo repetitivo de algunas tareas... Y cómo no, he decidido compartirlo aquí.</p>
<p>Así aprovecharé para contar algunas lecciones aprendidas, ahorrando así tiempo la próxima vez y ayudando a otros. De hecho, ya estoy preparando el siguiente XD</p>
<p>Comenzaré desde el principio del todo: la creación del repositorio.</p>
<!-- TEASER_END -->
<div class="section" id="antes-de-publicar">
<h2>Antes de publicar</h2>
<div class="section" id="creando-un-repositorio">
<h3>Creando un repositorio</h3>
<p>Lo primero es crear un repositorio. No me voy a liar aquí a contar cómo hay que hacerlo, porque ya conté en su día <a class="reference external" href="/blog/usando-git">cómo crear un repositorio Git</a>. Baste decir que recomiendo <a class="reference external" href="http://git-scm.com/">Git</a> en <a class="reference external" href="https://github.com/">GitHub</a>, y más tarde veremos por qué.</p>
</div>
<div class="section" id="readme">
<h3>README</h3>
<p>Lo primero en el repositorio es crear el archivo <strong>README</strong>. En principio, tenemos varios formatos a elegir... Pero si queremos reutilizarlo para que se muestre lo mismo en <a class="reference external" href="https://pypi.python.org/pypi">pypi</a> y en <a class="reference external" href="https://github.com/">GitHub</a>, es recomendable usar <a class="reference external" href="http://docutils.sourceforge.net/rst.html">ReStructured Text</a>, que es lo único que entiende <a class="reference external" href="https://pypi.python.org/pypi">pypi</a>. Por lo tanto, debería llamarse <strong>README.rst</strong>.</p>
</div>
<div class="section" id="estructura">
<h3>Estructura</h3>
<p>Lo segundo a tener en cuenta es la estructura de directorios. Recomiendo la siguiente:</p>
<pre class="literal-block">
.
├── .coveragerc
├── .travis.yml
├── .gitignore
├── Makefile
├── README.rst
├── requirements-dev.txt
├── setup.py
├── tests
│   ├── acceptance
│   │   └── __init__.py
│   ├── integration
│   │   └── __init__.py
│   └── unit
│       └── __init__.py
└── &lt;library name&gt;
    └── __init__.py
</pre>
<p>En este tutorial me ha quedado muy largo porque tengo que mostrar casi todos ellos, pero podéis ver dos ejemplos funcionales: <a class="reference external" href="https://github.com/magmax/python-readchar/tree/master/">python-readchar</a> y <a class="reference external" href="https://github.com/magmax/python-inquirer/tree/master/">python-inquirer</a>. Recomiendo el primero por ser más sencillo.</p>
<p>Pues ya tenemos el repositorio y un archivo... ¡Comencemos!</p>
</div>
</div>
<div class="section" id="comenzando-el-proyecto">
<h2>Comenzando el proyecto</h2>
<p>Lo mejor es comenzar por definir el proyecto, con el archivo <strong>setup.py</strong>. Para su concepción recomiendo echar un ojo a las <a class="reference external" href="https://pypi.python.org/pypi/setuptools">setuptools</a>. Como suelo hacerle algún hack, os muestro un ejemplo:</p>
<div class="section" id="setup-py">
<h3>setup.py</h3>
<pre class="code python"><a name="rest_code_45b1235aad274cd39c405b9d15563287-1"></a><span class="c1"># -*- coding: utf-8 -*-</span>
<a name="rest_code_45b1235aad274cd39c405b9d15563287-2"></a>
<a name="rest_code_45b1235aad274cd39c405b9d15563287-3"></a><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span><span class="p">,</span> <span class="n">find_packages</span>
<a name="rest_code_45b1235aad274cd39c405b9d15563287-4"></a><span class="kn">from</span> <span class="nn">readchar</span> <span class="kn">import</span> <span class="n">__version__</span><span class="p">,</span> <span class="n">__description__</span>
<a name="rest_code_45b1235aad274cd39c405b9d15563287-5"></a>
<a name="rest_code_45b1235aad274cd39c405b9d15563287-6"></a>
<a name="rest_code_45b1235aad274cd39c405b9d15563287-7"></a><span class="k">def</span> <span class="nf">read_full_description</span><span class="p">():</span>
<a name="rest_code_45b1235aad274cd39c405b9d15563287-8"></a>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'README.rst'</span><span class="p">)</span> <span class="k">as</span> <span class="n">fd</span><span class="p">:</span>
<a name="rest_code_45b1235aad274cd39c405b9d15563287-9"></a>        <span class="k">return</span> <span class="n">fd</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<a name="rest_code_45b1235aad274cd39c405b9d15563287-10"></a>
<a name="rest_code_45b1235aad274cd39c405b9d15563287-11"></a>
<a name="rest_code_45b1235aad274cd39c405b9d15563287-12"></a><span class="n">setup</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'&lt;PACKAGE&gt;'</span><span class="p">,</span>
<a name="rest_code_45b1235aad274cd39c405b9d15563287-13"></a>      <span class="n">version</span><span class="o">=</span><span class="n">__version__</span><span class="p">,</span>
<a name="rest_code_45b1235aad274cd39c405b9d15563287-14"></a>      <span class="n">description</span><span class="o">=</span><span class="n">__description__</span><span class="p">,</span>
<a name="rest_code_45b1235aad274cd39c405b9d15563287-15"></a>      <span class="n">long_description</span><span class="o">=</span><span class="n">read_full_description</span><span class="p">(),</span>
<a name="rest_code_45b1235aad274cd39c405b9d15563287-16"></a>      <span class="n">classifiers</span><span class="o">=</span><span class="p">[</span>
<a name="rest_code_45b1235aad274cd39c405b9d15563287-17"></a>          <span class="s1">'Development Status :: 4 - Beta'</span><span class="p">,</span>
<a name="rest_code_45b1235aad274cd39c405b9d15563287-18"></a>          <span class="s1">'Environment :: Console'</span><span class="p">,</span>
<a name="rest_code_45b1235aad274cd39c405b9d15563287-19"></a>          <span class="s1">'Intended Audience :: Developers'</span><span class="p">,</span>
<a name="rest_code_45b1235aad274cd39c405b9d15563287-20"></a>          <span class="s1">'License :: OSI Approved :: MIT License'</span><span class="p">,</span>
<a name="rest_code_45b1235aad274cd39c405b9d15563287-21"></a>          <span class="s1">'Programming Language :: Python :: 3.3'</span><span class="p">,</span>
<a name="rest_code_45b1235aad274cd39c405b9d15563287-22"></a>          <span class="s1">'Topic :: Software Development'</span><span class="p">,</span>
<a name="rest_code_45b1235aad274cd39c405b9d15563287-23"></a>      <span class="p">],</span>
<a name="rest_code_45b1235aad274cd39c405b9d15563287-24"></a>      <span class="n">keywords</span><span class="o">=</span><span class="s1">'stdin,command line'</span><span class="p">,</span>
<a name="rest_code_45b1235aad274cd39c405b9d15563287-25"></a>      <span class="n">author</span><span class="o">=</span><span class="s1">'MagMax'</span><span class="p">,</span>
<a name="rest_code_45b1235aad274cd39c405b9d15563287-26"></a>      <span class="n">author_email</span><span class="o">=</span><span class="s1">'magmax@example.org'</span><span class="p">,</span>
<a name="rest_code_45b1235aad274cd39c405b9d15563287-27"></a>      <span class="n">url</span><span class="o">=</span><span class="s1">'https://example.org/repository'</span><span class="p">,</span>
<a name="rest_code_45b1235aad274cd39c405b9d15563287-28"></a>      <span class="n">license</span><span class="o">=</span><span class="s1">'Whatever'</span><span class="p">,</span>
<a name="rest_code_45b1235aad274cd39c405b9d15563287-29"></a>      <span class="n">packages</span><span class="o">=</span><span class="n">find_packages</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">[</span><span class="s1">'tests'</span><span class="p">,</span> <span class="s1">'venv'</span><span class="p">]),</span>
<a name="rest_code_45b1235aad274cd39c405b9d15563287-30"></a>      <span class="n">include_package_data</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a name="rest_code_45b1235aad274cd39c405b9d15563287-31"></a>      <span class="n">zip_safe</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<a name="rest_code_45b1235aad274cd39c405b9d15563287-32"></a>      <span class="n">install_requires</span><span class="o">=</span><span class="p">[</span>
<a name="rest_code_45b1235aad274cd39c405b9d15563287-33"></a>        <span class="p">],</span>
<a name="rest_code_45b1235aad274cd39c405b9d15563287-34"></a>      <span class="p">)</span>
</pre>
<p>Varias cosas aquí: como veis, importo la <strong>versión</strong> y la <strong>descripción</strong> del propio paquete  Eso me facilita tocar un único punto (más o menos) a la hora de crear el paquete. Luego veremos este archivo. El nombre de variable <strong>__version__</strong> es estándar, vamos, que se tiene que llamar así.</p>
<p>Además, la descripción larga la leo del propio archivo <strong>README.rst</strong> que comenté antes, de manera que se vea chulo en línea de órdenes y en <a class="reference external" href="https://pypi.python.org/pypi">pypi</a>. Tened cuidado, porque cualquier error y <a class="reference external" href="https://pypi.python.org/pypi">pypi</a> no lo renderizará como debe. <a class="reference external" href="https://github.com/">GitHub</a> es bastante más permisivo.</p>
<p>Finalmente, en el apartado <code>install_requires</code> podéis añadir todas las dependencias de la misma manera que en el <strong>requirements.txt</strong>. Intenté un <em>hack</em> para leerlo, pero durante la instalación no me lo encontraba... Así que opté por eliminar el archivo y gestionar los requisitos desde aquí. Es un tema sobre el que tengo que volver.</p>
</div>
<div class="section" id="paquete-init-py">
<h3>&lt;paquete&gt;/__init__.py</h3>
<pre class="code python"><a name="rest_code_d94e0be2ba5940e196bf94b625f403c4-1"></a><span class="n">__version__</span> <span class="o">=</span> <span class="s1">'0.1'</span>
<a name="rest_code_d94e0be2ba5940e196bf94b625f403c4-2"></a><span class="n">__description__</span> <span class="o">=</span> <span class="s1">'Loren Ipsum'</span>
</pre>
<p>Es necesario algo así para que lo lea bien nuestro programita <strong>setup.py</strong>. Para la versión hay mogollón de opiniones... La mía es que con dos ó tres números es suficiente. Tres como mucho si usais la fecha con formato YYYYMMDD (<code>mayor.fecha.minor</code>).</p>
</div>
</div>
<div class="section" id="probando">
<h2>Probando</h2>
<p>Un paquetito que se precie debe estar acompañado de pruebas... Y a ser posible de porcentajes de cobertura. Pues podemos usar herramientas gratuitas para ello: <a class="reference external" href="https://travis-ci.org">Travis</a> y <a class="reference external" href="https://coveralls.io">Coveralls</a></p>
<div class="section" id="travis">
<h3>Travis</h3>
<p>Es un sistema de integración continua gratuito para proyectos libres y de pago para los que no lo son. Permite ejecutar los tests de todos los <em>changesets</em>. Se configura mediante el archivo <strong>.travis.yml</strong>, situado en el directorio principal y con formato <a class="reference external" href="http://es.wikipedia.org/wiki/YAML">YAML</a>. Veamos un ejemplo:</p>
<pre class="literal-block">
language: python
python:
  - "2.6"
  - "2.7"
  - "3.2"
  - "3.3"

install:
  - pip install -r requirements-dev.txt
  - if [[ $TRAVIS_PYTHON_VERSION == 2* ]]; then pip install unittest2; fi
  - python setup.py install

script:
  - make pep8
  - if [[ $TRAVIS_PYTHON_VERSION != '2.6' ]]; then make flakes; fi
  - make test

after_success:
  - make coveralls

notifications:
  email:
    on_success: change
    on_failure: change
</pre>
<p>Básicamente crea un ejecutor para cada versión de Python y ejecuta los scripts del <code>install</code> y <code>script</code>, y si todo va bien, el <code>after_success</code>. Hay más pasos en el ciclo de vida, pero podéis verlos en la documentación de <a class="reference external" href="https://travis-ci.org">Travis</a>.</p>
<p>Para que funcione, tenéis que:</p>
<ol class="arabic simple">
<li>daros de alta en <a class="reference external" href="https://travis-ci.org">Travis</a>,</li>
<li>sincronizar vuestros proyectos <a class="reference external" href="https://github.com/">GitHub</a> (ahora entendéis por qué lo recomendaba, ¿eh?),</li>
<li>dar permisos a <a class="reference external" href="https://travis-ci.org">Travis</a> para instalar un <em>hook</em> en el repositorio,</li>
<li>y activarlo para el repositorio de vuestro proyecto.</li>
</ol>
<p>Los tres primeros se hacen sólo una vez y el último hay que repetirlo cada vez que comencemos un proyecto.</p>
<p>Como veis, el paso de <code>after_success</code> es llamar al plugin de <a class="reference external" href="https://coveralls.io">Coveralls</a>.</p>
</div>
<div class="section" id="coveralls">
<h3>Coveralls</h3>
<p>Requiere de un plugin para invocarlo. Yo suelo utilizar <a class="reference external" href="https://github.com/z4r/python-coveralls">python-coveralls</a>, pero también está disponible <a class="reference external" href="https://github.com/coagulant/coveralls-python">coveralls-python</a> (no, no me estoy quedando con vosotros). Se configura con el archivo <strong>.coverage</strong>:</p>
<pre class="literal-block">
[run]
omit = */tests*
</pre>
<p>Además de instalar el paquete correspondiente, es necesario darse de alta en <a class="reference external" href="https://coveralls.io">Coveralls</a>. Veréis información sobre claves SSL en la documentación y tal... pero eso sólo es para los proyectos privados.</p>
<p>Es necesario generar el archivo <strong>.coverage</strong> para que <a class="reference external" href="https://coveralls.io">Coveralls</a> muestre los resultados correctamente. Si usais <a class="reference external" href="https://nose.readthedocs.org/en/latest/">nose</a>, como yo, necesitaréis también <a class="reference external" href="https://pypi.python.org/pypi/nosexcover">nosexcover</a>.</p>
</div>
</div>
<div class="section" id="gestion">
<h2>Gestión</h2>
<p>Veamos cómo orquesto toda esta maraña de archivos: mediante <a class="reference external" href="http://virtualenv.readthedocs.org/en/latest/">virtualenv</a>. Siempre me creo el entorno <code>venv</code> y lo añado al archivo <strong>.gitignore</strong>:</p>
<pre class="literal-block">
*~
\#*
\.\#*
*.pyc
*.egg-info/
build/
dist/
venv/
.coverage
coverage.xml
</pre>
<p>Claro... He mencionado mogollón de historias, pero no mis herramientas, que están en el requirements-dev.txt:</p>
<pre class="literal-block">
pep8==1.5.1
flake8==2.1.0
nose==1.3.1
coverage==3.7.1
nosexcover==1.0.10
python-coveralls==2.4.2
doublex==1.8.1
pexpect==3.2
</pre>
<p>Me gusta indicar las versiones, por si algo se rompe por sorpresa, tenerlo controlado.</p>
<p>Además de éstas, suelo instalarme siempre <a class="reference external" href="http://ipython.org/">ipython</a>, pero no lo incluyo aquí porque es meter demasiada carga a <a class="reference external" href="https://travis-ci.org">Travis</a> cuando no lo va a usar.</p>
<p>Y, finalmente, el director de la orquesta, el archivo <strong>Makefile</strong>:</p>
<pre class="code make"><a name="rest_code_80eda8eb26df4623a11a95506a54a139-1"></a><span class="nv">MODULES</span><span class="o">=</span>&lt;PACKAGE NAME&gt;
<a name="rest_code_80eda8eb26df4623a11a95506a54a139-2"></a>
<a name="rest_code_80eda8eb26df4623a11a95506a54a139-3"></a><span class="nf">all</span><span class="o">:</span> <span class="n">pep</span>8 <span class="n">flakes</span> <span class="n">test</span>
<a name="rest_code_80eda8eb26df4623a11a95506a54a139-4"></a>
<a name="rest_code_80eda8eb26df4623a11a95506a54a139-5"></a><span class="nf">test</span><span class="o">::</span> <span class="n">clear_coverage</span> <span class="n">run_unit_tests</span> <span class="n">run_acceptance_tests</span>
<a name="rest_code_80eda8eb26df4623a11a95506a54a139-6"></a>
<a name="rest_code_80eda8eb26df4623a11a95506a54a139-7"></a><span class="nf">unit_test</span><span class="o">::</span> <span class="n">run_unit_tests</span>
<a name="rest_code_80eda8eb26df4623a11a95506a54a139-8"></a>
<a name="rest_code_80eda8eb26df4623a11a95506a54a139-9"></a><span class="nf">acceptance_test</span><span class="o">::</span> <span class="n">run_acceptance_tests</span>
<a name="rest_code_80eda8eb26df4623a11a95506a54a139-10"></a>
<a name="rest_code_80eda8eb26df4623a11a95506a54a139-11"></a><span class="nf">analysis</span><span class="o">::</span> <span class="n">pep</span>8 <span class="n">flakes</span>
<a name="rest_code_80eda8eb26df4623a11a95506a54a139-12"></a>
<a name="rest_code_80eda8eb26df4623a11a95506a54a139-13"></a><span class="nf">pep8</span><span class="o">:</span>
<a name="rest_code_80eda8eb26df4623a11a95506a54a139-14"></a>    @echo Checking PEP8 style...
<a name="rest_code_80eda8eb26df4623a11a95506a54a139-15"></a>    @pep8 --statistics <span class="si">${</span><span class="nv">MODULES</span><span class="si">}</span> tests
<a name="rest_code_80eda8eb26df4623a11a95506a54a139-16"></a>
<a name="rest_code_80eda8eb26df4623a11a95506a54a139-17"></a><span class="nf">flakes</span><span class="o">:</span>
<a name="rest_code_80eda8eb26df4623a11a95506a54a139-18"></a>    @echo Searching <span class="k">for</span> static errors...
<a name="rest_code_80eda8eb26df4623a11a95506a54a139-19"></a>    @pyflakes <span class="si">${</span><span class="nv">MODULES</span><span class="si">}</span>
<a name="rest_code_80eda8eb26df4623a11a95506a54a139-20"></a>
<a name="rest_code_80eda8eb26df4623a11a95506a54a139-21"></a><span class="nf">coveralls</span><span class="o">::</span>
<a name="rest_code_80eda8eb26df4623a11a95506a54a139-22"></a>    coveralls
<a name="rest_code_80eda8eb26df4623a11a95506a54a139-23"></a>
<a name="rest_code_80eda8eb26df4623a11a95506a54a139-24"></a><span class="nf">run_unit_tests</span><span class="o">:</span>
<a name="rest_code_80eda8eb26df4623a11a95506a54a139-25"></a>    @echo Running Tests...
<a name="rest_code_80eda8eb26df4623a11a95506a54a139-26"></a>    @nosetests -dv --exe --with-xcoverage --cover-package<span class="o">=</span><span class="si">${</span><span class="nv">MODULES</span><span class="si">}</span> --cover-tests tests/unit
<a name="rest_code_80eda8eb26df4623a11a95506a54a139-27"></a>
<a name="rest_code_80eda8eb26df4623a11a95506a54a139-28"></a><span class="nf">run_acceptance_tests</span><span class="o">:</span>
<a name="rest_code_80eda8eb26df4623a11a95506a54a139-29"></a>    @echo Running Tests...
<a name="rest_code_80eda8eb26df4623a11a95506a54a139-30"></a>    @nosetests -dv --exe tests/acceptance
<a name="rest_code_80eda8eb26df4623a11a95506a54a139-31"></a>
<a name="rest_code_80eda8eb26df4623a11a95506a54a139-32"></a><span class="nf">clear_coverage</span><span class="o">:</span>
<a name="rest_code_80eda8eb26df4623a11a95506a54a139-33"></a>    @echo Cleaning previous coverage...
<a name="rest_code_80eda8eb26df4623a11a95506a54a139-34"></a>    @coverage erase
</pre>
</div>
<div class="section" id="publicacion">
<h2>Publicación</h2>
<p>Ya sólo nos queda publicar el paquete en <a class="reference external" href="https://pypi.python.org/pypi">pypi</a>. Para ello seguiremos los siguientes pasos:</p>
<ol class="arabic simple">
<li>Registrarse en la web de <a class="reference external" href="https://pypi.python.org/pypi">pypi</a>
</li>
<li>Registrar el paquete: <code>python setup.py register</code>
</li>
<li>Empaquetar y subir: <code>python setup.py sdist upload</code>
</li>
</ol>
<p>Como veis, yo distribuyo los fuentes, ya que los binarios me dieron problemas.</p>
</div>
<div class="section" id="afinando">
<h2>Afinando</h2>
<p>Y sólo me queda contar cómo poner los iconos monos XD</p>
<p>Tanto <a class="reference external" href="https://travis-ci.org">Travis</a> como <a class="reference external" href="https://pypi.python.org/pypi">pypi</a> y <a class="reference external" href="https://coveralls.io">Coveralls</a> disponen de unos iconos accesibles con la misma URL. Como hemos dicho, vamos a usar el formato <a class="reference external" href="http://docutils.sourceforge.net/rst.html">ReStructured Text</a>, así que ésta es la manera más chula:</p>
<pre class="code text"><a name="rest_code_9bd16613c19d4910a4a04aff7aca01dd-1"></a>.. Uso:
<a name="rest_code_9bd16613c19d4910a4a04aff7aca01dd-2"></a>
<a name="rest_code_9bd16613c19d4910a4a04aff7aca01dd-3"></a>|pip version|
<a name="rest_code_9bd16613c19d4910a4a04aff7aca01dd-4"></a>|pip downloads|
<a name="rest_code_9bd16613c19d4910a4a04aff7aca01dd-5"></a>|travis|
<a name="rest_code_9bd16613c19d4910a4a04aff7aca01dd-6"></a>|coveralls|
<a name="rest_code_9bd16613c19d4910a4a04aff7aca01dd-7"></a>
<a name="rest_code_9bd16613c19d4910a4a04aff7aca01dd-8"></a>.. Al final del documento:
<a name="rest_code_9bd16613c19d4910a4a04aff7aca01dd-9"></a>
<a name="rest_code_9bd16613c19d4910a4a04aff7aca01dd-10"></a>.. |travis| image:: https://travis-ci.org/&lt;USER&gt;/&lt;REPOSITORY&gt;.png
<a name="rest_code_9bd16613c19d4910a4a04aff7aca01dd-11"></a>  :target: `Travis`_
<a name="rest_code_9bd16613c19d4910a4a04aff7aca01dd-12"></a>  :alt: Travis results
<a name="rest_code_9bd16613c19d4910a4a04aff7aca01dd-13"></a>
<a name="rest_code_9bd16613c19d4910a4a04aff7aca01dd-14"></a>.. |coveralls| image:: https://coveralls.io/repos/&lt;USER&gt;/&lt;REPOSITORY&gt;/badge.png
<a name="rest_code_9bd16613c19d4910a4a04aff7aca01dd-15"></a>  :target: `Coveralls`_
<a name="rest_code_9bd16613c19d4910a4a04aff7aca01dd-16"></a>  :alt: Coveralls results_
<a name="rest_code_9bd16613c19d4910a4a04aff7aca01dd-17"></a>
<a name="rest_code_9bd16613c19d4910a4a04aff7aca01dd-18"></a>.. |pip version| image:: https://pypip.in/v/&lt;PIP_NAME&gt;/badge.png
<a name="rest_code_9bd16613c19d4910a4a04aff7aca01dd-19"></a>    :target: https://pypi.python.org/pypi/&lt;PIP_NAME&gt;
<a name="rest_code_9bd16613c19d4910a4a04aff7aca01dd-20"></a>    :alt: Latest PyPI version
<a name="rest_code_9bd16613c19d4910a4a04aff7aca01dd-21"></a>
<a name="rest_code_9bd16613c19d4910a4a04aff7aca01dd-22"></a>.. |pip downloads| image:: https://pypip.in/d/&lt;PIP_NAME&gt;/badge.png
<a name="rest_code_9bd16613c19d4910a4a04aff7aca01dd-23"></a>    :target: https://pypi.python.org/pypi/&lt;PIP_NAME&gt;
<a name="rest_code_9bd16613c19d4910a4a04aff7aca01dd-24"></a>    :alt: Number of PyPI downloads
<a name="rest_code_9bd16613c19d4910a4a04aff7aca01dd-25"></a>
<a name="rest_code_9bd16613c19d4910a4a04aff7aca01dd-26"></a>.. _Travis: https://travis-ci.org/&lt;USER&gt;/&lt;REPOSITORY&gt;
<a name="rest_code_9bd16613c19d4910a4a04aff7aca01dd-27"></a>.. _Coveralls: https://coveralls.io/r/&lt;USER&gt;/&lt;REPOSITORY&gt;
</pre>
<p>Como véis, hay que cambiar <tt class="docutils literal">&lt;USER&gt;</tt>, <tt class="docutils literal">&lt;REPOSITORY&gt;</tt> y <tt class="docutils literal">&lt;PIP_NAME&gt;</tt>, y vale para cualquier proyecto.</p>
</div>
<div class="section" id="mas-informacion">
<h2>Más información</h2>
<p>Hay muchas cosas en el tintero aún, como subir la documentación a <a class="reference external" href="https://readthedocs.org/">read the docs</a>, pero este artículo ya tiene suficiente caña XD</p>
<p>Recomiendo indagar un poquito en cada herramienta si queréis ampliar funcionalidad.</p>
</div>
</div>
          </div>
          <br><div>
            <nav><span class="author">
                <span class="glyphicon glyphicon-user"></span> 
                <span>Publicado:Miguel Ángel García</span>
              </span>
               

              
              <span class="dateline">
                <span class="glyphicon glyphicon-calendar"></span> 
                <time class="published dt-published" datetime="2014-05-14T00:00:00+00:00" title="2014-05-14">2014-05-14</time></span>
               
              <span class="tags">
                <span class="glyphicon glyphicon-tags"></span> 
                <a class="label label-primary p-category" href="/categories/package/" rel="tag">package</a>
                <a class="label label-primary p-category" href="/categories/python/" rel="tag">python</a>
              </span>
                      <ul class="pager">
<li class="previous">
              <a href="/blog/elasticsearch-y-logstash/" rel="prev" title="ElasticSearch y Logstash">
                <span class="glyphicon glyphicon-arrow-left"></span>
                Publicación anterior
              </a>
            </li>
            <li class="next">
              <a href="/blog/combinando-git-y-subversion/" rel="next" title="Combinando Git y Subversion">
                Siguiente publicación
                <span class="glyphicon glyphicon-arrow-right"></span>
              </a>
            </li>
        </ul></nav>
</div>
          <section class="comments"><h2>Comentarios</h2>
                            <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="magmax",
            disqus_url="http://magmax.org/blog/publicando-artefactos-python/",
        disqus_title="Publicando artefactos Python",
        disqus_identifier="cache/posts/publicando-artefactos-python.html",
        disqus_config = function () {
            this.language = "es_ES";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="//disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


          </section></article><script>var disqus_shortname="magmax";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
      <aside class="sidebar col-md-3"><div>
<section class="panel panel-default"><div class="panel-heading">
    <h3 class="panel-title">Last comments</h3>
  </div>
  <div class="panel-body">
    <div id="disqus_last_comments" class="dsq-widget">
      <script type="text/javascript" src="https://magmax.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=0&amp;avatar_size=32&amp;excerpt_length=150">
      </script>
</div>
  </div>
</section>
</div>
          <div>
<section class="panel panel-default"><div class="panel-heading">
    <h3 class="panel-title">GitHub Repos</h3>
  </div>
  <div class="panel-body">
    <ul id="gh_repos" class="list-unstyled">
<li class="loading">Status updating…</li>
    </ul>
</div>
  <div class="panel-footer">
    <a href="https://github.com/magmax">@magmax</a> on GitHub
  </div>
</section>
</div>
      </aside>
</div>

    <footer>
      Contents © 2009-2020 <a href="mailto:">Miguel Ángel García</a> 
<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/2.5/es/">
<img alt="Creative Commons License BY-NC-SA" style="border-width:0; margin-bottom:12px;width:80px;height:15px;vertical-align:middle" src="https://i.creativecommons.org/l/by-nc-sa/2.5/es/80x15.png"></a>; Using <a href="/stories/credits/">a lot of free software</a>
      
    </footer>
</div>
</div>




<script data-main="/assets/js/main" src="/assets/js/libs/require/require.min.js"></script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-9308241-3', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
