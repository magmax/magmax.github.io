<!DOCTYPE html>
<html prefix="
og: https://ogp.me/ns#
article: https://ogp.me/ns/article#
" lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Cache-Control" content="max-age=43200">
<meta http-equiv="ETag" content="b'1566322fc0722093b12eca5f1e9215a3ab6698c5'">
<title>Django: Creación de un sitio básico con Admin | MagMax Blog</title>
<link href="/assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="/assets/css/code.css" rel="stylesheet" type="text/css">
<link href="/assets/css/colorbox.css" rel="stylesheet" type="text/css">
<link href="/assets/css/theme.css" rel="stylesheet" type="text/css">
<link href="/assets/css/custom.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="http://feeds.feedburner.com/magmax">
<link rel="canonical" href="http://magmax.org/blog/django-sitio-basico/">
<link rel="icon" href="/favicon_330.png" sizes="330x330">
<link rel="icon" href="/favicon.ico" sizes="16x16">
<link rel="icon" href="/favicon.png" sizes="128x128">
<meta name="author" content="Miguel Ángel García">
<link rel="prev" href="/blog/resaltado-sintaxis/" title="Resaltado de sintaxis en tu web" type="text/html">
<link rel="next" href="/blog/django-tests/" title="Django: Test del modelo y Fixtures" type="text/html">
<meta property="og:site_name" content="MagMax Blog">
<meta property="og:title" content="Django: Creación de un sitio básico con Admin">
<meta property="og:url" content="http://magmax.org/blog/django-sitio-basico/">
<meta property="og:description" content="Con todo el rollo de la mudanza me he dado cuenta de que no he escrito ningún artículo sobre Django. Estaba convencido de haberlo hecho. Así que voy a tener que arreglar el problema XD


Qué es
Django">
<meta property="og:type" content="article">
<meta property="article:author" content="Miguel Ángel García">
<meta property="article:published_time" content="2011-08-20T00:00:00+00:00">
<meta property="article:updated" content="2011-08-20T00:00:00">
<meta property="article:tag" content="django">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@magmax_en">
<meta name="twitter:creator" content="@magmax">
<meta name="twitter:title" content="MagMax Blog">
<meta name="twitter:description" content="El blog de un Ingeniero Informático: tutoriales, manuales, opiniones, comparativas, ...">
<meta name="twitter:url" content="http://magmax.org//blog/django-sitio-basico/">
<meta name="twitter:image" content="http://magmax.org/favicon.png">
<link rel="alternate" hreflang="en" href="/en/blog/django-sitio-basico/">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Ir al contenido principal</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation"><div class="container">
<!-- This keeps the margins nice -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://magmax.org/">

        <span id="blog-title">MagMax Blog</span>
      </a>
    </div>
<!-- /.navbar-header -->
    <div class="collapse navbar-collapse navbar-ex1-collapse">
      <ul class="nav navbar-nav">
<li>
<a href="/">Inicio</a>
                </li>
<li>
<a href="/archive.html">Archivo</a>
                </li>
<li>
<a href="/categories">Categorías</a>
                </li>
<li>
<a href="/projects">Proyectos</a>
                </li>
<li>
<a href="/news">Posts Externos</a>

        
      </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>
<form class="navbar-form navbar-left" role="search" action="http://google.com/search" method="get">
<div class="form-group">
<input type="hidden" name="sitesearch" value="magmax.org"><input type="text" name="q" class="form-control" placeholder="Search / Buscar">
</div>
</form>
</li>

        <li style="margin-left:0">
          <a href="http://feeds.feedburner.com/magmax">
            <img src="/assets/images/rss.png" style="width:22px;height:22px"></a>
        </li>

        
      </ul>
</div>
<!-- /.navbar-collapse -->
  </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
  <div class="body-content">
    <div class="row">
      <div class="page-content col-md-9">
        
        <article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="https://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="/blog/django-sitio-basico/" class="u-url">Django: Creación de un sitio básico con Admin</a></h1>
            <div class="metadata text-muted">
              <i class="glyphicon glyphicon-calendar"></i>
              <p class="dateline">
                <time class="published dt-published" datetime="2011-08-20T00:00:00+00:00" title="2011-08-20">2011-08-20</time>
                // <time class="updated dt-updated" datetime="2011-08-20T00:00:00" title="2011-08-20">2011-08-20</time></p>
              <p class="commentline">            <a href="/blog/django-sitio-basico/#disqus_thread" data-disqus-identifier="cache/posts/django-sitio-basico.html">Comments</a>

</p>
              <address class="vcard author"><a class="url fn" href="https://magmax.org">Miguel Ángel García</a></address>
            </div>
            <br><div class="metadata posttranslations translations">
              <h3 class="posttranslations-intro">También disponible en:</h3>
              <p><a href="/en/blog/django-sitio-basico/" rel="alternate" hreflang="en"><img src="/images/en.png"> English</a></p>
            </div>
          </header><div class="e-content entry-content" itemprop="articleBody text">
            <div>
<p>Con todo el rollo de la mudanza me he dado cuenta de que no he escrito ningún artículo sobre Django. Estaba convencido de haberlo hecho. Así que voy a tener que arreglar el problema XD</p>
<!-- TEASER_END -->
<div class="section" id="que-es">
<h2>Qué es</h2>
<p>Django es un framework para la creación de aplicaciones web. Se centra en el backend, ofreciendo plantillas para el frontend, aunque para este último seguramente utilicemos otro framework adicional tipo <a class="reference external" href="http://jquery.com/">JQuery</a> , <a class="reference external" href="http://dojotoolkit.org/">Dojo</a> , <a class="reference external" href="http://mootools.net/">Mootools</a> , <a class="reference external" href="http://www.prototypejs.org/">Prototype</a> , etc.</p>
</div>
<div class="section" id="instalacion">
<h2>Instalación</h2>
<p>Podemos instalarlo utilizando <a class="reference external" href="http://pypi.python.org/pypi/setuptools">easyinstall</a> , aunque es paquete <a class="reference external" href="http://www.debian.org/">Debian</a> . Se puede "aislar la instalación de un site Django":link://slug/virtualenv, con el fin de replicarla fácilmente.</p>
</div>
<div class="section" id="creacion">
<h2>Creación</h2>
<p>Vamos a crear un CMS pequeñito. Va a tener blogs y nada más. Para ello, lo primero será decirle a Django que nos cree el sitio:</p>
<pre class="code bash"><a name="rest_code_631a9f9ef3324e35926612d09e00303f-1"></a>$ django-admin startproject myblog
<a name="rest_code_631a9f9ef3324e35926612d09e00303f-2"></a>$ <span class="nb">cd</span> myblog
<a name="rest_code_631a9f9ef3324e35926612d09e00303f-3"></a>$ python manage.py startapp blog
<a name="rest_code_631a9f9ef3324e35926612d09e00303f-4"></a>$ tree
<a name="rest_code_631a9f9ef3324e35926612d09e00303f-5"></a>.
<a name="rest_code_631a9f9ef3324e35926612d09e00303f-6"></a><span class="p">|</span>-- blog
<a name="rest_code_631a9f9ef3324e35926612d09e00303f-7"></a><span class="p">|</span>   <span class="p">|</span>-- __init__.py
<a name="rest_code_631a9f9ef3324e35926612d09e00303f-8"></a><span class="p">|</span>   <span class="p">|</span>-- models.py
<a name="rest_code_631a9f9ef3324e35926612d09e00303f-9"></a><span class="p">|</span>   <span class="p">|</span>-- tests.py
<a name="rest_code_631a9f9ef3324e35926612d09e00303f-10"></a><span class="p">|</span>   <span class="sb">`</span>-- views.py
<a name="rest_code_631a9f9ef3324e35926612d09e00303f-11"></a><span class="p">|</span>-- __init__.py
<a name="rest_code_631a9f9ef3324e35926612d09e00303f-12"></a><span class="p">|</span>-- __init__.pyc
<a name="rest_code_631a9f9ef3324e35926612d09e00303f-13"></a><span class="p">|</span>-- manage.py
<a name="rest_code_631a9f9ef3324e35926612d09e00303f-14"></a><span class="p">|</span>-- settings.py
<a name="rest_code_631a9f9ef3324e35926612d09e00303f-15"></a><span class="p">|</span>-- settings.pyc
<a name="rest_code_631a9f9ef3324e35926612d09e00303f-16"></a><span class="sb">`</span>-- urls.py
<a name="rest_code_631a9f9ef3324e35926612d09e00303f-17"></a>
<a name="rest_code_631a9f9ef3324e35926612d09e00303f-18"></a><span class="m">1</span> directory, <span class="m">10</span> files
<a name="rest_code_631a9f9ef3324e35926612d09e00303f-19"></a>$
</pre>
<p>Antes de seguir, configuraremos la BBDD, modificando el archivo <tt class="docutils literal">settings.py</tt>, en el que indicaremos la BBDD a utilizar. Aprovechamos también para indicar en las aplicaciones instaladas que queremos utilizar "admin" y nuestro nuevo modulo:</p>
<pre class="code python"><a name="rest_code_9306bcc27b1f49339c6efba9a4b853bd-1"></a><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
<a name="rest_code_9306bcc27b1f49339c6efba9a4b853bd-2"></a>    <span class="s1">'default'</span><span class="p">:</span> <span class="p">{</span>
<a name="rest_code_9306bcc27b1f49339c6efba9a4b853bd-3"></a>        <span class="s1">'ENGINE'</span><span class="p">:</span> <span class="s1">'django.db.backends.sqlite3'</span><span class="p">,</span>
<a name="rest_code_9306bcc27b1f49339c6efba9a4b853bd-4"></a>        <span class="s1">'NAME'</span><span class="p">:</span> <span class="s1">'database.db'</span><span class="p">,</span>
<a name="rest_code_9306bcc27b1f49339c6efba9a4b853bd-5"></a>        <span class="s1">'USER'</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span>
<a name="rest_code_9306bcc27b1f49339c6efba9a4b853bd-6"></a>        <span class="s1">'PASSWORD'</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span>
<a name="rest_code_9306bcc27b1f49339c6efba9a4b853bd-7"></a>        <span class="s1">'HOST'</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span>
<a name="rest_code_9306bcc27b1f49339c6efba9a4b853bd-8"></a>        <span class="s1">'PORT'</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span>
<a name="rest_code_9306bcc27b1f49339c6efba9a4b853bd-9"></a>    <span class="p">}</span>
<a name="rest_code_9306bcc27b1f49339c6efba9a4b853bd-10"></a><span class="p">}</span>
<a name="rest_code_9306bcc27b1f49339c6efba9a4b853bd-11"></a>
<a name="rest_code_9306bcc27b1f49339c6efba9a4b853bd-12"></a><span class="n">TEMPLATE_DIRS</span> <span class="o">=</span> <span class="p">(</span>
<a name="rest_code_9306bcc27b1f49339c6efba9a4b853bd-13"></a>    <span class="s1">'/AQUI_VA_UNA_RUTA_ABSOLUTA/'</span>
<a name="rest_code_9306bcc27b1f49339c6efba9a4b853bd-14"></a><span class="p">)</span>
<a name="rest_code_9306bcc27b1f49339c6efba9a4b853bd-15"></a>
<a name="rest_code_9306bcc27b1f49339c6efba9a4b853bd-16"></a><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">(</span>
<a name="rest_code_9306bcc27b1f49339c6efba9a4b853bd-17"></a>    <span class="s1">'django.contrib.auth'</span><span class="p">,</span>
<a name="rest_code_9306bcc27b1f49339c6efba9a4b853bd-18"></a>    <span class="s1">'django.contrib.contenttypes'</span><span class="p">,</span>
<a name="rest_code_9306bcc27b1f49339c6efba9a4b853bd-19"></a>    <span class="s1">'django.contrib.sessions'</span><span class="p">,</span>
<a name="rest_code_9306bcc27b1f49339c6efba9a4b853bd-20"></a>    <span class="s1">'django.contrib.sites'</span><span class="p">,</span>
<a name="rest_code_9306bcc27b1f49339c6efba9a4b853bd-21"></a>    <span class="s1">'django.contrib.messages'</span><span class="p">,</span>
<a name="rest_code_9306bcc27b1f49339c6efba9a4b853bd-22"></a>    <span class="s1">'django.contrib.staticfiles'</span><span class="p">,</span>
<a name="rest_code_9306bcc27b1f49339c6efba9a4b853bd-23"></a>    <span class="s1">'django.contrib.admin'</span><span class="p">,</span>
<a name="rest_code_9306bcc27b1f49339c6efba9a4b853bd-24"></a>    <span class="s1">'blog'</span><span class="p">,</span>
<a name="rest_code_9306bcc27b1f49339c6efba9a4b853bd-25"></a><span class="p">)</span>
</pre>
<p>Dejad el resto de entradas como estén.</p>
<p>Con esto ya podemos ejecutar el servidor, aunque servirá poco:</p>
<pre class="code bash"><a name="rest_code_ec8606df3f344dc9b72eaba1ec4cbd26-1"></a>$ python manage.py syncdb
<a name="rest_code_ec8606df3f344dc9b72eaba1ec4cbd26-2"></a>Creating tables ...
<a name="rest_code_ec8606df3f344dc9b72eaba1ec4cbd26-3"></a>Creating table auth_permission
<a name="rest_code_ec8606df3f344dc9b72eaba1ec4cbd26-4"></a>Creating table auth_group_permissions
<a name="rest_code_ec8606df3f344dc9b72eaba1ec4cbd26-5"></a>Creating table auth_group
<a name="rest_code_ec8606df3f344dc9b72eaba1ec4cbd26-6"></a>Creating table auth_user_user_permissions
<a name="rest_code_ec8606df3f344dc9b72eaba1ec4cbd26-7"></a>Creating table auth_user_groups
<a name="rest_code_ec8606df3f344dc9b72eaba1ec4cbd26-8"></a>Creating table auth_user
<a name="rest_code_ec8606df3f344dc9b72eaba1ec4cbd26-9"></a>Creating table auth_message
<a name="rest_code_ec8606df3f344dc9b72eaba1ec4cbd26-10"></a>Creating table django_content_type
<a name="rest_code_ec8606df3f344dc9b72eaba1ec4cbd26-11"></a>Creating table django_session
<a name="rest_code_ec8606df3f344dc9b72eaba1ec4cbd26-12"></a>Creating table django_site
<a name="rest_code_ec8606df3f344dc9b72eaba1ec4cbd26-13"></a>
<a name="rest_code_ec8606df3f344dc9b72eaba1ec4cbd26-14"></a>You just installed Django<span class="s1">'s auth system, which means you don'</span>t have any superusers defined.
<a name="rest_code_ec8606df3f344dc9b72eaba1ec4cbd26-15"></a>Would you like to create one now? <span class="o">(</span>yes/no<span class="o">)</span>: yes
<a name="rest_code_ec8606df3f344dc9b72eaba1ec4cbd26-16"></a>Username <span class="o">(</span>Leave blank to use <span class="s1">'miguel'</span><span class="o">)</span>: admin
<a name="rest_code_ec8606df3f344dc9b72eaba1ec4cbd26-17"></a>E-mail address: admin@example.com
<a name="rest_code_ec8606df3f344dc9b72eaba1ec4cbd26-18"></a>Password:
<a name="rest_code_ec8606df3f344dc9b72eaba1ec4cbd26-19"></a>Password <span class="o">(</span>again<span class="o">)</span>:
<a name="rest_code_ec8606df3f344dc9b72eaba1ec4cbd26-20"></a>Superuser created successfully.
<a name="rest_code_ec8606df3f344dc9b72eaba1ec4cbd26-21"></a>Installing custom SQL ...
<a name="rest_code_ec8606df3f344dc9b72eaba1ec4cbd26-22"></a>Installing indexes ...
<a name="rest_code_ec8606df3f344dc9b72eaba1ec4cbd26-23"></a>No fixtures found.
<a name="rest_code_ec8606df3f344dc9b72eaba1ec4cbd26-24"></a>$ python manage.py runserver
<a name="rest_code_ec8606df3f344dc9b72eaba1ec4cbd26-25"></a>Validating models...
<a name="rest_code_ec8606df3f344dc9b72eaba1ec4cbd26-26"></a>
<a name="rest_code_ec8606df3f344dc9b72eaba1ec4cbd26-27"></a><span class="m">0</span> errors found
<a name="rest_code_ec8606df3f344dc9b72eaba1ec4cbd26-28"></a>Django version <span class="m">1</span>.3, using settings <span class="s1">'myblog.settings'</span>
<a name="rest_code_ec8606df3f344dc9b72eaba1ec4cbd26-29"></a>Development server is running at http://127.0.0.1:8000/
<a name="rest_code_ec8606df3f344dc9b72eaba1ec4cbd26-30"></a>Quit the server with CONTROL-C.
</pre>
<p>Y ya podemos abrir el site, que se encuentra en <a class="reference external" href="http://127.0.0.1:8000/">http://127.0.0.1:8000/</a></p>
</div>
<div class="section" id="el-modelo">
<h2>El modelo</h2>
<p>Editaremos el modelo (<tt class="docutils literal">blog/models.py</tt>), donde estableceremos un modelo muy básico:</p>
<pre class="code python"><a name="rest_code_e54c098dc47047d5824f29410f76e3af-1"></a><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<a name="rest_code_e54c098dc47047d5824f29410f76e3af-2"></a>
<a name="rest_code_e54c098dc47047d5824f29410f76e3af-3"></a><span class="k">class</span> <span class="nc">Post</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<a name="rest_code_e54c098dc47047d5824f29410f76e3af-4"></a>    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
<a name="rest_code_e54c098dc47047d5824f29410f76e3af-5"></a>    <span class="n">body</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>
</pre>
<p>Como se ve, tendremos un título y un cuerpo. De momento no nos hace falta nada más.</p>
</div>
<div class="section" id="urls">
<h2>URLs</h2>
<p>Ahora vamos a modificar el archivo <tt class="docutils literal">urls.py</tt>. Este archivo se utiliza para que django sepa qué debe hacer para cada URL que se le solicita. Por eso trabaja con expresiones regulares, de manera que pueda identificar qué servicio o HTML debe procesar en cada caso. Nosotros necesitamos descomentar las líneas correspondientes a django-admin (archivo <tt class="docutils literal">urls.py</tt>):</p>
<pre class="code python"><a name="rest_code_bee049b4507042468bf6c7efb94cdda2-1"></a><span class="kn">from</span> <span class="nn">django.conf.urls.defaults</span> <span class="kn">import</span> <span class="n">patterns</span><span class="p">,</span> <span class="n">include</span><span class="p">,</span> <span class="n">url</span>
<a name="rest_code_bee049b4507042468bf6c7efb94cdda2-2"></a><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<a name="rest_code_bee049b4507042468bf6c7efb94cdda2-3"></a><span class="n">admin</span><span class="o">.</span><span class="n">autodiscover</span><span class="p">()</span>
<a name="rest_code_bee049b4507042468bf6c7efb94cdda2-4"></a>
<a name="rest_code_bee049b4507042468bf6c7efb94cdda2-5"></a><span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span><span class="s1">''</span><span class="p">,</span>
<a name="rest_code_bee049b4507042468bf6c7efb94cdda2-6"></a>    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">'^admin/'</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span>
<a name="rest_code_bee049b4507042468bf6c7efb94cdda2-7"></a>    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">'^blog/'</span><span class="p">,</span> <span class="s1">'myblog.blog.views.list'</span><span class="p">),</span>
<a name="rest_code_bee049b4507042468bf6c7efb94cdda2-8"></a><span class="p">)</span>
</pre>
</div>
<div class="section" id="administracion">
<h2>Administración</h2>
<p>Vamos a configurar la herramienta de administración, para poder editar nuestras entradas. Para ello utilizaremos el archivo <tt class="docutils literal">blog/admin.py</tt></p>
<pre class="code python"><a name="rest_code_a751759fd6fb4099af4cc6576e80033b-1"></a><span class="kn">from</span> <span class="nn">myblog.blog.models</span> <span class="kn">import</span> <span class="n">Post</span>
<a name="rest_code_a751759fd6fb4099af4cc6576e80033b-2"></a><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<a name="rest_code_a751759fd6fb4099af4cc6576e80033b-3"></a>
<a name="rest_code_a751759fd6fb4099af4cc6576e80033b-4"></a><span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Post</span><span class="p">)</span>
</pre>
</div>
<div class="section" id="la-vista">
<h2>La vista</h2>
<p>En el archivo de URLs indicamos que, ante la URL <tt class="docutils literal">blog/</tt>, veríamos <tt class="docutils literal">*blog.views.list</tt>. Aún no hemos definido esto, y lo haremos en el archivo <tt class="docutils literal">admin/views.py</tt>:</p>
<pre class="code python"><a name="rest_code_f5217d3b9efd43b09552c0c28aeb8003-1"></a><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render_to_response</span>
<a name="rest_code_f5217d3b9efd43b09552c0c28aeb8003-2"></a><span class="kn">from</span> <span class="nn">blog.models</span> <span class="kn">import</span> <span class="n">Post</span>
<a name="rest_code_f5217d3b9efd43b09552c0c28aeb8003-3"></a>
<a name="rest_code_f5217d3b9efd43b09552c0c28aeb8003-4"></a><span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
<a name="rest_code_f5217d3b9efd43b09552c0c28aeb8003-5"></a>    <span class="k">return</span> <span class="n">render_to_response</span><span class="p">(</span><span class="s1">'blog/list.html'</span><span class="p">,</span>
<a name="rest_code_f5217d3b9efd43b09552c0c28aeb8003-6"></a>                              <span class="p">{</span><span class="s1">'post_list'</span><span class="p">:</span> <span class="n">Post</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()})</span>
</pre>
<p>Con esto acabamos de crear una dependencia: <tt class="docutils literal">blog/list.html</tt>. En este caso, necesitaremos crear una plantilla. Las plantillas no van con nuestro proyecto, sino que las deberíamos poner a parte. Cuando se construye un sitio Django, los módulos van por un lado, cada uno de ellos lo más aislado posible del resto. Si es posible, no deberían tener dependencias entre ellos (si es posible, insisto). Serán las plantillas las que le den homogeneidad y unión a todo el <em>site</em>. En la el archivo 'settings.py' establecimos una ruta para <tt class="docutils literal">TEMPLATE_DIRS</tt>. Ahí es donde crearemos nuestro archivo <tt class="docutils literal">blog/list.html</tt>:</p>
<pre class="code html"><a name="rest_code_1c13535f2052438898cc91dc28eb71d9-1"></a><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<a name="rest_code_1c13535f2052438898cc91dc28eb71d9-2"></a><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<a name="rest_code_1c13535f2052438898cc91dc28eb71d9-3"></a>  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Lista de Posts<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<a name="rest_code_1c13535f2052438898cc91dc28eb71d9-4"></a><span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<a name="rest_code_1c13535f2052438898cc91dc28eb71d9-5"></a><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<a name="rest_code_1c13535f2052438898cc91dc28eb71d9-6"></a><span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Lista de Posts<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>{% if post_list %}
<a name="rest_code_1c13535f2052438898cc91dc28eb71d9-7"></a>   <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
<a name="rest_code_1c13535f2052438898cc91dc28eb71d9-8"></a>     {% for post in post_list %}
<a name="rest_code_1c13535f2052438898cc91dc28eb71d9-9"></a>     <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>{{ post.title }}<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<a name="rest_code_1c13535f2052438898cc91dc28eb71d9-10"></a>     {% endfor %}
<a name="rest_code_1c13535f2052438898cc91dc28eb71d9-11"></a>   <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>{% else %}
<a name="rest_code_1c13535f2052438898cc91dc28eb71d9-12"></a>   <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>No blogs found.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>{% endif %}
<a name="rest_code_1c13535f2052438898cc91dc28eb71d9-13"></a><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<a name="rest_code_1c13535f2052438898cc91dc28eb71d9-14"></a><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre>
<p>Al llamar a nuestra plantilla creamos la variable <tt class="docutils literal">post_list</tt> que estamos recorriendo en la plantilla y pintando de la forma adecuada.</p>
</div>
<div class="section" id="como-usarlo">
<h2>Cómo usarlo</h2>
<p>¡¡Ya lo tenemos todo montado!! Ehmmm... y ahora... ¿qué?</p>
<p>Bueno, pues vamos a usarlo. Primero vamos a asegurarnos de que la base de datos está actualizada y vamos a ejecutar el servicio:</p>
<pre class="code bash"><a name="rest_code_a5790e530c44462aa2166fab7fc421f6-1"></a>$ python manage.py syncdb
<a name="rest_code_a5790e530c44462aa2166fab7fc421f6-2"></a>Creating tables ...
<a name="rest_code_a5790e530c44462aa2166fab7fc421f6-3"></a>Installing custom SQL ...
<a name="rest_code_a5790e530c44462aa2166fab7fc421f6-4"></a>Installing indexes ...
<a name="rest_code_a5790e530c44462aa2166fab7fc421f6-5"></a>No fixtures found.
<a name="rest_code_a5790e530c44462aa2166fab7fc421f6-6"></a>$ python manage.py runserver
<a name="rest_code_a5790e530c44462aa2166fab7fc421f6-7"></a>Validating models...
<a name="rest_code_a5790e530c44462aa2166fab7fc421f6-8"></a>
<a name="rest_code_a5790e530c44462aa2166fab7fc421f6-9"></a><span class="m">0</span> errors found
<a name="rest_code_a5790e530c44462aa2166fab7fc421f6-10"></a>Django version <span class="m">1</span>.3, using settings <span class="s1">'myblog.settings'</span>
<a name="rest_code_a5790e530c44462aa2166fab7fc421f6-11"></a>Development server is running at http://127.0.0.1:8000/
<a name="rest_code_a5790e530c44462aa2166fab7fc421f6-12"></a>Quit the server with CONTROL-C.
</pre>
<p>Vale, ya está funcionando. Ahora nos vamos a la URL que nos dice: <a class="reference external" href="http://127.0.0.1:8000/">http://127.0.0.1:8000</a> , lo que nos dará un bonito <em>error</em> de página no encontrada. Como tenemos habilitado el depurado, vemos lo que ha ocurrido: la URL solicitada no se ajusta a ninguno de los patrones definidos.</p>
<p>Vamos primero con la interfaz de administración: <a class="reference external" href="http://127.0.0.1:8000/admin">http://127.0.0.1:8000/admin</a> . Nos pedirá contraseña (la que pusimos al hacer el primer <em>syncdb</em>) y entramos en la parte de administrador. Deberíamos ver 3 bloques:</p>
<ul class="simple">
<li>Auth</li>
<li>Blog</li>
<li>Sites</li>
</ul>
<p>Si es así, es que lo hemos hecho todo bien. Creamos un par de posts en el módulo "Blog". No tiene pérdida.</p>
<p>Toda esta interfaz de administración se ha creado automáticamente gracias a que hemos incorporado <tt class="docutils literal"><span class="pre">django-admin</span></tt>.</p>
<p>¿Ya tenemos los 2-3 posts? Bien. Vamos ahora a la URL de visualización: <a class="reference external" href="http://127.0.0.1:8000/blog">http://127.0.0.1:8000/blog</a> . Poco que decir aquí, salvo que deberíamos estar viendo nuestro blog :D</p>
</div>
<div class="section" id="mas-informacion">
<h2>Más información</h2>
<p>Evidentemente, el <a class="reference external" href="https://docs.djangoproject.com/en/1.3/intro/tutorial01/">estupendo tutorial de django</a>  :D.</p>
</div>
<div class="section" id="despedida">
<h2>Despedida</h2>
<p>Si veo que tiene tirón, quizá un día de estos continúe este pequeño manual. Hay muchas cosas que se pueden hacer aún:</p>
<ul class="simple">
<li>Paginar las entradas cuando haya muchas.</li>
<li>Crear una interfaz CRUD para no tener que editar los Posts desde la interfaz de administración, sino desde el propio <em>site</em>.</li>
<li>Darle color al sitio.</li>
<li>Añadir Tags a los Posts.</li>
<li>Ordenar por fecha de publicación.</li>
<li>Gestionar usuarios.</li>
<li>Añadir pruebas.</li>
<li>[Déle rienda suelta a su imaginación y ponga aquí su deseo.]</li>
</ul>
</div>
</div>
          </div>
          <br><div>
            <nav><span class="author">
                <span class="glyphicon glyphicon-user"></span> 
                <span>Publicado:Miguel Ángel García</span>
              </span>
               

              
              <span class="dateline">
                <span class="glyphicon glyphicon-calendar"></span> 
                <time class="published dt-published" datetime="2011-08-20T00:00:00+00:00" title="2011-08-20">2011-08-20</time></span>
               
              <span class="tags">
                <span class="glyphicon glyphicon-tags"></span> 
                <a class="label label-primary p-category" href="/categories/django/" rel="tag">django</a>
              </span>
                      <ul class="pager">
<li class="previous">
              <a href="/blog/resaltado-sintaxis/" rel="prev" title="Resaltado de sintaxis en tu web">
                <span class="glyphicon glyphicon-arrow-left"></span>
                Publicación anterior
              </a>
            </li>
            <li class="next">
              <a href="/blog/django-tests/" rel="next" title="Django: Test del modelo y Fixtures">
                Siguiente publicación
                <span class="glyphicon glyphicon-arrow-right"></span>
              </a>
            </li>
        </ul></nav>
</div>
          <section class="comments"><h2>Comentarios</h2>
                            <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="magmax",
            disqus_url="http://magmax.org/blog/django-sitio-basico/",
        disqus_title="Django: Creaci\u00f3n de un sitio b\u00e1sico con Admin",
        disqus_identifier="cache/posts/django-sitio-basico.html",
        disqus_config = function () {
            this.language = "es_ES";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="//disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


          </section></article><script>var disqus_shortname="magmax";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
      <aside class="sidebar col-md-3"><div>
<section class="panel panel-default"><div class="panel-heading">
    <h3 class="panel-title">Last comments</h3>
  </div>
  <div class="panel-body">
    <div id="disqus_last_comments" class="dsq-widget">
      <script type="text/javascript" src="https://magmax.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=0&amp;avatar_size=32&amp;excerpt_length=150">
      </script>
</div>
  </div>
</section>
</div>
          <div>
<section class="panel panel-default"><div class="panel-heading">
    <h3 class="panel-title">GitHub Repos</h3>
  </div>
  <div class="panel-body">
    <ul id="gh_repos" class="list-unstyled">
<li class="loading">Status updating…</li>
    </ul>
</div>
  <div class="panel-footer">
    <a href="https://github.com/magmax">@magmax</a> on GitHub
  </div>
</section>
</div>
      </aside>
</div>

    <footer>
      Contents © 2009-2020 <a href="mailto:">Miguel Ángel García</a> 
<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/2.5/es/">
<img alt="Creative Commons License BY-NC-SA" style="border-width:0; margin-bottom:12px;width:80px;height:15px;vertical-align:middle" src="https://i.creativecommons.org/l/by-nc-sa/2.5/es/80x15.png"></a>; Using <a href="/stories/credits/">a lot of free software</a>
      
    </footer>
</div>
</div>




<script data-main="/assets/js/main" src="/assets/js/libs/require/require.min.js"></script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-9308241-3', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
