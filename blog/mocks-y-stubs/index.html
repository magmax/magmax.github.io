<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>Pruebas unitarias: Mocks y Stubs - El blog de MagMax</title><meta name="Description" content="El blog de un Ingeniero Informático: tutoriales, manuales, opiniones, comparativas, ..."><meta property="og:title" content="Pruebas unitarias: Mocks y Stubs" />
<meta property="og:description" content="Cuando estamos desarrollando, es necesario probar lo que estamos haciendo. En ocasiones esto puede resultar muy difícil (y más aún cuando no se ha hecho TDD), o muy lento.
En este artículo trataré de dar una introducción a la utilización de MOCKs y STUBs en estos casos.
En los ejemplos usaré Java y la librería mockito .
Voy a comenzar por plantear unas premisas: Las pruebas deben ser unitarias, rápidas e inocuas (no alteran el estado inicial)." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://magmax.org/blog/mocks-y-stubs/" /><meta property="og:image" content="https://magmax.org/icons/favicon.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2010-11-17T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-01-28T00:00:00+00:00" /><meta property="og:site_name" content="El blog de MagMax" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://magmax.org/icons/favicon.png"/>

<meta name="twitter:title" content="Pruebas unitarias: Mocks y Stubs"/>
<meta name="twitter:description" content="Cuando estamos desarrollando, es necesario probar lo que estamos haciendo. En ocasiones esto puede resultar muy difícil (y más aún cuando no se ha hecho TDD), o muy lento.
En este artículo trataré de dar una introducción a la utilización de MOCKs y STUBs en estos casos.
En los ejemplos usaré Java y la librería mockito .
Voy a comenzar por plantear unas premisas: Las pruebas deben ser unitarias, rápidas e inocuas (no alteran el estado inicial)."/>
<meta name="application-name" content="El blog de MagMax">
<meta name="apple-mobile-web-app-title" content="El blog de MagMax"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://magmax.org/blog/mocks-y-stubs/" /><link rel="prev" href="https://magmax.org/blog/select-datos-dinamicos/" /><link rel="next" href="https://magmax.org/blog/concordion/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Pruebas unitarias: Mocks y Stubs",
        "inLanguage": "es",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/magmax.org\/blog\/mocks-y-stubs\/"
        },"genre": "posts","keywords": "mock, java testing","wordcount":  884 ,
        "url": "https:\/\/magmax.org\/blog\/mocks-y-stubs\/","datePublished": "2010-11-17T00:00:00+00:00","dateModified": "2021-01-28T00:00:00+00:00","publisher": {
            "@type": "Organization",
            "name": "Miguel Ángel"},"author": {
                "@type": "Person",
                "name": "Miguel Ángel"
            },"description": ""
    }
    </script></head>
    <body header-desktop="" header-mobile=""><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="El blog de MagMax"><img
        class="lazyload logo"
        src="/svg/loading.min.svg"
        data-src="/icons/favicon.png"
        data-srcset="/icons/favicon.png, /icons/favicon.png 1.5x, /icons/favicon.png 2x"
        data-sizes="auto"
        alt="/icons/favicon.png"
        title="/icons/favicon.png" />MagMax Blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/"> Inicio </a><a class="menu-item" href="/tags"> Tags </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item language" title="Selecciona el lenguage">Español<i class="fas fa-chevron-right fa-fw"></i>
                        <select class="language-select" id="language-select-desktop" onchange="location = this.value;"><option value="/blog/mocks-y-stubs/" selected>Español</option></select>
                    </a><a href="javascript:void(0);" class="menu-item theme-switch" title="Cambia el tema">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="El blog de MagMax"><img
        class="lazyload logo"
        src="/svg/loading.min.svg"
        data-src="/icons/favicon.png"
        data-srcset="/icons/favicon.png, /icons/favicon.png 1.5x, /icons/favicon.png 2x"
        data-sizes="auto"
        alt="/icons/favicon.png"
        title="/icons/favicon.png" />MagMax Blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/" title="">Inicio</a><a class="menu-item" href="/tags" title="">Tags</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Cambia el tema">
                <i class="fas fa-adjust fa-fw"></i>
            </a><a href="javascript:void(0);" class="menu-item" title="Selecciona el lenguage">Español<i class="fas fa-chevron-right fa-fw"></i>
                    <select class="language-select" onchange="location = this.value;"><option value="/blog/mocks-y-stubs/" selected>Español</option></select>
                </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contenido</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">Pruebas unitarias: Mocks y Stubs</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>Miguel Ángel</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="17 Nov 2010">17 Nov 2010</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;884 palabras&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;5 minutos&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>Contenido</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#el-problema">El problema</a></li>
    <li><a href="#más-sencillo">Más sencillo</a></li>
    <li><a href="#la-solución">La solución</a></li>
    <li><a href="#solución-con-acceso-a-datos">Solución con acceso a datos</a></li>
    <li><a href="#algún-problema-con-esto">¿Algún problema con esto?</a></li>
    <li><a href="#entonces-para-qué-sirven">Entonces&hellip; ¿Para qué sirven?</a></li>
    <li><a href="#notas-y-más-información">Notas y más información</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>Cuando estamos desarrollando, es necesario probar lo que estamos haciendo. En ocasiones esto puede resultar muy difícil (y más aún cuando no se ha hecho TDD), o muy lento.</p>
<p>En este artículo trataré de dar una introducción a la utilización de MOCKs y STUBs en estos casos.</p>
<p>En los ejemplos usaré Java y la librería <a href="https://code.google.com/p/mockito/" target="_blank" rel="noopener noreffer">mockito</a> .</p>
<p>Voy a comenzar por plantear unas premisas: Las pruebas deben ser unitarias, rápidas e inocuas (no alteran el estado inicial).</p>
<figure><img src="/images/java.png"
         alt="Java"/>
</figure>

<h2 id="el-problema">El problema</h2>
<p>Como ejemplo, supongamos un programa que va a escribir en un archivo. Esto es un problema en sí mismo: Si el archivo existe, no podemos eliminarlo después, ya que cambiaría el estado inicial. Si el archivo no existe podemos crearlo y eliminarlo, pero puede que la prueba no sea tan rápida como nos gustaría.</p>
<p>Aún así, hagamos el método inicial, que tan sólo va a escribir &ldquo;a sentence&rdquo; en un archivo:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">writeASentence</span><span class="o">(</span><span class="n">FileWriter</span> <span class="n">writer</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
  <span class="n">writer</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">&#34;una cadena&#34;</span><span class="o">);</span>
  <span class="n">writer</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
<span class="o">}</span>

<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testWriteASentence</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
  <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;output&#34;</span><span class="o">);</span>
  <span class="n">file</span><span class="o">.</span><span class="na">createNewFile</span><span class="o">();</span>
  <span class="n">file</span><span class="o">.</span><span class="na">deleteOnExit</span><span class="o">();</span>

  <span class="n">FileWriter</span> <span class="n">writer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileWriter</span> <span class="o">(</span><span class="n">file</span><span class="o">);</span>

  <span class="n">writeASentence</span> <span class="o">(</span><span class="n">writer</span><span class="o">);</span>

  <span class="n">writer</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

  <span class="n">file</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Aquí tenemos la función que queremos probar y un primer test.</p>
<p>Problemas de este test:</p>
<ul>
<li>No prueba nada.</li>
<li>Si el fichero existe, lo borrará.</li>
<li>Si se invoca muchas veces, será lento.</li>
<li>Sin querer, estamos probando parte de la funcionalidad de &ldquo;File&rdquo;.</li>
</ul>
<p>Así que necesitamos algo más potente. Comprobar el fichero contiene lo que se deseaba escribir es una operación que puede ser terriblemente compleja en comparación con el propio método.</p>
<h2 id="más-sencillo">Más sencillo</h2>
<p>Para ello podemos crearnos un objeto &ldquo;mock&rdquo;. Mockito puede ayudarnos a ello:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kn">import static</span> <span class="nn">org.mockito.Mockito.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kt">void</span> <span class="nf">writeASentence</span><span class="o">(</span><span class="n">FileWriter</span> <span class="n">writer</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
  <span class="n">writer</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">&#34;una cadena&#34;</span><span class="o">);</span>
  <span class="n">writer</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
<span class="o">}</span>

<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testWriteASentence</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
  <span class="n">FileWriter</span> <span class="n">writer</span> <span class="o">=</span> <span class="n">mock</span><span class="o">(</span><span class="n">FileWriter</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

  <span class="n">writeASentence</span> <span class="o">(</span><span class="n">writer</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Este código es exacto al anterior. Sigue sin probar nada, pero ya no modifica ni requiere ningún archivo.</p>
<h2 id="la-solución">La solución</h2>
<p>Realmente sólo queremos comprobar que se llamó a los métodos &ldquo;write&rdquo; y &ldquo;flush&rdquo; del objeto que le paso por parámetro, y estaría bien comprobar que los argumentos de estos dos métodos eran correctos. Para ello:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kn">import static</span> <span class="nn">org.mockito.Mockito.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kt">void</span> <span class="nf">writeASentence</span><span class="o">(</span><span class="n">FileWriter</span> <span class="n">writer</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
  <span class="n">writer</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">&#34;una cadena&#34;</span><span class="o">);</span>
  <span class="n">writer</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
<span class="o">}</span>

<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testWriteASentence</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
  <span class="n">FileWriter</span> <span class="n">writer</span> <span class="o">=</span> <span class="n">mock</span><span class="o">(</span><span class="n">FileWriter</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

  <span class="n">writeASentence</span> <span class="o">(</span><span class="n">writer</span><span class="o">);</span>

  <span class="n">verify</span> <span class="o">(</span><span class="n">writer</span><span class="o">).</span><span class="na">write</span><span class="o">(</span><span class="s">&#34;una cadena&#34;</span><span class="o">);</span>
  <span class="n">verify</span> <span class="o">(</span><span class="n">writer</span><span class="o">).</span><span class="na">flush</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Y ya se está comprobando que nuestro método realiza las operaciones deseadas.</p>
<h2 id="solución-con-acceso-a-datos">Solución con acceso a datos</h2>
<p>¿Qué ocurre si lo que deseamos es obtener datos? Podemos pensar que, en ese caso, no nos queda más remedio que utilizar el objeto real. Sin embargo, para eso están los STUBs. Mockito nos permite mezclar ambos de manera sencilla.</p>
<p>Vamos a añadir a nuestro ejemplo una absurda función que comprueba que un fichero existe:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kn">import static</span> <span class="nn">org.mockito.Mockito.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kt">void</span> <span class="nf">assertFileExistence</span> <span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
   <span class="k">if</span> <span class="o">(</span> <span class="n">file</span><span class="o">.</span><span class="na">exists</span><span class="o">()</span> <span class="o">)</span>
      <span class="k">return</span><span class="o">;</span>
   <span class="k">throw</span> <span class="k">new</span> <span class="n">Exception</span> <span class="o">(</span><span class="s">&#34;error&#34;</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Cualquier intento que hagamos de probar la función sin usar un &ldquo;File&rdquo; real dará problemas al llamar a la función. Engañémosla:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kn">import static</span> <span class="nn">org.mockito.Mockito.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kt">void</span> <span class="nf">assertFileExistence</span> <span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
   <span class="k">if</span> <span class="o">(</span> <span class="n">file</span><span class="o">.</span><span class="na">exists</span><span class="o">()</span> <span class="o">)</span>
      <span class="k">return</span><span class="o">;</span>
   <span class="k">throw</span> <span class="k">new</span> <span class="n">Exception</span> <span class="o">(</span><span class="s">&#34;error&#34;</span><span class="o">);</span>
<span class="o">}</span>

<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testAssertFileExistenceWhenItExists</span> <span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span>
<span class="o">{</span>
   <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="n">mock</span> <span class="o">(</span><span class="n">File</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

   <span class="n">when</span> <span class="o">(</span> <span class="n">file</span><span class="o">.</span><span class="na">exists</span><span class="o">()</span> <span class="o">).</span><span class="na">thenReturn</span> <span class="o">(</span><span class="kc">true</span><span class="o">);</span>

   <span class="n">assertFileExistence</span> <span class="o">(</span><span class="n">file</span><span class="o">)</span>

   <span class="n">verify</span> <span class="o">(</span><span class="n">file</span><span class="o">).</span><span class="na">exists</span><span class="o">();</span>
<span class="o">}</span>

<span class="nd">@Test</span> <span class="o">(</span><span class="n">expected</span><span class="o">=</span><span class="n">Exception</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testAssertFileExistenceWhenItExists</span> <span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span>
<span class="o">{</span>
   <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="n">mock</span> <span class="o">(</span><span class="n">File</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

   <span class="n">when</span> <span class="o">(</span> <span class="n">file</span><span class="o">.</span><span class="na">exists</span><span class="o">()</span> <span class="o">).</span><span class="na">thenReturn</span> <span class="o">(</span><span class="kc">false</span><span class="o">);</span>

   <span class="n">assertFileExistence</span> <span class="o">(</span><span class="n">file</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Y ahora sí, tenemos una función atómica, que se está probando con exclusividad, perfectamente definida y que no altera el estado de nada.</p>
<h2 id="algún-problema-con-esto">¿Algún problema con esto?</h2>
<p>Pues mucho me temo que sí. No podía ser perfecto. Por desgracia necesitamos un gran conocimiento de lo que ocurre dentro. Si son pruebas unitarias, tendremos ese conocimiento, pero casi cualquier cambio en el método a probar alterará la prueba. La utilización de más de un Mock/Stub puede suponer una alteración en el comportamiento real de lo que estemos probando, y puede requerir numerosos casos de interacción entre ellos.</p>
<h2 id="entonces-para-qué-sirven">Entonces&hellip; ¿Para qué sirven?</h2>
<p>Cuando queremos modificar una base de datos resulta casi imposible ser inocuo. Al transmitir datos por red o al escribir en fichero también puede ser un problema. En estos caso puede ser bastante interesante recurrir a Mocks o Stubs.</p>
<p>Además, si necesitamos muchos Mocks y Stubs para realizar una única prueba es señal de que algo está mal en el método a probar.</p>
<p>Recordad que un método, una clase, debería hacer una única cosa. Con este principio, ¡todo es tan sencillo de probar!</p>
<h2 id="notas-y-más-información">Notas y más información</h2>
<p>Tened en cuenta que <a href="https://martinfowler.com/articles/mocksArentStubs.html" target="_blank" rel="noopener noreffer">los Mocks no son Stubs</a>.</p>
<p>También tenéis ayuda de en la web de <a href="https://code.google.com/p/mockito/" target="_blank" rel="noopener noreffer">mockito</a>, o podéis decantaros por
<a href="https://easymock.org/" target="_blank" rel="noopener noreffer">easymock</a>.</p>
<p>Otros lenguajes también tienen sus mocks, como <a href="https://python-mock.sourceforge.net/" target="_blank" rel="noopener noreffer">Python</a>, <a href="https://mocha.rubyforge.org/" target="_blank" rel="noopener noreffer">Ruby</a>, <a href="https://www.phpunit.de/manual/3.0/en/mock-objects.html" target="_blank" rel="noopener noreffer">PHP</a>, &hellip; (si conocéis otros mejores o bien más frameworks, podéis indicármelo y los añadiré).</p></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Actualizado el 28 Jan 2021</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Compartir en Twitter" data-sharer="twitter" data-url="https://magmax.org/blog/mocks-y-stubs/" data-title="Pruebas unitarias: Mocks y Stubs" data-hashtags="mock,java testing"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="Compartir en Facebook" data-sharer="facebook" data-url="https://magmax.org/blog/mocks-y-stubs/" data-hashtag="mock"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="Compartir en Linkedin" data-sharer="linkedin" data-url="https://magmax.org/blog/mocks-y-stubs/"><i class="fab fa-linkedin fa-fw"></i></a><a href="javascript:void(0);" title="Compartir en WhatsApp" data-sharer="whatsapp" data-url="https://magmax.org/blog/mocks-y-stubs/" data-title="Pruebas unitarias: Mocks y Stubs" data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href="javascript:void(0);" title="Compartir en Tumblr" data-sharer="tumblr" data-url="https://magmax.org/blog/mocks-y-stubs/" data-title="Pruebas unitarias: Mocks y Stubs" data-tags="mock,java testing"><i class="fab fa-tumblr fa-fw"></i></a><a href="javascript:void(0);" title="Compartir en Reddit" data-sharer="reddit" data-url="https://magmax.org/blog/mocks-y-stubs/"><i class="fab fa-reddit fa-fw"></i></a><a href="javascript:void(0);" title="Compartir en Instapaper" data-sharer="instapaper" data-url="https://magmax.org/blog/mocks-y-stubs/" data-title="Pruebas unitarias: Mocks y Stubs" data-description=""><i data-svg-src="/lib/simple-icons/icons/instapaper.min.svg"></i></a><a href="javascript:void(0);" title="Compartir en Digg" data-sharer="digg" data-url="https://magmax.org/blog/mocks-y-stubs/"><i class="fab fa-digg fa-fw"></i></a><a href="javascript:void(0);" title="Compartir en Blogger" data-sharer="blogger" data-url="https://magmax.org/blog/mocks-y-stubs/" data-title="Pruebas unitarias: Mocks y Stubs" data-description=""><i class="fab fa-blogger fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/mock/">mock</a>,&nbsp;<a href="/tags/java-testing/">java testing</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Regresar</a></span>&nbsp;|&nbsp;<span><a href="/">Inicio</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/blog/select-datos-dinamicos/" class="prev" rel="prev" title="Llenar un Select con datos Dinámicos"><i class="fas fa-angle-left fa-fw"></i>Llenar un Select con datos Dinámicos</a>
            <a href="/blog/concordion/" class="next" rel="next" title="Pruebas de sistema: Concordion">Pruebas de sistema: Concordion<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"><div id="disqus_thread" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://disqus.com/?ref_noscript">Disqus</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Provisto por <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.91.2">Hugo</a> | Tema - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2021</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Miguel Ángel</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Volver arriba">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="Ver comentarios">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/katex/katex.min.css"><script type="text/javascript" src="https://magmax.disqus.com/embed.js" defer></script><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript" src="/lib/katex/katex.min.js"></script><script type="text/javascript" src="/lib/katex/auto-render.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copiar al portapapeles","maxShownLines":10},"comment":{},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false}};</script><script type="text/javascript" src="/js/theme.min.js"></script><script type="text/javascript">
            window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());
            gtag('config', 'UA-9308241-3', { 'anonymize_ip': true });
        </script><script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=UA-9308241-3" async></script></body>
</html>
